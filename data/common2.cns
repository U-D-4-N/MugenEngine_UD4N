; Common state file
;
; System variables usage
; ----------------------
; Var name    Type   Purpose
; --------    ----   -------
; sysvar(0)   Temp   Set by state 5081 (HITL_SLIDE) to 1 to prevent
;                    showing ground hit frame in state 5110 (HIT_LIEDOWN).
;                    Used by guarding states.
; sysvar(1)   Temp   Used by state 40 (Jump Start) amd 45 (Air Jump Start)
;                    to keep track of which way to jump.
;                    Used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    Used in state 5080 for storing the anim # to display.
;fvar(2)〜(8) ガード硬直用
;fvar(10) = ガードバランスゲージダメージ計算
;fvar(11) = 80HITオーバー時に強制ダウン
;fvar(12) = 基底補正ダメージ
;fvar(13) = 基底補正ダメージ+
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = N
sprpriority = 0

[state 1,1]
type = velset
trigger1 = prevstateno = 20 || vel x < 0
x = 0

[state 1,1]
type = statetypeset
trigger1 = time > 5 || vel x < 0
physics = S

[state 1,1]
type = nothitby
trigger1 = win = 1
trigger2 = RoundState = [3,4]
value = SCA

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 210

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[state 1,先行入力]
type = varset
trigger1 = time = 1
var(47) = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 1,forceRCflag]
type = varset
trigger1 = roundstate < 2
trigger2 = ctrl = 0 && var(44) = 0
var(44) = 1

[state 1,forceRCflag]
type = varset
trigger1 = life >= 1999 && power >= 5000
var(17) = 0
persistent = 0

[State -2,52]
type = Varset
trigger1 = !ctrl
persistent = 0
var(15) = ifelse(facing = -1,2,1)

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && (Anim != [4,5]) && p1name != "12"
trigger2 = (Anim = [4,5]) && AnimTime = 0 && p1name != "12"
trigger3 = Anim != 0+var(7) && (Anim != [4+var(7),5+var(7)]) && p1name = "12"
trigger4 = (Anim = [4+var(7),5+var(7)]) && AnimTime = 0 && p1name = "12"
value = ifelse(p1name = "12" && var(11) != 0,1,ifelse(p1name = "12",0+var(7),0))

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna" && var(11) > 0
var(13) = 0
persistent = 0

[State 0, 2]
type = VelSet
trigger1 = 1
y = 0

[State 0, 2]
type = posset
trigger1 = 1
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = null;VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050



[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = var(47) != 0 && time = 0 && ctrl
triggerall = win = 0
value = var(47)
ctrl = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = command = "holddown" && time = 0 && ctrl && var(47) = 0
value = 11

[State -2,RemoveExplod];
type = RemoveExplod
trigger1 = var(42) != 0
triggerall = numexplod(2500) = 1
ignorehitpause = 1
ID = 2500

[State -2,52]
type = Varset
triggerall = Ctrl = 0
triggerall = Time = 0
triggerall = facing = 1
trigger1 = prevStateNo = 5900
trigger2 = prevstateno = [170,194]
trigger2 = win = 0
persistent = 0
v = 15
value = 1

[State -2,52]
type = Varset
triggerall = Ctrl = 0
triggerall = Time = 0
triggerall = facing = -1
trigger1 = prevStateNo = 5900
trigger2 = prevstateno = [170,194]
trigger2 = win = 0
persistent = 0
v = 15
value = 2

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = N
anim = ifelse(p1name = "12" && var(11) != 0,13,ifelse(p1name = "12",10+var(7),10))

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = 1

[state 1,1]
type = velset
trigger1 = (prevstateno = [5200,5240]) 
trigger2 = vel x < 0
triggerall = time = 0
x = 0

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 10
persistent = 0

[state 11,2];フラグリセット sj 可
type = varset
trigger1 = time = 0
v = 0 
value = 0

[state 1,forceRCflag]
type = varset
trigger1 = prevstateno = [100,110]
var(1) = 1
persistent = 0

[state 1,forceRCflag]
type = varset
trigger1 = prevstateno != [100,110]
var(1) = 0
persistent = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = N
sprpriority = 0

[state 1,1]
type = velset
trigger1 = (prevstateno = [5200,5240]) 
trigger2 = vel x < 0
triggerall = time = 0
x = 0

[state 1,forceRCflag]
type = varset
trigger1 = life >= 1999 && power >= 5000
var(17) = 0
persistent = 0

[state 1,1]
type = statetypeset
trigger1 =  time < 5;var(1) = 1
physics = N

[state 1,1]
type = statetypeset
trigger1 = time > 5
physics = S

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 210

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = (Anim = [6,7]) && AnimTime = 0 && p1name != "12"
trigger2 = Anim != 11 && (anim != [6,7]) && anim != 14 && p1name != "12"
trigger3 = (Anim = [6+var(7),7+var(7)]) && AnimTime = 0 && p1name = "12"
trigger4 = Anim != 11+var(7) && (anim != [6+var(7),7+var(7)]) && anim != 14+var(7) && p1name = "12"
value = ifelse(p1name = "12" && var(11) != 0,14,ifelse(p1name = "12",11+var(7),11))

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 11
persistent = 0

[state 11,2];フラグリセット sj 可
type = varset
trigger1 = time = 0
v = 0 
value = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = var(47) != 0 && time = 0 && ctrl
triggerall = win = 0
value = var(47)
ctrl = 0

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = N
anim = ifelse(p1name = "12" && var(11) != 0,15,ifelse(p1name = "12",12+var(7),12))

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 12
persistent = 0

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5 && p1name != "12"
trigger2 = Anim = 5 && AnimTime = 0 && p1name != "12"
trigger3 = Anim != 20+var(7) && Anim != 5+var(7) && p1name = "12"
trigger4 = Anim = 5+var(7) && AnimTime = 0 && p1name = "12"
value = ifelse(p1name = "12" && var(11) != 0,22,ifelse(p1name = "12",20+var(7),20))

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 20
persistent = 0

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5 && p1name != "12"
trigger2 = Anim = 5 && AnimTime = 0 && p1name != "12"
trigger3 = Anim != 21+var(7) && Anim != 5+var(7) && p1name = "12"
trigger4 = Anim = 5+var(7) && AnimTime = 0 && p1name = "12"
value = ifelse(p1name = "12" && var(11) != 0,23,ifelse(p1name = "12",21+var(7),21))

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = ifelse(p1name = "12" && var(11) != 0,30,ifelse(p1name = "12",40+var(7),40))
ctrl = 0
sprpriority = 1

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 40
persistent = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[state 1,forceRCflag]
type = varset
trigger1 = 1
var(47) = 0

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = [100,109] ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0
facep2 = 1

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(48)
value = 48

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(48)
value = ifelse(p1name = "12" && var(11) != 0,31,ifelse(p1name = "12",41+var(7),41))

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 1

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ動作
[Statedef 50]
type    = A
physics = A

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time < 2 && prevstateno != 7769
ignorehitpause = 1
first = 26
last = 29
value =0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = prevstateno = 7769
ignorehitpause = 1
first = 26
last = 29
value =19

[State 50, 4]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 1,1]
type = poweradd
trigger1 = vel x > 0
value = 2

[State 52, 4]
type = ChangeState
trigger1 = var(47) != 0 && ctrl
value = var(47)
ctrl = 0

[State 50, 6]
type = ChangeAnim
trigger1 = Time = 0 && sysvar(3) = 0 && (anim != [41,46])
trigger1 = p1name !="12"
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))
persistent = 0

[State 50, 6]
type = ChangeAnim
triggerall = Time = 0 && sysvar(3) = 0 && (anim != [41+var(7),46+var(7)])
trigger1 = p1name ="12" 
value = ifelse((vel x)=0, 41+var(7), ifelse((vel x)>0, 42+var(7), 43+var(7)))
persistent = 0

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && (anim != [44,46])
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0
trigger1 = p1name != "12"
persistent = 0
value = Anim + 3

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && (anim != [44+var(7),46+var(7)])
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0
trigger1 = p1name = "12" 
persistent = 0
value = Anim + 3


[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && (anim != [44,46])
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 1 
persistent = 0
value = Anim + 3+ifelse((vel x)=0, 0, ifelse((vel x)>0, 1,2))

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = ifelse(prevstateno = 7780,1,0)
facep2 = 1
velset = 0,0


[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 121
pos = -20,0

[state 1,SA]
type = ctrlset
trigger1 = time = 3
value = ifelse((prevstateno = [200,3799]) || prevstateno = 5210,0,1)

[state 1,SA]
type = changeanim
triggerall = time = 0
trigger1 = var(11) > 0 && (prevstateno != [ifelse(p1name = "12",5000+var(7),5000),5030]) && p1name = "setsuna"
trigger2 = var(11) = 0 && p1name = "setsuna"
trigger3 = p1name != "setsuna"
value = ifelse(p1name = "12" && var(11) != 0,37,ifelse(p1name = "12",47+var(7),47))

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 47
persistent = 0

[state 11,2];フラグリセット sj 可
type = varset
trigger1 = time = 0
var(0) = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = f47,0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[state 825,1]
type = nothitby
trigger1 = (prevstateno = [825,827])
trigger2 = (prevstateno = [5200,5210])
value = SCA
time = 2

[state 11,2];フラグリセット 
type = varset
trigger1 = time = 0
var(10) = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard

[State 52, 4]
type = ChangeState
trigger1 = Time = 2
trigger1 = command != "holddown"
value = 0
ctrl = 1

[State 52, 4]
type = ChangeState
trigger1 = time = 2
trigger1 = command = "holddown"
value = 11
ctrl = 1

[State 52, 4]
type = ChangeState
triggerall = prevstateno = 50 || (prevstateno = [7769,7780])
trigger1 = (Var(26) = [1,7]) && ctrl;4フレーム以内であればニュートラルに戻したかどうか関係なく移行します。
trigger2 = (Var(26) = [8,15]) && var(27) = 1 && ctrl;5〜8フレームではニュートラルに戻していた場合のみ移行します。
value = 7700
ctrl = 0

[State 52, 4]
type = ChangeState
triggerall = prevstateno = 50 || (prevstateno = [7769,7780])
trigger1 = (Var(28) = [1,7]) && ctrl;4フレーム以内であればニュートラルに戻したかどうか関係なく移行します。
trigger2 = (Var(28) = [8,15]) && var(29) = 1 && ctrl;5〜8フレームではニュートラルに戻していた場合のみ移行します。
value = 7710
ctrl = 0

; Jump Land
[Statedef 53]
type    = S
physics = S
ctrl = 0
facep2 = 1

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 121
pos = -20,0

[state 1,SA]
type = changeanim
triggerall = time = 0
trigger1 = var(11) > 0 && (prevstateno != [ifelse(p1name = "12",5000+var(7),5000),5030]) && p1name = "setsuna"
trigger2 = var(11) = 0 && p1name = "setsuna"
trigger3 = p1name != "setsuna"
value = ifelse(p1name = "12" && var(11) != 0,37,ifelse(p1name = "12",47+var(7),47))

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 47
persistent = 0

[state 11,2];フラグリセット sj 可
type = varset
trigger1 = time = 0
v = 0 
value = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = f47,0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = varset
trigger1 = Time = 0
v = 10
value = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard

[State 52, 4]
type = ChangeState
trigger1 = Time = 4
trigger1 = command != "holddown"
value = 0
ctrl = 1

[State 52, 4]
type = ChangeState
trigger1 = time = 4
trigger1 = command = "holddown"
value = 11
ctrl = 1

; ガードインパクト技飛び道具受けたとき
[Statedef 57]
type = U
physics = N
movetype = A
sprpriority = 0

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = f6,3

[State -2,42]
type = Explod
trigger1 = time = 0
id = 57
persistent = 0
anim = F166
pos = 0,-55
postype = p1
facing = 1
sprpriority = 2
;removetime = 58
bindtime = 1
ignorehitpause = 1
ownpal = 0
supermove = 1

[State 1601, 6]
type = posfreeze
trigger1 = 1

[State 1601, 6]
type = PalFX
trigger1 = time = 0
time = 15
add = 0,255,170
sinadd = 0,-255,-170,50
ignorehitpause = 1
persistent = 0

[state 1,forceRCflag]
type = changestate
trigger1 = time > gethitvar(hitshaketime) 
value = var(35)
ignorehitpause = 1


; スーパーアーマーヒット時
[Statedef 58]
type = U
physics = N
movetype = A
sprpriority = 0

[State 1601, 6]
type = posfreeze
trigger1 = 1

[State 1601, 6]
type = lifeadd
trigger1 = time = 0
value = -gethitvar(damage)

[State 1601, 6]
type = PalFX
trigger1 = time = 0
time = 10
add = 255,255,255
sinadd = -128,-128,-128,50
ignorehitpause = 1
persistent = 0

[state 1,forceRCflag]
type = changestate
trigger1 = time > gethitvar(hitshaketime) 
value = ifelse(alive = 1,var(34),5000)
ignorehitpause = 1

; キャンセル不能部分
[Statedef 59]
type = U
movetype = I
physics = S
ctrl = 0
poweradd = 0

[State 195, poweradd];
type = varset
trigger1 = var(11) > 0 && p1name = "setsuna"
var(13) = 59
persistent = 0

[State 460, 4]
type = ChangeState
trigger1 = animtime = 0
value = ifelse(command = "holddown" ,11,0)
ctrl = 1

;スーパージャンプ
;垂直
[Statedef 70]
type    = S
physics = S
anim = ifelse(p1name = "12" && var(11) != 0,13,ifelse(p1name = "12",10+var(7),10))
ctrl = 0


[state 1,1]
type = nothitby
trigger1 = 1
value = ,NT,ST,HT


[state 1,forceRCflag]
type = varset
trigger1 = 1
var(47) = 0

[State 900, 1]
type = ChangeState
trigger1 = time = 2
trigger1 = p1name != "hugo" && p1name != "zangief" && p1name != "iori" && p1name != "slayer"
trigger2 = time = 4
value = 71
ctrl = 1

[Statedef 71]
type = A
physics = A
anim = ifelse(p1name = "12" && var(11) != 0,31,ifelse(p1name = "12",41+var(7),41))

[State 901, 1]
type = Velset
trigger1 = Time = 0
Y = const(velocity.jump.y)-3.5
x = ifelse(command = "holdfwd",4,ifelse(command = "holdback",-4,0))

[State 901, 2]
type = VelAdd
trigger1 = 1
Y = 0.08

[State 901, 2]
type = VelAdd
trigger1 = command = "holdfwd"
x = 0.08

[State 901, 2]
type = VelAdd
trigger1 = command = "holdback"
x = -0.08

[State 901, 2]
type = VelAdd
trigger1 = vel x != 0
x = ifelse(vel X > 0,-0.001,0.001)

[State 901, 3]
type = AfterImage
trigger1 = Time = 0
trigger1 = var(39) = 0
Time = 13

[State 901, 9]
type = ChangeState
trigger1 = Vel Y >= 0
value = 72

[Statedef 72]
type = A
physics = N
anim = ifelse(p1name = "12" && var(11) != 0,31,ifelse(p1name = "12",44+var(7),44))

[State 901, 2]
type = VelAdd
trigger1 = 1
Y = 0.4

[State 901, 2]
type = VelAdd
trigger1 = command = "holdfwd"
x = 0.08

[State 901, 2]
type = VelAdd
trigger1 = command = "holdback"
x = -0.08

[State 901, 2]
type = VelAdd
trigger1 = vel x != 0
x = ifelse(vel X > 0,-0.001,0.001)

[State 902, 2]
type = ChangeState
trigger1 = pos Y >= 0 && vel y > 0
value = 79

;前
[Statedef 75]
type    = S
physics = S
anim = ifelse(p1name = "12" && var(11) != 0,13,ifelse(p1name = "12",10+var(7),10))
ctrl = 0
velset = 0,0

[state 1,1]
type = nothitby
trigger1 = 1
value = ,NT,ST,HT


[state 1,forceRCflag]
type = varset
trigger1 = 1
var(47) = 0

[State 900, 1]
type = ChangeState
trigger1 = time = 2
trigger1 = p1name != "hugo" && p1name != "zangief" && p1name != "iori" && p1name != "slayer"
trigger2 = time = 4
value = 71
ctrl = 1

;後ろ
[Statedef 76]
type    = S
physics = S
anim = ifelse(p1name = "12" && var(11) != 0,13,ifelse(p1name = "12",10+var(7),10))
ctrl = 0
velset = 0,0

[state 1,1]
type = nothitby
trigger1 = 1
value = ,NT,ST,HT


[state 1,forceRCflag]
type = varset
trigger1 = 1
var(47) = 0

[State 900, 1]
type = ChangeState
trigger1 = time = 2
trigger1 = p1name != "hugo" && p1name != "zangief" && p1name != "iori" && p1name != "slayer"
trigger2 = time = 4
value = 71
ctrl = 1

[Statedef 79]
type = C
physics = S
anim = ifelse(p1name = "12" && var(11) != 0,37,ifelse(p1name = "12",47+var(7),47))
velset = 0,0
ctrl = 0

[state sj,1]
type = varset
trigger1 = time = 0
v = 10
value = 0

[State 930, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1 




;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
sprpriority = 1

[state 1,SA]
type = changeanim
triggerall = time = 0
trigger1 = var(11) > 0 && (prevstateno != [ifelse(p1name = "12",5000+var(7),5000),5030]) && p1name = "setsuna"
trigger2 = var(11) = 0 && p1name = "setsuna"
trigger3 = p1name != "setsuna"
value = 100

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna"
var(13) = 100
persistent = 0

[state 100,1]
type = changestate
trigger1 = prevstateno = 101
value = 101

[State 100, 1]
type = VelSet
trigger1 = time = 0
y = 0
persistent = 0

[State 100, 1]
type = posset
trigger1 = time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.fwd.x)-4
persistent = 0

[State 100, 1]
type = Veladd
trigger1 = 1
x = 1.1

[State 100, 1]
type = poweradd
trigger1 = p2dist x >= 0
value = 5


[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
trigger2 = command = "holdfwd"
trigger2 = p1name = "Nash" 
trigger2=  p1name = "Marco" 
trigger2 =  p1name = "Juli" 
trigger2 =  p1Name="Karin"
value = 0


; RUN_fwd 一足飛び
[Statedef 101]
type    = S
physics = S
ctrl = 1
anim = ifelse(p1name = "12",100+var(7),100)

[State 100, 1]
type = poweradd
trigger1 = 1
value = 5

[State 105, 1]
type = VelSet
trigger1 = animelemtime(2) > 0
x = const(velocity.run.fwd.x);-4
;persistent = 0

[State 100, 1]
type = null;Veladd
trigger1 = 1
x = 1.2

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn


[State 105, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 52


; RUN_back　後ろ走り
[Statedef 102]
type    = S
physics = N
sprpriority = 1
movetype = A

[state 1,SA]
type = changeanim
triggerall = time = 0
trigger1 = p1name != "setsuna"
value = ifelse(p1name = "12",102+var(7),102)


[State 100, 1]
type = VelSet
trigger1 = animelem = 1
x = const(velocity.run.back.x)
persistent = 0

[State 100, 1]
type = Veladd
trigger1 = 1
x = -.05

[State 100, 1]
type = poweradd
trigger1 = 1
value = -8


[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = nostandguard
flag3 = nocrouchguard

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 105, 1]
type = statetypeset
trigger1 = time = 8 && p1name = "slayer"
trigger2 = time = 6 && p1name = "ken_3rd" || time = 6 && p1name = "ryu_3rd" || time = 6 && p1name = "gouki" || time = 6 && p1name = "12" || time = 6 && p1name = "chunli" 
trigger3 = time = 7 && p1name = "makoto" || time = 7 && p1name = "mukuro" || time = 6 && p1name = "Q" 
physics = S

[State 105, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

; ヒューゴタイプRUN_fwd
[Statedef 103]
type    = S
physics = N
anim = ifelse(p1name = "12" && var(11) != 0,101,ifelse(p1name = "12",100+var(7),100))

[State 100, 1]
type = poweradd
trigger1 = 1
value = 5

[State 105, 1]
type = statetypeset
trigger1 = time = 8
physics = S

[State 105, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.fwd.x);-4
persistent = 0

[State 100, 1]
type = null;Veladd
trigger1 = 1
x = 1.2

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = p1name != "ibuki"
flag = NoAutoTurn

[State 105, 3]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 105, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

; レイレイタイプRUN_fwd
[Statedef 104]
type    = S
physics = N
anim = 100
ctrl = 1

[State 100, 1]
type = poweradd
trigger1 = 1
value = 5

[state 1,1]
type = ctrlset
trigger1 = animelemtime(1) = 1
value = 1

[state 1,1]
type = ctrlset
trigger1 = animelemtime(5) = 1
value = 0

[State 105, 1]
type = statetypeset
trigger1 = animelemtime(3) = 2
physics = S

[State 105, 1]
type = statetypeset
trigger1 = animelemtime(1) = 1
physics = N

[State 105, 1]
type = VelSet
trigger1 = animelemtime(1) = 3
x = const(velocity.run.fwd.x);-4
;persistent = 0

[State 100, 1]
type = null;Veladd
trigger1 = 1
x = 1.2

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn


[State 105, 3]
type = ChangeState
trigger1 = AnimTime = 0 && command != "holdfwd"
value = ifelse(command = "holddown",11,0)
ctrl = 1


; Backdash (launch)
[Statedef 105]
type = S
movetype = A
physics = S
anim = ifelse(p1name = "12",105+var(7),105)
velset = 0
ctrl = 0

[state 1,1]
type = nothitby
trigger1 = prevstateno = [800,805]
trigger2 = prevstateno = [850,855]
value = SCA

[State 100, 1]
type = poweradd
trigger1 = 1
value = -5

[state 1,SA]
type = changeanim
triggerall = time = 0
trigger1 = var(11) > 0 && (prevstateno != [ifelse(p1name = "12",5000+var(7),5000),5030]) && p1name = "setsuna"
trigger2 = var(11) = 0 && p1name = "setsuna"
trigger3 = p1name != "setsuna"
value = ifelse(p1name = "12",105+var(7),105)

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna" && var(11) > 0
var(13) = 105
persistent = 0

[State 105, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

; Backdash (in the air)
[Statedef 106]
type = A
movetype = A
physics = N
anim = ifelse(p1name = "12",106+var(7),106)
velset = -7,-2

[state 1,1]
type = nothitby
trigger1 = prevstateno = [800,805]
trigger2 = prevstateno = [850,855]
value = SCA

[State -2, 4.21];通常
type = defenceMulSet
trigger1 = life > 1000
value = 1.4

[State -2, 4.21];体力１／2で防御ＵＰ
type = defenceMulSet
trigger1 = life = [600,1000]
value = 1

[State -2, 4.21];体力１／4で防御ＵＰ
type = defenceMulSet
trigger1 = life < 600
value = .8

[State 106, 1]
type = PlaySnd
trigger1 = Time = 0
value = 105,0

[State 106, 2]
type = VelAdd
trigger1 = Time > 0
y = .4

[State 100, 1]
type = poweradd
trigger1 = 1
value = -5

[State 106, 3]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 107

; Backdash (landing)
[Statedef 107]
type = S
movetype = I
physics = S
velset = 0,0

[state 1,1]
type = nothitby
trigger1 = prevstateno = [800,805]
trigger2 = prevstateno = [850,855]
value = SCA

[state 1,SA]
type = changeanim
triggerall = time = 0
trigger1 = var(11) > 0 && (prevstateno != [ifelse(p1name = "12",5000+var(7),5000),5030]) && p1name = "setsuna"
trigger2 = var(11) = 0 && p1name = "setsuna"
trigger3 = p1name != "setsuna"
value = ifelse(p1name = "12",107+var(7),107)

[State 195, poweradd];
type = varset
trigger1 = p1name = "setsuna" && var(11) > 0
var(13) = 107
persistent = 0


[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100, 1]
type = poweradd
trigger1 = 1
value = -5

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

; RUN_モリガンダッシュ
[Statedef 108]
type    = S
physics = N
sprpriority = 1
movetype = I
ctrl = 0

[state 1,1]
type = statetypeset
trigger1 = animelem = 2
statetype = A

[state 1,SA]
type = changeanim
trigger1 = time = 0
value = 100

[state 1,1]
type = ctrlset
trigger1 = time = 10
value = 1

[State 100, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.fwd.x)
y = const(velocity.run.fwd.y)
persistent = 0

[State 100, 1]
type = null;Veladd
trigger1 = animelemtime(2) > 1
x = .5

[State 100, 1]
type = poweradd
trigger1 = 1
value = 5


[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = noairguard
flag2 = nostandguard
flag3 = nocrouchguard

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[state 1,1]
type = velset
trigger1 = time > 9 && command = "holdback"
trigger2 = time > 9 && command != "holdfwd"
trigger3 = time > 35
x = 1

[State 105, 3]
type = ChangeState
trigger1 = time > 9 && command != "holdfwd"
trigger2 = time > 35
value = 50
ctrl = 1

; フェリシア系ダッシュ
[Statedef 109]
type    = S
physics = N
sprpriority = 1
movetype = I
ctrl = 0

[state 1,1]
type = statetypeset
trigger1 = animelem = 2
statetype = A

[state 1,SA]
type = changeanim
trigger1 = time = 0
value = 100

[state 1,1]
type = ctrlset
trigger1 = time = 8
value = ifelse(p1name = "Felicia",1,0)

[State 100, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.fwd.x)
y = const(velocity.run.fwd.y)
persistent = 0

[State 100, 1]
type = gravity
trigger1 = animelemtime(2) > 0


[State 100, 1]
type = poweradd
trigger1 = 1
value = 5


[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = noairguard
flag2 = nostandguard
flag3 = nocrouchguard

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 105, 3]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 53

; 空中ダッシュ(前
[Statedef 110]
type    = A
physics = N
sprpriority = 1
ctrl = 0

[state 1,SA]
type = changeanim
trigger1 = time = 0
value = 110

[state 1,1]
type = ctrlset
trigger1 = time = 6
value = 1

[State 100, 1]
type = poweradd
trigger1 = 1
value = 5

[State 100, 1]
type = VelSet
trigger1 = 1
y = 0
x = const(velocity.run.fwd.x)-2

[State 100, 1]
type = poweradd
trigger1 = p2dist x >= 0
value = 5

[state 1,1]
type = playsnd
trigger1 = animelem = 1
trigger1 = p1name != "leilei"
value = f110,1
persistent = 0

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 107, 3]
type = turn
trigger1 = AnimTime = 0 && p2dist x < 0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
trigger2 = time > 6 && command = "holdback"
value = 50

; 空中ダッシュ(前 １２,ジェダ用
[Statedef 111]
type    = A
physics = N
sprpriority = 1
ctrl = 0
velset = 0,0

[state 1,SA]
type = changeanim
trigger1 = time = 0
value = 110

[state 1,1]
type = ctrlset
trigger1 = time = 6
value = 1

[State 100, 1]
type = poweradd
trigger1 = 1
value = 5

[State 100, 1]
type = VelSet
trigger1 = animelem = 10 && p1name = "12"
x = 1

[State 100, 1]
type = VelSet
trigger1 = animelem = 2
y = 6
x = const(velocity.run.fwd.x)-4

[state 1,1]
type = veladd
trigger1 = animelemtime(2) > 0 && vel y > 0
y = -.6

[State 100, 1]
type = poweradd
trigger1 = p2dist x >= 0
value = 5

[state 1,1]
type = playsnd
trigger1 = animelem = 1
;trigger1 = p1name != "leilei"
value = f110,1
persistent = 0

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 107, 3]
type = turn
trigger1 = AnimTime = 0 && p2dist x < 0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
;trigger2 = time > 6 && command = "holdback"
value = 50
ctrl = 1

[State 100, 4]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 53

; 空中ダッシュ(後ろ
[Statedef 115]
type    = A
physics = N
movetype = A
sprpriority = 1
ctrl = 0

[state 1,SA]
type = changeanim
trigger1 = time = 0
value = 115

[State 100, 1]
type = poweradd
trigger1 = 1
value = -5

[state 1,1]
type = ctrlset
trigger1 = time = 9
value = 1

[State 100, 1]
type = VelSet
trigger1 = 1
y = 0
x = const(velocity.run.back.x)



[State 107, 3]
type = turn
trigger1 = AnimTime = 0 && p2dist x < 0

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
trigger2 = time > 9 && command = "holdfwd"
value = 50

; 空中ダッシュ(前 １２,ジェダ用
[Statedef 116]
type    = A
physics = N
sprpriority = 1
ctrl = 0
velset = 0,0

[state 1,SA]
type = changeanim
trigger1 = time = 0
value = 115

[state 1,1]
type = ctrlset
trigger1 = time = 6
value = 1

[State 100, 1]
type = VelSet
trigger1 = animelem = 10 && p1name = "12"
x = -1

[State 100, 1]
type = VelSet
trigger1 = animelem = 2
y = 6
x = const(velocity.run.back.x)

[state 1,1]
type = veladd
trigger1 = animelemtime(2) > 0 && vel y > 0
y = -.6

[State 100, 1]
type = poweradd
trigger1 = 1
value = -5

[state 1,1]
type = playsnd
trigger1 = animelem = 1
;trigger1 = p1name != "leilei"
value = f110,1
persistent = 0

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 107, 3]
type = turn
trigger1 = AnimTime = 0 && p2dist x < 0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
;trigger2 = time > 6 && command != "holdback"
value = 50
ctrl = 1

[State 100, 4]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 53

;---------------------------------------------------------------------------
; RUN_UP
[Statedef 118]
type    = S
physics = N

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 119]
type    = S
physics = N

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
facep2 = 1


[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfState
trigger1 = fvar(11) > 80
value = 5020 ;HITG_SLIDE

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2 + ifelse(p1name = "12",var(7),0)

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, 2]
type = StateTypeSet
trigger1 = command != "holddown" && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 115, 7]
type = varset
trigger1 = Time = 0
var(1) = 0

;ジャストディフェンス
[State 1651, 7]
type = varset
trigger1 = time = 0
var(14) = 0
persistent = 0

[State 115, 7]
type = varadd
trigger1 = time > 0
var(1) = 1

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S
facep2 = 1

[state 130,movetype]
type = statetypeset
trigger1 = prevstateno = [150,161]
movetype = H

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = ifelse(p1name = "12",130+var(7),130)

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 115, 7]
type = varadd
trigger1 = time > 0
var(1) = 1

[State 130, Hi to Lo]
type = ChangeState
trigger1 = command = "holddown"
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140
;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C
facep2 = 1

[State 115, 7]
type = varadd
trigger1 = time > 0
var(1) = 1

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131 && p1name != "12"
trigger2 = Anim != 131+var(7) && p1name = "12"
value = ifelse(p1name = "12",131+var(7),131)

[state 130,movetype]
type = statetypeset
trigger1 = prevstateno = [150,161]
movetype = H

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 131, Lo to Hi]
type = ChangeState
trigger1 = command != "holddown"
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N
facep2 = 1

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 130,movetype]
type = statetypeset
trigger1 = prevstateno = [150,155]
movetype = H

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command != "holdback"
value = 52

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 130

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1
movetype = U
facep2 = 1

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 140, 1]
type = ChangeAnim
trigger1 = time = 0
value = 140 + (statetype = C) + (statetype = A)*2 + ifelse(p1name = "12",var(7),0)

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[state 130,movetype]
type = null;statetypeset
trigger1 = prevstateno = [150,155]
movetype = H

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
facep2 = 1

[state 1,1]
type = velset
trigger1 = time = 0 && (prevstateno != [7905,7906])
x = 0
y = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 1,1]
type = varset
trigger1 = time = 0
fvar(8) = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(4) = GetHitVar(hittime)

[state 1,1]
type = varset
trigger1 = time = 0
fvar(3) = GetHitVar(hitshaketime)

[state 1,1]
type = varset
trigger1 = time = 0
fvar(5) = GetHitVar(hitshaketime)

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(6) = GetHitVar(hittime)

[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300

[state 1,1]
type = varset
trigger1 = time = 0
fvar(7) = 0

[state 1,1]
type = varadd
trigger1 = 1 
fvar(7) = 1

[state 1,1]
type = varadd
trigger1 = fvar(3) > 0 
fvar(3) = -1

[State 151, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hitshaketime)
value = 151

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 150, 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(p1name = "12",150+var(7),150)

[State 150, 2]
type = ChangeState
trigger1 = command = "recovery" || command = "s"
value = ifelse(command = "holddown",759,761)

;赤ブロッキングへ
[State 150, 2]
type = ChangeState
trigger1 = var(26) = [1,3]
trigger2 = var(28) = [1,3]
trigger3 = command != "holdback"
value = 160

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3


[state 1,1]
type = varset
trigger1 = time = 0
fvar(2) = 0

[State 5000, FFB Medium]
type = null;assertspecial
trigger1 = command != "holdback"
trigger2 = (Var(26) = [1,3])
trigger3 = (Var(28) = [1,3])
flag = nostandguard
flag2 = nocrouchguard


[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = ifelse(p1name = "12",150+var(7),150)
facep2 = 1

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0


[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = anim != 150 && statetype = S && p1name != "12"
trigger2 = anim != 150+var(1) && statetype = S && p1name = "12"
value = ifelse(p1name = "12",150+var(7),150)

[State 150, 1]
type = ChangeAnim
trigger1 = anim != 151 && statetype = C && p1name != "12"
trigger2 = anim != 151+var(7) && statetype = C && p1name = "12"
value = ifelse(p1name = "12",151+var(7),151)

[State 150, 1]
type = statetypeset
trigger1 = 1
statetype = S

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0 && (prevstateno != [160,161])
x = 1

[state 1,1]
type = varset
trigger1 = vel x != 0
fvar(2) = 1


[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300

[State 150, 2]
type = ChangeState
trigger1 = command = "recovery" || command = "s"
value = ifelse(command = "holddown",759,761)

[State 151, 4]
type = ChangeState
trigger1 = var(26) = [1,3]
trigger2 = var(28) = [1,3]
trigger3 = command != "holdback"
value = 161

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
trigger3 = time >= fvar(4) && prevstateno = 161
x = 0

[state 1,1]
type = varadd
trigger1 = fvar(4) != 0 && prevstateno != 161
fvar(4) = -1.0

[State 151, 3]
type = CtrlSet
trigger1 = Time >= fvar(6)+(fvar(5)-fvar(7))-1 && prevstateno != 160;GetHitVar(hittime)
trigger2 = time >= fvar(4)+1 && prevstateno = 161
trigger3 = time >= fvar(6) && prevstateno = 160
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= fvar(6)+(fvar(5)-fvar(7))-1 && prevstateno != 160;GetHitVar(hittime)
trigger2 = time >= fvar(4)+1 && prevstateno = 161
trigger3 = time >= fvar(6) && prevstateno = 160
value = ifelse(command = "holddown" ,11,0)
ctrl = 1


[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = null;ChangeState
triggerall = time > 0
trigger1 = command != "holdback" && command != "holdfwd"
trigger2 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
value = 161

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holdfwd" && command != "holddown" && command != "holdup"
;trigger1 = fvar(3) = 0
trigger1 = (Var(26) = [1,3])
value = 7720

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holddown" && command != "holdback" && command != "holdfwd" 
;trigger1 = fvar(3) = 0
trigger1 = (Var(28) = [1,3])
value = 7725

[State 5000, FFB Medium]
type = null;assertspecial
trigger1 = command != "holdback"
trigger2 = (Var(26) = [1,3])
trigger3 = (Var(28) = [1,3])
flag = nostandguard
flag2 = nocrouchguard

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SA,NA,SA,HA
slot = 0
time = 1
stateno = ifelse(p2statetype != A,7755,7756)

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SCA,NP,SP,HP
slot = 1
time = 1
stateno = 7758

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NA,SA,HA
slot = 2
time = 1
stateno = 7757

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NP,SP,HP
slot = 3
time = 1
stateno = 7759

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0
facep2 = 1

[state 1,1]
type = varset
trigger1 = time = 0
fvar(8) = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(4) = GetHitVar(hittime)

[state 1,1]
type = varset
trigger1 = time = 0
fvar(3) = GetHitVar(hitshaketime)

[state 1,1]
type = varset
trigger1 = time = 0
fvar(5) = GetHitVar(hitshaketime)

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(6) = GetHitVar(hittime)

[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300

[state 1,1]
type = varadd
trigger1 = fvar(3) > 0
fvar(3) = -1

[state 1,1]
type = varset
trigger1 = time = 0
fvar(7) = 0

[state 1,1]
type = varadd
trigger1 = 1 
fvar(7) = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hitshaketime)
value = 153

[state 1,1]
type = varset
trigger1 = time= 0
fvar(2) = 0

[State 150, 2]
type = ChangeState
trigger1 = command = "recovery" || command = "s"
value = ifelse(command = "holddown",759,761)

;ガードキャンセル
[State 150, 2]
type = ChangeState
trigger1 = var(26) = [1,3]
trigger2 = var(28) = [1,3]
trigger3 = command != "holdback"
value = 160

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = ifelse(p1name = "12",151+var(7),151)


[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

[State 5000, FFB Medium]
type = null;assertspecial
trigger1 = command != "holdback"
trigger2 = (Var(26) = [1,3])
trigger3 = (Var(28) = [1,3])
flag = nostandguard
flag2 = nocrouchguard

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SA,NA,SA,HA
slot = 0
time = 1
stateno = ifelse(p2statetype != A,7755,7756)

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SCA,NP,SP,HP
slot = 1
time = 1
stateno = 7758

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NA,SA,HA
slot = 2
time = 1
stateno = 7757

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NP,SP,HP
slot = 3
time = 1
stateno = 7759

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holdfwd" && command != "holddown" && command != "holdup"
;trigger1 = fvar(3) = 0
trigger1 = (Var(26) = [1,3])
value = 7720

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holddown" && command != "holdback" && command != "holdfwd" 
;trigger1 = fvar(3) = 0
trigger1 = (Var(28) = [1,3])
value = 7725

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S
;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = ifelse(p1name = "12",151+var(7),151)
facep2 = 1


[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 1,forceRCflag]
type = varadd
trigger1 = fvar(4) != 0 && prevstateno != 161
fvar(4) = -1.0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0



[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = ifelse(p1name = "12",151+var(7),151)

[State 150, 1]
type = statetypeset
trigger1 = 1
statetype = C

[State 150, 2]
type = ChangeState
trigger1 = command = "recovery" || command = "s"
value = ifelse(command = "holddown",759,761)


[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0 && (prevstateno != [160,161])
x = 1

[state 1,1]
type = varset
trigger1 = Time = 0
fvar(2) = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
trigger3 = time >= fvar(4) && prevstateno = 161
x = 0


[State 151, 3]
type = CtrlSet
trigger1 = Time >= fvar(6)+(fvar(5)-fvar(7))-1 && prevstateno != 160;GetHitVar(hittime)
trigger2 = time >= fvar(4)+1 && prevstateno = 161
trigger3 = time >= fvar(6) && prevstateno = 160
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= fvar(6)+(fvar(5)-fvar(7))-1 && prevstateno != 160;GetHitVar(hittime)
trigger2 = time >= fvar(4)+1 && prevstateno = 161
trigger3 = time >= fvar(6) && prevstateno = 160
value = ifelse(command = "holddown" ,11,0)
ctrl = 1

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = var(26) = [1,3]
trigger2 = var(28) = [1,3]
trigger3 = command != "holdback"
value = 161


[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holdfwd" && command != "holddown" && command != "holdup"
;trigger1 = fvar(3) = 0
trigger1 = (Var(26) = [1,3])
value = 7720

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holddown" && command != "holdback" && command != "holdfwd" 
;trigger1 = fvar(3) = 0
trigger1 = (Var(28) = [1,3])
value = 7725

[State 5000, FFB Medium]
type = null;assertspecial
trigger1 = command != "holdback"
trigger2 = (Var(26) = [1,3])
trigger3 = (Var(28) = [1,3])
flag = nostandguard
flag2 = nocrouchguard

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SA,NA,SA,HA
slot = 0
time = 1
stateno = ifelse(p2statetype != A,7755,7756)

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SCA,NP,SP,HP
slot = 0
time = 1
stateno = 7758

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NA,SA,HA
slot = 0
time = 1
stateno = 7757

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NP,SP,HP
slot = 0
time = 1
stateno = 7759

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

[State 151, 4]
type = ChangeState
trigger1 = time = 0
value = 150

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command != "holdback"
value = 52

[State 155, 8]
type = ChangeState
trigger1 = sysvar(0)
value = 130

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 160]
type    = U
movetype= H
physics = N
facep2 = 1

[state 1,1]
type = varset
trigger1 = time = 0
fvar(8) = 1

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 1,1]
type = varadd
trigger1 = time = 0 && fvar(3) > 0
fvar(3) = -1.0

[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300


[state 1,1]
type = varset
trigger1 = vel x != 0
fvar(2) = 1

[state 1,1]
type = varset
trigger1 = vel x = 0
fvar(2) = 0

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 150, 1]
type = ChangeAnim
trigger1 = command = "holddown"
value = ifelse(p1name = "12",151+var(7),151)

[State 150, 1]
type = ChangeAnim
trigger1 = command != "holddown"
value = ifelse(p1name = "12",150+var(7),150)

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = command != "holdback"
movetype = I

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = command = "holdback"
movetype = H

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = Time >= fvar(5)
trigger2 = time >= fvar(3) ;&& movetype = I
value = ifelse(command = "holddown",153,151)


[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holdfwd" && command != "holddown" && command != "holdup"
;trigger1 = fvar(3) = 0
trigger1 = (Var(26) = [1,3])
value = 7720

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holddown" && command != "holdback" && command != "holdfwd" 
;trigger1 = fvar(3) = 0
trigger1 = (Var(28) = [1,3])
value = 7725

[State 151, 4]
type = HitOverride
trigger1 = (Var(26) = [1,3])
attr = SA,NA,SA,HA
slot = 0
time = 1
stateno = ifelse(p2statetype != A,7755,7756)

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SCA,NP,SP,HP
slot = 1
time = 1
stateno = 7758

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NA,SA,HA
slot = 2
time = 1
stateno = 7757

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = SCA,NP,SP,HP
slot = 3
time = 1
stateno = 7759


;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 161]
type    = U
movetype= U
physics = S
facep2 = 1


[state 1,1]
type = null;varadd
trigger1 = time = 0 && fvar(4) > 0.0
fvar(4) = -1.0

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = command != "holdback"
movetype = I

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = command = "holdback"
movetype = H

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300

;ジャストディフェンス
[State 1651, 7]
type = varset
trigger1 = time = 0
var(1) = 0
persistent = 0

[State 150, 1]
type = ChangeAnim
trigger1 = command = "holddown"
value = ifelse(p1name = "12",151+var(7),151)

[State 150, 1]
type = ChangeAnim
trigger1 = command = "holddown"
value = ifelse(p1name = "12",150+var(7),150)

[State 150, 1]
type = statetypeset
trigger1 = command = "holddown"
statetype = C

[State 150, 1]
type = statetypeset
trigger1 = command != "holddown"
statetype = S

[State 1651, 7]
type = PalFX
trigger1 = var(16) > 60
time = 10
add = 255,80,80

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0 && fvar(2) = 0;&& prevstateno = 160
x = 1

[state 1,1]
type = varset
trigger1 = vel x != 0
fvar(2) = 1

[State 150, 2]
type = ChangeState
trigger1 = command = "recovery" || command = "s"
value = ifelse(command = "holddown",759,761)

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= fvar(6)
trigger3 = Time >= fvar(4)
x = 0

[State 151, 4]
type = HitOverride
trigger1 = (Var(26) = [1,3])
attr = SA,NA,SA,HA
slot = 0
time = 1
stateno = ifelse(p2statetype != A,7755,7756)

[State 151, 4]
type = hitoverride
trigger1 = (Var(26) = [1,3])
attr = SCA,NP,SP,HP
slot = 1
time = 1
stateno = 7758

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = C,NA,SA,HA
slot = 2
time = 1
stateno = 7757

[State 151, 4]
type = hitoverride
trigger1 = (Var(28) = [1,3])
attr = SCA,NP,SP,HP
slot = 3
time = 1
stateno = 7759



[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 3]
type = CtrlSet
trigger1 = Time >= fvar(4)+(fvar(5) - fvar(7))-1
trigger1 = fvar(8) = 0
trigger2 = Time >= fvar(4)+2
trigger2 = fvar(8) = 1
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= fvar(4)+(fvar(5) - fvar(7))-1
value = ifelse(command = "holddown" ,11,0)
ctrl = 1


[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holdfwd" && command != "holddown" && command != "holdup"
;trigger1 = fvar(3) = 0
trigger1 = (Var(26) = [1,3])
value = 7720

[State 151, 4]
type = null;ChangeState
;trigger1 = command = "holddown" && command != "holdback" && command != "holdfwd" 
;trigger1 = fvar(3) = 0
trigger1 = (Var(28) = [1,3])
value = 7725

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State -2,52]
type = Varset
trigger1 = 1
persistent = 0
var(15) = ifelse(facing = -1,2,1)

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; INTRO (override this state to give character an intro)
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 215, 3]
type = EnvShake
trigger1 = time = 0
ampl = ifelse(GetHitVar(animtype) = 0,1,ifelse(GetHitVar(animtype) = 1,3,5))
;freq = 5
;phase = 5
time = ifelse(GetHitVar(animtype) = 0,5,ifelse(GetHitVar(animtype) = 1,10,15))

[State -2,47]
type = RemoveExplod
trigger1 = numexplod(210) = 1
ID = 210

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[state 1,forceRCflag]
type = varadd
trigger1 = time = 0
fvar(11) = 1
persistent = 0
ignorehitpause = 1

[State 5000 , 5]
type = selfState
trigger1 = fvar(11) > 50
value = 5020 ;HITG_SLIDE

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
value = SCA

[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300

[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || p2stateno = 3950
var(17) = -100

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name != "12"
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse((GetHitVar(groundtype) = 1),ifelse(p1name = "12",5000+var(7),5000),5010) + GetHitVar(animtype)

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name = "12"
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse((GetHitVar(groundtype) = 1),5000+var(7),5010+var(7)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640])
trigger1 = GetHitVar(animtype) = [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse(p1name = "12",5030+var(7),5030)



[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name != "12"
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) 

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name = "12"
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 +var(7) + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) +var(7)


[State 5000, 32] ;Freeze anim
type = ChangeAnim
trigger1 = p1name != "setsuna" 
trigger2 = var(11) = 0 && p1name = "setsuna"
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = A

[State -3, 2.4];add for air attacks
type = lifeadd
triggerall = Time = 1 && statetype = A
trigger1 = command = "holdup" || command = "holdfwd" || command = "holddown" || command = "holdback"
value = -(gethitvar(damage)/2)
ignorehitpause = 1
persistent = 0

[State 5000, 5]
type = selfState
triggerall = HitShakeOver && (prevstateno != [7600,7640])
triggerall = GetHitVar(yvel) = 0
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = 5001 ;HITG_SLIDE

[State 5000, 6]
type = selfState
triggerall = HitShakeOver && (prevstateno != [7600,7640])
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = 5030

[State 5000, 5]
type = selfState
triggerall = HitShakeOver && (prevstateno != [7600,7640])
trigger1 = var(11) != 0 && p1name = "setsuna"  && prevstateno != 0
value = var(13) ;HITG_SLIDE
ctrl = ifelse(var(13) < 101,1,0)

[State 5000, 5]
type = selfState
triggerall = HitShakeOver && (prevstateno != [7600,7640])
trigger1 = var(11) != 0 && p1name = "setsuna" && prevstateno = 0
value = 0 ;HITG_SLIDE
ctrl = 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square



[State 5000, FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7640]
value = 7650




[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
value = SCA

[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || p2stateno = 3950
var(17) = -60

[State -3, 2.2]
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5000
trigger2 = stateno = 5001
trigger2 = anim = 5010
trigger3 = stateno = 5011
trigger3 = anim = 5020 
var(17) = ifelse(var(44) >1,50/var(44),30)
ignorehitpause = 1
persistent = 0


[State -3, 2.3];add for medium attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5001
trigger2 = stateno = 5001
trigger2 = anim = 5011
trigger3 = stateno = 5011
trigger3 = anim = 5021 
var(17) = ifelse(var(44) >1,120/var(44),90)
ignorehitpause = 1
persistent = 0


[State -3, 2.4];add for heavy attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5002
trigger2 = stateno = 5001
trigger2 = anim = 5012
trigger3 = stateno = 5011
trigger3 = anim = 5022 
var(17) = ifelse(var(44) >1,180/var(44),130)
ignorehitpause = 1
persistent = 0


[State -3, 2.4];add for heavy attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5003
trigger2 = stateno = 5001
trigger2 = anim = 5013
trigger3 = stateno = 5011
trigger3 = anim = 5023 
var(17) = ifelse(var(44) >1,230/var(44),180)
ignorehitpause = 1
persistent = 0


[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0 && p1name != "12"
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0 && p1name = "12"
value = 5005+var(7) + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001,var] ;varser
type = varset
trigger1 = 1;Time <= GetHitVar(hittime)/2
var(47) = 0

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = selfState
triggerall = HitOver  && var(19) = 0 && (prevstateno = [4860,4879])
trigger1 = prevstateno = 4861 && time > 5
trigger2 = prevstateno = 4863 && time > 3
trigger3 = prevstateno = 4865 && time > 7
trigger4 = prevstateno = 4867 && time > 9
trigger5 = prevstateno = 4869 && time > 11
value = ifelse(command = "holdup",40,120)
ctrl = 1

[State 5001, 6]
type = null;selfState
trigger1 = HitOver && var(19) = 0 && command = "holdback"
value = ifelse(command = "holdup",40,120)
ctrl = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic



[State 5001, 6]
type = selfState
trigger1 = HitOver  && var(19) = 0; && command != "holdback"
value = ifelse(command = "holddown",11,0)
ctrl = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver && var(19) = 1
value = 5304


;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0
facep2 = 1

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
value = SCA

[State -2,47]
type = RemoveExplod
trigger1 = numexplod(210) = 1
ID = 210

[state 1,forceRCflag]
type = varadd
trigger1 = time = 0
fvar(11) = 1

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfState
trigger1 = fvar(11) > 80
value = 5020 ;HITG_SLIDE

[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || p2stateno = 3950
var(17) = -100

[state 1,forceRCflag]
type = lifeadd
trigger1 = time = 0 && (prevstateno != [4700,5320])
value = -(GetHitVar(damage)/10)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse(p1name = "12",5020 + GetHitVar(animtype)+var(7),5020 + GetHitVar(animtype))

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 
trigger1 = GetHitVar(animtype) = [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse(p1name = "12",5030+var(7),5030)

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = p1name != "setsuna" || (var(11) = 0 && p1name = "setsuna")
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = ifelse(p1name = "12",5047 + GetHitVar(animtype)+var(7),5047 + GetHitVar(animtype))

[State 5010, 32] ;Freeze anim
type = ChangeAnim
trigger1 = p1name != "setsuna" 
trigger2 = var(11) = 0 && p1name = "setsuna"
value = anim

[State 5010, 5]
type = selfState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = 5011 ;HITC_SLIDE

[State 5010, 6]
type = selfState
trigger1 = HitShakeOver
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = 5030

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfState
triggerall = HitShakeOver
trigger1 = var(11) != 0 && p1name = "setsuna"  && prevstateno != 0
value = var(13) ;HITG_SLIDE
ctrl = ifelse(var(13) < 101,1,0)

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfState
triggerall = HitShakeOver
trigger1 = var(11) != 0 && p1name = "setsuna" && prevstateno = 0
value = 0 ;HITG_SLIDE
ctrl = 1

[State -3, 2.4];add for air attacks
type = lifeadd
triggerall = Time = 1 && statetype = A
trigger1 = command = "holdup" || command = "holdfwd" || command = "holddown" || command = "holdback"
value = -(gethitvar(damage)/2)
ignorehitpause = 1
persistent = 0



[State 5100, 1]
type = Varadd
trigger1 = Time = 0 && (p2stateno != [2000,4000])
var(17) = 20


[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
value = SCA

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || stateno = 3950
var(17) = -50

[State -3, 2.2]
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5000
trigger2 = stateno = 5001
trigger2 = anim = 5010
trigger3 = stateno = 5011
trigger3 = anim = 5020 
var(17) = ifelse(var(44) >1,60/var(44),35)
ignorehitpause = 0
persistent = 0


[State -3, 2.3];add for medium attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5001
trigger2 = stateno = 5001
trigger2 = anim = 5011
trigger3 = stateno = 5011
trigger3 = anim = 5021 
var(17) = ifelse(var(44) >1,135/var(44),105)
ignorehitpause = 0
persistent = 0


[State -3, 2.4];add for heavy attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5002
trigger2 = stateno = 5001
trigger2 = anim = 5012
trigger3 = stateno = 5011
trigger3 = anim = 5022 
var(17) = ifelse(var(44) >1,215/var(44),155)
ignorehitpause = 0
persistent = 0


[State -3, 2.4];add for heavy attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5001
trigger1 = anim = 5003
trigger2 = stateno = 5001
trigger2 = anim = 5013
trigger3 = stateno = 5011
trigger3 = anim = 5023 
var(17) = ifelse(var(44) >1,255/var(44),185)
ignorehitpause = 0
persistent = 0


[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = ifelse(p1name = "12",5025 + GetHitVar(animtype)+var(7),5025 + GetHitVar(animtype))

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001,var] ;varser
type = varset
trigger1 = 1;Time < GetHitVar(hittime)/2
var(47) = 0

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = null;selfState
trigger1 = HitOver  && var(19) = 0 && (prevstateno = [4860,4869]) && alive
value = ifelse(command != "holdup",120,40)
ctrl = 1

[State 5001, 6]
type = null;selfState
trigger1 = HitOver  && var(19) = 0 && command = "holdback" && alive
value = ifelse(command != "holdup",120,40)
ctrl = 1

[State 5001, 6]
type = selfState
trigger1 = HitOver  && var(19) = 0; && command != "holdback" && alive
value = ifelse(command = "holddown",11,0)
ctrl = 1

[State 5001, 6]
type = selfState
trigger1 = HitOver  && var(19) = 0 && !alive && vel y = 0
value = 4910
ctrl = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver && var(19) = 1
value = 5304
;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[state 1,forceRCflag]
type = varadd
trigger1 = time = 0
fvar(11) = 1



[State -3, 2.4];add for air attacks
type = lifeadd
;triggerall = Time = 1
trigger1 = command = "holdup" || command = "FF" || command = "BB" || command = "dd"
value = -(gethitvar(damage)/2)
ignorehitpause = 1
persistent = 0

[State -3, 2.4];add for air attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 20
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5020
trigger1 = anim = 5031
trigger2 = stateno = 5020
trigger2 = anim = 5030
trigger3 = stateno = 5070
trigger3 = anim = 5070 
var(17) = ifelse(var(44) >1,60/var(44),45)
ignorehitpause = 1
persistent = 0

[State -3, 2.4];add for air attacks
type = Varadd
triggerall = p2stateno != [2000,4699]
trigger1 = prevstateno != [4700,5200]
trigger1 = time = 0
var(17) = ifelse(GetHitVar(animtype)= 0,50,ifelse(GetHitVar(animtype) = 1,100,150))
ignorehitpause = 1
persistent = 0

[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || stateno = 3950
var(17) = -50

;回復タイミングフラッシュ
[State -2, 50]
type = PalFX
trigger1 = movetype = H && canrecover = 1 && Vel Y > 1 && var(19) = 0 && hitshakeover
trigger1 = statetype = A
time = 10
add = 45,76,114
sinadd = -90,-152,-228,50

[State 5000, FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && p1name != "12"
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && p1name = "12"
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000+var(7),5010+var(7)) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = ifelse(p1name = "12",5030+var(7),5030)

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = ifelse(p1name = "12",5047 + GetHitVar(animtype)+var(7),5047 + GetHitVar(animtype)) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = selfState
trigger1 = HitShakeOver
value = 5030



[State -2,47]
type = RemoveExplod
trigger1 = numexplod(210) = 1
ID = 210

[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0


[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || stateno = 3950
var(17) = -50

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

;回復タイミングフラッシュ
[State -2, 50]
type = PalFX
trigger1 = movetype = H && canrecover = 1 && Vel Y > 1 && var(19) = 0 && var(18) = 0 && hitshakeover
trigger1 = statetype = A
time = 10
add = 45,76,114
sinadd = -90,-152,-228,50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = ifelse(var(18) = 0,Const(movement.yaccel),1.5)

[State 5100, 1]
type = VarSet
trigger1 = Time = 0 && var(18) = 1
var(18) = 2

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = null;ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
;triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

[State 5030, 3]
type = ChangeState
triggerall = var(19) = 1
trigger1 = HitOver
value = 5300

[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || stateno = 3950
var(17) = -50

;回復タイミングフラッシュ
[State -2, 50]
type = PalFX
trigger1 = movetype = H && canrecover = 1 && Vel Y > 1 && var(19) = 0 && var(18) = 0 && hitshakeover
trigger1 = statetype = A
time = 10
add = 45,76,114
sinadd = -90,-152,-228,50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && p1name != "12"
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && p1name = "12"
trigger1 = SelfAnimExist(5035+var(7))
trigger1 = Anim != [5051+var(7),5059+var(7)] ;Not if in hit up anim
trigger1 = Anim != 5090+var(7) ;Not if hit off ground anim
value = 5035+var(7)

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = ifelse(var(18) = 0,Const(movement.yaccel),1.5)

[State 5035, 3]
type = null;ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
;triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL


[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

triggerall = Time = 0 && (prevstateno = [4800,5300])

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || stateno = 3950
var(17) = -50

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = ifelse(var(18) = 0,Const(movement.yaccel),1.5)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650
;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[State -3, 2.4];add for air attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5050
trigger1 = anim = 5050
trigger2 = stateno = 5020
trigger2 = anim = 5030
trigger3 = stateno = 5070
trigger3 = anim = 5070 
var(17) = ifelse(var(44) >1,40/var(44),40)
ignorehitpause = 1
persistent = 0


[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || stateno = 3950
var(17) = -50

;回復タイミングフラッシュ
[State -2, 50]
type = PalFX
trigger1 = movetype = H && canrecover = 1 && Vel Y > 1 && var(19) = 0 && var(18) = 0 && hitshakeover
trigger1 = statetype = A
time = 10
add = 45,76,114
sinadd = -90,-152,-228,50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
triggerall = p1name != "12"
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
triggerall = p1name = "12"
trigger1 = AnimTime = 0
trigger1 = Anim = 5035+var(7)
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035+var(7)
trigger2 = (Anim != [5051+var(7), 5059+var(7)]) && (Anim != [5061+var(7), 5069+var(7)])
trigger2 = Anim != 5090+var(7) ;Not if hit off ground anim
value = 5050+var(7)

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10) && p1name != "12"
value = anim+10
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050+var(7),5059+var(7)]
trigger1 = Vel Y >= ifelse(anim = 5050+var(7), 1, -2)
trigger1 = SelfAnimExist(anim+10) && p1name = "12"
value = anim+10
persistent = 0


[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = var(18) = 0
y = Const(movement.yaccel)

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = var(18) != 0
y = Const(movement.yaccel)*2

;[State 5050, 4] ;Recover near ground
;type = ChangeState
;triggerall = Vel Y > 0
;triggerall = Pos Y >= -20
;triggerall = alive
;triggerall = CanRecover
;trigger1 = Command = "recovery"
;value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > 1
triggerall = Pos Y <= -5
triggerall = alive
triggerall = CanRecover
triggerall = var(19) = 0 && var(18) = 0
trigger1 = Command = "recovery" || Command = "x" || Command = "y" || Command = "z"
trigger2 = var(30) = 1 && random < 125
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > 1
triggerall = Pos Y <= -20
triggerall = alive
triggerall = CanRecover
triggerall = var(19) = 0 && var(18) = 0
triggerall = hitshakeover
trigger1 = Command = "recovery" || Command = "x" || Command = "y" || Command = "z"
trigger2 = var(30) = 1 && random < 125
value = 5210 ;HITFALL_AIRRECOVER

[state 5050,snd]
type = playsnd
trigger1 = time = 1 && vel y < -4
trigger1 = random < 250
trigger1 = alive
persistent = 0
value = ifelse(p1name = "12",5000+var(7),5000),10
channel = 0

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State -3, 2.4];add for air attacks
type = lifeadd
triggerall = Time = 0 && (prevstateno = [4800,5300])
trigger1 = command = "holdup" || command = "holdfwd" || command = "holddown" || command = "holdback"
value = -gethitvar(damage)/2
ignorehitpause = 1
persistent = 0

[state 1,forceRCflag]
type = varadd
trigger1 = time = 0
fvar(11) = 1

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfState
trigger1 = fvar(11) > 80
value = 5020 ;HITG_SLIDE

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[State -2,47]
type = RemoveExplod
trigger1 = numexplod(210) = 1
ID = 210

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 150

[State -3, 2.4];add for air attacks
type = Varadd
triggerall = Time = 1
triggerall = UniqHitCount <= 1
triggerall = GetHitVar(hitcount) <= 30
triggerall = p2stateno != [2000,4999]
trigger1 = stateno = 5050
trigger1 = anim = 5050
trigger2 = stateno = 5020
trigger2 = anim = 5030
trigger3 = stateno = 5070
trigger3 = anim = 5070 
var(17) = ifelse(var(44) >1,20/var(44),10)
ignorehitpause = 1
persistent = 0


[state 1,forceRCflag]
type = varadd
trigger1 = p2stateno = 3850 || p2stateno = 3950
var(17) = -50

[State 5030, 3]
type = ChangeState
triggerall = var(19) = 1
trigger1 = HitOver
value = 5300

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = ifelse(p1name = "12",5070+var(7),5070)

[state 5050,snd]
type = playsnd
trigger1 = 1
persistent = 0
value = ifelse(p1name = "12",5000+var(7),5000),7
channel = 0

[State 5070, 2]
type = selfState
trigger1 = HitShakeOver
value = 5071

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5100, 1]
type = VarSet
trigger1 = Time = 0 && var(18) = 1
var(18) = 2

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[State 5030, 3]
type = ChangeState
triggerall = var(19) = 1
trigger1 = HitOver
value = 5300

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = ifelse(var(18) = 0,Const(movement.yaccel),1.5)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[state 1,forceRCflag]
type = nothitby
trigger1 = win = 1
trigger2 = fvar(11) > 80
value = SCA

[state 1,forceRCflag]
type = varadd
trigger1 = time = 0
fvar(11) = 1

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfState
trigger1 = fvar(11) > 80
value = 5020 ;HITG_SLIDE

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 200

[State 5030, 3]
type = ChangeState
triggerall = var(19) = 1
trigger1 = HitOver
value = 5300

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0 && p1name != "12"
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0 && p1name = "12"
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080+var(7), 5090+var(7))

[State 5080, 2]
type = VarAdd
trigger1 = time = 0 && p1name != "12"
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 2]
type = VarAdd
trigger1 = time = 0 && p1name = "12"
trigger1 = (anim = [5081+var(7),5089+var(7)]) || (anim = [5111+var(7),5119+var(7)])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0 && p1name != "12"
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0 && p1name = "12"
trigger1 = sysvar(2) = 5090+var(7)
trigger1 = !SelfAnimExist(5090+var(7))
sysvar(2) = 5030+var(7)

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)


[State 5001, 6]
type = ChangeState
trigger1 = prevstateno = [7600,7650]
value = 7650
;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5030, 3]
type = ChangeState
triggerall = var(19) = 1
trigger1 = HitOver
value = 5300

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N



[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 200

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 210

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = time = [1,15]
triggerall = alive
triggerall = p2stateno != [2000,4000]
triggerall = var(19) = 0 && var(18) = 0
trigger1 = Command = "hold_a" || Command = "hold_b" || Command = "hold_c"
trigger1 = Command != "hold_x" && Command != "hold_y" && Command != "hold_z"
trigger2 = Command = "recovery" && command = "holdback"
trigger3 = var(30) = 1
trigger3 = random = [200,400]
value = 5230 

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = time = [1,15]
triggerall = alive
triggerall = p2stateno != [2000,4000]
triggerall = var(19) = 0 && var(18) = 0
trigger1 = Command = "hold_x" || Command = "hold_y" || Command = "hold_z"
trigger1 = Command != "hold_a" && Command != "hold_b" && Command != "hold_c"
trigger2 = Command = "recovery"
trigger3 = var(30) = 1
trigger3 = random = [450,700]
value = 5220

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, 1]
type = VarSet
trigger1 = Time = 16 && var(18) = 0
var(18) = 1

[State 5100, 1]
type = nothitby
trigger1 = var(18) = 2
trigger2 = fvar(11) > 80
value = SCA
time = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
trigger1 = (anim != [5051+var(7),5059+var(7)]) && (anim != [5061+var(7),5069+var(7)])
trigger2 = !SelfAnimExist(5100 + (anim % 10) +var(7))
value = 5100+var(7)


[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0 && p1name != "12"
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0 && p1name = "12"
trigger1 = (anim = [5051+var(7),5059+var(7)]) || (anim = [5061+var(7),5069+var(7)])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10) + var(7)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) < 3) + (sysvar(1) >= 5) + (sysvar(1) > 7) + (sysvar(1) > 11) + (sysvar(1) > 16)

[State 191, 4]
type = EnvShake
trigger1 = time = 1 && (sysvar(1) > 11)
persistent = 0
time = 10
ampl = -2
freq = 100
phase = 10
ignorehitpause = 1

[State 191, 4]
type = EnvShake
trigger1 = time = 1 && (sysvar(1) > 16)
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101



;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 200

[State 5100, 1]
type = nothitby
trigger1 = var(18) = 2
trigger2 = fvar(11) > 80
value = SCA
time = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
trigger1 = anim != [5101+var(7),5109+var(7)]
trigger2 = !SelfAnimExist(5160 + (anim % 10) +var(7))
value = 5160+var(7)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
trigger1 = anim = [5101+var(7),5109+var(7)]
trigger1 = SelfAnimExist(5160 + (anim % 10) +var(7))
value = 5160 + (anim % 10) +var(7)

[State 5101, 3]
type = velset;HitFallVel
trigger1 = Time = 0 && sysvar(1) < 3
y = -2

[State 5101, 3]
type = velset;HitFallVel
trigger1 = Time = 0 && sysvar(1) >= 5
y = -3

[State 5101, 3]
type = velset;HitFallVel
trigger1 = Time = 0 && sysvar(1) >= 7
y = -4


[State 5101, 3]
type = velset;HitFallVel
trigger1 = Time = 0 && sysvar(1) >= 9
y = -5

[State 5101, 3]
type = velset;HitFallVel
trigger1 = Time = 0 && sysvar(1) >= 11
y = -6


[State 5101, 3]
type = velset;HitFallVel
trigger1 = Time = 0 && sysvar(1) >= 13
y = -7


[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .65

[State 5100, 1]
type = VarSet
trigger1 = Time = 0 && var(18) = 0
var(18) = 1

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = A;L
movetype= H
physics = N

[State 5100, 1]
type = VarSet
trigger1 = Time = 0 && var(18) = 0
var(18) = 1

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5100, 1]
type = nothitby
trigger1 = var(18) = 2
trigger2 = fvar(11) > 80
value = SCA
time = 1

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 210

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = p1name != "12"
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = p1name = "12"
trigger1 = SelfAnimExist(5110 + (anim % 10)+var(7))
trigger1 = anim = [5081+var(7),5089+var(7)]
value = 5110 + (anim % 10)+var(7)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
triggerall = anim != [5110+var(7),5119+var(7)] ;Not already changed anim
trigger1 = anim != [5161+var(7),5169+var(7)]
trigger2 = !SelfAnimExist(5170 + (anim % 10) +var(7))
value = 5170+var(7)

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
triggerall = anim != [5110+var(7),5119+var(7)] ;Not already changed anim
trigger1 = anim = [5161+var(7),5169+var(7)]
trigger1 = SelfAnimExist(5170 + (anim % 10) +var(7))
value = 5170 + (anim % 10)+var(7)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) < 3) + (sysvar(1) >= 5) + (sysvar(1) > 7) + (sysvar(1) > 11) + (sysvar(1) > 16)

[State 191, 4]
type = EnvShake
trigger1 = time = 1 && (sysvar(1) > 11)
persistent = 0
time = 10
ampl = -2
freq = 100
phase = 10
ignorehitpause = 1

[State 191, 4]
type = EnvShake
trigger1 = time = 1 && (sysvar(1) > 16)
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = p1name != "12"
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = p1name = "12"
triggerall = anim = [5171+var(7),5179+var(7)]
triggerall = SelfAnimExist(5110 + (anim % 10)+var(7))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)+var(7)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = p1name != "12"
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = p1name = "12"
triggerall = Anim != [5111+var(7),5119+var(7)]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110+var(7)

[State 5110, 11] ;If just died
type = selfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = (Anim = [5110,5119]) && p1name != "12"
trigger4 = (Anim = [5110+var(7),5119+var(7)]) && p1name = "12"
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 5120, 3]
type = NotHitBy
triggerall = time >= 0
trigger1 = var(19) = 1
trigger2 = prevstateno = 5071
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = S
movetype= I
physics = N

; まだやれる！
[State -2, 7]
type = PlaySnd
trigger1 = random < 500
trigger1 = time = 1
trigger1 = var(19) = 0
value = 5120,0
channel = 0

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 0

[State 45, 3]
type = VarSet
trigger1 = Time < 19
var(47) = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120+ (anim % 10)

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
trigger1 = anim != [5111+var(7),5119+var(7)]
trigger2 = !SelfAnimExist(5120 + (anim % 10)+var(7))
value = 5120+ (anim % 10)+var(7)

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
trigger1 = anim = [5111+var(7),5119+var(7)]
trigger1 = SelfAnimExist(5120 + (anim % 10)+var(7))
value = 5120 + (anim % 10)+var(7)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5120, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 5120, 3]
type = NotHitBy
triggerall = time >= 0
trigger1 = p2stateno != 3999
value = SCA
time = 2

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = null;NotHitBy
triggerall = AnimTime = 0
trigger1 = p2stateno != 3999
value = , NT,ST,HT
time = 4

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
triggerall = AnimTime = 0
trigger1 = p2stateno != 3999
value2 = SCA
time = 2


[State 5120, 7]
type = selfState
trigger1 = AnimTime = 0
trigger1 = var(19) = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

[State 5120, 7]
type = turn
trigger1 = AnimTime = 0 && p2dist x < 0

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(19) = 1 && fvar(11) <= 80
value = 5304

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = S
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0 && p1name != "12"
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0 && p1name = "12"
triggerall = SelfAnimExist(5140+var(7))
trigger1 = (anim != [5111+var(7),5119+var(7)]) && (anim != [5171+var(7),5179+var(7)])
trigger2 = !SelfAnimExist(5140 + (anim % 10)+var(7))
value = 5140+var(7)


[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0 && p1name != "12"
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0 && p1name = "12"
trigger1 = (anim = [5111+var(7),5119+var(7)]) || (anim = [5171+var(7),5179+var(7)])
trigger1 = SelfAnimExist(5140 + (anim % 10)+var(7))
value = 5140 + (anim % 10)+var(7)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
trigger1 = p1name != "12"
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
trigger1 = p1name = "12"
trigger1 = MatchOver = 1
trigger1 = Anim = [5140+var(7),5149+var(7)]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0 && p1name != "12"
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0 && p1name = "12"
trigger1 = Anim != [5140+var(7),5159+var(7)]
trigger1 = Anim != [5110+var(7),5119+var(7)]
value = 5110+var(7)

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel);GetHitVar(yaccel)

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value = 0

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -.15
y = -3.5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = HitBy
trigger1 = 1
value = A,NT,ST,HT
time = 2

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value = 0

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = ifelse(p1name = "12",5210+var(7),5210)
ctrl = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value = 0

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 500
pos = 0,-60
under = 1

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .55

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1


[State 5201, 4]
type = HitBy
trigger1 = 1
value = A,NT,ST,HT
time = 2

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .55

[state 5210,1]
type = playsnd
trigger1 = 1
value = ifelse(p1name = "12",5200+var(7),5200),0
channel = 0
persistent = 0

[state 5210,1]
type = playsnd
trigger1 = time = 2
value = ifelse(p1name = "12",5200+var(7),5200),0
channel = 2
persistent = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 1,forceRCflag]
type = varset
trigger1 = 1
var(47) = 0

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2105

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2104

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2103

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2102

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2101

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2100

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2099

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2098

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2097

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2096

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2095

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2094

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2093

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2092

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 2091


[State 5900, 1] ;Clear all int variables
type = VarSet
trigger1 = 1
var(19) = 0


[State 5900, 1] ;Clear all int variables
type = VarSet
trigger1 = 1
var(44) = 1

[State -2,52]
type = Varset
trigger1 = facing = 1
var(15) = 1

[State -2,52]
type = Varset
trigger1 = facing = -1
var(15) = 2

[State 5900, 1] ;Clear all int variables
type = VarSet
trigger1 = 1
var(18) = 0

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

[state 5900,1]
type = varset
trigger1 = time = 0
v = 39
value = 0

[state 5900,1]
type = varset
trigger1 = time = 0
v = 16
value = 0

[state 5900,1]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State -2,52]
type = Varset
trigger1 = roundno = 1
var(15) = ifelse(facing = -1,2,1)

;立ちブロッキング
[Statedef 7700]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",20+var(7),20)
facep2 = 1



[State 11690, 3]
type = HitOverRide
trigger1 = (Var(26) = [1,7]) 
trigger2 = (Var(26) = [8,15]) && var(27) = 1
trigger3 = (Var(28) = [1,7]) 
trigger4 = (Var(28) = [8,15]) && var(29) = 1
slot = 1
attr = SCA, NP,SP,HP
stateno = 7752
time = 1

[State 1600, 2]
type = ReversalDef
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1
attr = ,NT
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,ifelse(p2statetype = A,16,14)
sparkno = 165
sparkxy = 15,ifelse(p2statetype = A,30,40)
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7750,7751)
hitsound = F6, 3
channel = 3

[State 1600, 2]
type = ReversalDef
trigger1 = (Var(28) = [1,7])
trigger2 = (Var(28) = [8,15]) && var(29) = 1
attr = ,NT
reversal.attr = C, NA, SA, HA, SP, HP, NP
pausetime = 0,ifelse(p2statetype = A,16,14)
sparkno = 165
sparkxy = 15,ifelse(p2statetype = A,30,40)
sprpriority = 2
p1stateno = 7753
hitsound = F6, 3
channel = 3

[State 1600, 4]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 1600, 5]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 1600, 6]
type = ChangeAnim
triggerall = Time = 0
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = ifelse(p1name = "12" && var(11) != 0,22,ifelse(p1name = "12",20+var(7),20))

[State 1600, 7]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = ifelse(p1name = "12" && var(11) != 0,23,ifelse(p1name = "12",21+var(7),21))

[State 1600, 8]
type = ChangeAnim
trigger1 = vel x = 0
persistent = 0
value = ifelse(p1name = "12" && var(11) != 0,1,ifelse(p1name = "12",0+var(7),0))

[state -2,varrangeset]
type = null;VarRangeSet
trigger1 = prevstateno = 7710; || command = "holdback"
ignorehitpause = 1
first = 28
last = 29
value =0



[state -2,varrangeset]
type = Varadd
trigger1 = time = 0
ignorehitpause = 1
var(25) = ifelse(prevstateno = 7710,1,0)

[state -2,varrangeset]
type = Varset
trigger1 = time = 0 && (prevstateno != 7710 || prevstateno != 12)
ignorehitpause = 1
var(25) = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = command = "holdfwd" && command = "holddown"
trigger2 = var(25) > 1
trigger3 = command = "holdback"
ignorehitpause = 1
first = 26
last = 29
value =16

[State 1600, 8]
type = ChangeState 
trigger1 = command = "holdfwd" && command = "holddown"
trigger1 = time > 1
value = 10
ctrl = 1

[State 1600, 8]
type = ChangeState 
trigger1 = command = "holdfwd" 
trigger1 = (Var(26) >= 8 && var(27) = 0) || (Var(26) >= 16  && var(27) != 0)
trigger2 = command = "holdback"
trigger3 = var(26) = 0 && var(28) = 0
value = 20
ctrl = 1

[State 1600, 8]
type = ChangeState 
trigger1 = command = "holdback" 
value = 20
ctrl = 1

[State 1600, 9]
type = ChangeState 
triggerall = command != "holdfwd" && command != "holdback"
trigger1 = Var(26) >= 8 && var(27) = 0
trigger2 = Var(26) >= 16  && var(27) != 0
trigger3 = var(26) = 0 && var(28) = 0
trigger4 = Var(28) >= 8 && var(29) = 0
trigger5 = Var(28) >= 16  && var(29) != 0
value = 0
ctrl = 1

[State 1600, ダッシュ] 
type = ChangeState 
triggerall = command = "FF" && prevstateno != 7750 && (prevstateno != [7751,7754])
triggerall = time > 0
trigger1 = p1name = "ryu_3rd" || p1name = "ken_3rd" || p1name = "hugo" || p1name = "zangief" || p1name = "slayer" || p1name = "johnny" || p1name = "aba"
trigger2 = p1name = "ingrid" || p1name = "gouki" || p1name = "12" || p1name = "geese" || p1name = "krauser" || p1name = "chunli" || p1name = "makoto" 
trigger3 = p1name = "alex" || p1name = "ibuki" || p1name = "Q" 
value = ifelse(p1name = "12" && (var(7) = [20000,30000]),101,103)
ctrl = ifelse((p1name = "ingrid" || p1name = "slayer" || p1name = "aba" || p1name = "12" && (var(7) = [20000,30000])),1,0)

[State 1600, 10] 
type = ChangeState 
trigger1 = command = "FF" && prevstateno != 7750 && (prevstateno != [7751,7754])
trigger1 = time > 0
trigger1 = p1name = "karin" || p1name= "Marco" || p1name = "nash" || p1name = "hayato"
value = 101
ctrl = 1

[State 1600, 10] 
type = ChangeState 
triggerall = command = "FF" && prevstateno != 7750 && (prevstateno != [7751,7754])
triggerall = time > 0
trigger1 = p1name = "felicia" 
value = 109
ctrl = ifelse((p1name = "falicia"),0,1)

[State 1600, 10] 
type = ChangeState 
trigger1 = command = "FF" && prevstateno != 7750 && (prevstateno != [7751,7754])
trigger1 = time > 0
trigger1 = p1name != "karin" || p1name != "Marco" || p1name != "nash" || p1name != "aba" || p1name != "gouki"|| p1name != "12" 
trigger1 = p1name != "ryu_3rd" || p1name != "ken_3rd" || p1name != "hugo" || p1name != "zangief" || p1name != "slayer" || p1name != "johnny" 
trigger1 = p1name != "ingrid" || p1name != "geese" || p1name != "felicia" || p1name != "krauser" || p1name != "hayato"|| p1name != "chunli" || p1name != "makoto" 
trigger1 = p1name != "ibuki" || p1name != "alex"
value = ifelse(p1name = "leilei",104,ifelse(p1name = "ino" && var(8) = 0,108,100))
ctrl = 1

[State 1600, 11]
type = ChangeState 
trigger1 = (Var(28) = [1,7]);
trigger2 = (Var(28) = [8,15]) && var(29) = 1
triggerall = prevstateno != 7710
triggerall = time > 7
value = 7710
ctrl = 1

[state 1,1]
type = statetypeset
trigger1 = command = "holddown"
statetype = C

[state 1,1]
type = statetypeset
trigger1 = command != "holddown" && command != "holdup" 
statetype = S

[State 1600, 13]
type = ChangeState 
trigger1 = command = "holdup" && movecontact = 0
value = 40

[state 1,1]
type = velset
trigger1 = (prevstateno = [5200,5240]) && time = 0
x = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = var(47) != 0 && time = 0 && ctrl
triggerall = win = 0
value = var(47)
ctrl = 0

;しゃがみブロッキング
[Statedef 7710]
type = S　
movetype= I
physics = N
juggle = 0
ctrl = 0
facep2 = 1

[state 1,1]
type = statetypeset
trigger1 = time > 5 || vel x < 0
physics = S

[State 11690, 3]
type = HitOverRide
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
slot = 1
attr = SCA, NP,SP,HP
stateno = 7754
time = 1

[State 1600, 2]
type = ReversalDef
trigger1 = (Var(28) = [1,7])
trigger2 = (Var(28) = [8,15]) && var(29) = 1
attr = ,NT
reversal.attr = C, NA, SA, HA, SP, HP, NP
pausetime = 0,ifelse(p2statetype = A,17,16)
sparkno = 165
sparkxy = 15,ifelse(p2statetype = A,30,40)
sprpriority = 2
p1stateno = 7753
hitsound = F6, 3
channel = 3

[State 1600, 6]
type = ChangeAnim
trigger1 = anim != 10 && time = 0
trigger2 = p1name = "12" && anim != 13 && time = 0
trigger3 = p1name = "12" && anim = 10+var(7) && time = 0
value = ifelse(p1name = "12" && var(11) != 0,13,ifelse(p1name = "12",10+var(7),10))

[State 1600, 6]
type = ChangeAnim
trigger1 = animTime = 0 && anim = 10
trigger2 = p1name = "12" && anim = 13 && animtime = 0
trigger3 = p1name = "12" && anim = 10+var(7) && animtime = 0
value = ifelse(p1name = "12" && var(11) != 0,14,ifelse(p1name = "12",11+var(7),11))

[State 1600, 8]
type = ChangeState 
;trigger1 = command = "holdfwd"
trigger1 = (Var(28) >= 8 && var(29) = 0) || (Var(28) >= 16  && var(29) != 0)
trigger2 = command = "holdback"
trigger3 = var(26) = 0 && var(28) = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

[state -2,varrangeset]
type = null;VarRangeSet
trigger1 = prevstateno = 7700 || command = "holdback"
ignorehitpause = 1
first = 26
last = 27
value =0

[state -2,varrangeset]
type = Varadd
trigger1 = time = 0
ignorehitpause = 1
var(25) = ifelse(prevstateno = 7700,1,0)

[state -2,varrangeset]
type = Varset
trigger1 = time = 0 && (prevstateno != 7700 || prevstateno != 12)
ignorehitpause = 1
var(25) = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = command = "holdfwd" && command = "holddown"
trigger2 = var(25) > 1
trigger3 = command = "holdback"
ignorehitpause = 1
first = 26
last = 29
value =16


[State 1600, 8]
type = ChangeState 
trigger1 = command = "holdfwd" && command = "holddown"
trigger1 = time > 1
value = 11
ctrl = 1

[State 1600, 11]
type = ChangeState 
trigger1 = command != "holddown"
triggerall = time > 2
value = 7700


[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7]);
trigger2 = (Var(26) = [8,15]) && var(27) = 1
triggerall = time > 7
value = 7700
ctrl = 1

[state -2,varrangeset]
type = null;VarRangeSet
trigger1 = command = "holdup"
ignorehitpause = 1
first = 26
last = 29
value = 0

[state 1,1]
type = statetypeset
trigger1 = command = "holddown"
statetype = C

[state 1,1]
type = statetypeset
trigger1 = command != "holddown" && command != "holdup" 
statetype = S

[State 1600, 13]
type = ChangeState 
trigger1 = command = "holdup" && movecontact = 0
value = 40



[state 1,1]
type = velset
trigger1 = (prevstateno = [5200,5240]) 
trigger2 = vel x < 0
triggerall = (prevstateno != [100,109]) 
triggerall = time = 0
x = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = var(47) != 0 && time = 0 && ctrl
triggerall = win = 0
value = var(47)
ctrl = 0

;立ちブロッキング赤
[Statedef 7720]
type = S　
movetype= H
physics = S
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",760+var(7),760)
facep2 = 1


[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3

[state 1,1]
type = varset
trigger1 = vel x != 0
fvar(2) = 1

[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300


[state 1,ガード硬直数値]
type = varadd
trigger1 = fvar(4) > 0
fvar(4) = -1.0

[state 1,1]
type = null;posfreeze
trigger1 = 1

[state 1,1]
type = varset
trigger1 = time = 0
fvar(3) = 1


[State 11690, 3]
type = HitOverRide
trigger1 = Time =[0,2]
;slot = 0
sttrl = SCA,NP,SP,HP
stateno = 7752
time = 1

[State 1600, 2]
type = ReversalDef
trigger1 = time > 0
trigger1 = p2statetype = A
attr = ,NT
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,20
sparkno = 165
sparkxy = 15,30
sprpriority = 2
p1stateno = 7750
hitsound = F6, 3
channel = 3

[State 1600, 3]
type = ReversalDef
trigger1 = time > 0
trigger1 = p2statetype != A
attr = ,NT
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,17
sparkno = 165
sparkxy = 15,40
sprpriority = 2
p1stateno = 7751
hitsound = F6, 3
channel = 3

[State 1610, 3]
type = null;ChangeState 
trigger1 = Time = 3
trigger1 = prevstateno = 150 || prevstateno = 152 || prevstateno = 160
value = 160;ifelse(prevstateno = 150,150,ifelse(prevstateno = 152,152,160))

[State 1610, 3]
type = ChangeState 
trigger1 = Time = 3
;trigger1 = prevstateno = 151 || prevstateno = 153 || prevstateno = 161
value = 161;ifelse(prevstateno = 151,151,ifelse(prevstateno = 153,153,161))

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

;----------------------------------------------------------------------
; しゃがみブロッキング赤
[Statedef 7725] 
type = c
movetype= H
physics = S
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",762+var(7),762)
facep2 = 1


[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3



[state 1,1]
type = varset
trigger1 = vel x != 0
fvar(2) = 1

[state 1,ガード硬直数値]
type = varadd
trigger1 = fvar(4) > 0
fvar(4) = -1.0

[state 1,forceRCflag]
type = varset
trigger1 = var(17) < -300
var(17) = -300

[state 1,1]
type = null;posfreeze
trigger1 = 1

[state 1,1]
type = varset
trigger1 = time = 0
fvar(3) = 1

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[State 11690, 3]
type = HitOverRide
trigger1 = Time =[0,2]
;slot = 0
sttrl = SCA,NP,SP,HP
stateno = 7754
time = 1

[State 1610, 2]
type = ReversalDef
trigger1 = time > 0
attr = ,NT
reversal.attr = C, NA, SA, HA, SP, HP, NP
pausetime = 0,17
sparkno = 165
sparkxy = 16,-24
sprpriority = 2
p1stateno = 7753
hitsound = F6, 3
channel = 3

[State 1610, 3]
type = null;ChangeState 
trigger1 = Time = 3
trigger1 = prevstateno = 150 || prevstateno = 152 || prevstateno = 160
value = ifelse(prevstateno = 150,150,ifelse(prevstateno = 152,152,160))

[State 1610, 3]
type = ChangeState 
trigger1 = Time = 3
;trigger1 = prevstateno = 151 || prevstateno = 153 || prevstateno = 161
value = 161;ifelse(prevstateno = 151,151,ifelse(prevstateno = 153,153,161))






;ブロッキング成功2
[Statedef 7750] 
type = S 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7901+var(7),7901)
velset = 0,0 
poweradd = 150
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[State 1601, 1]
type = varadd
trigger1 = Time = 0 && prevstateno = [760,769]
var(41) = 300

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0



[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = ,na,sa,ha,sp,np,hp
time = 16

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = null;Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
ownpal = 1

[State 1651, 7]
type = PalFX
triggerall = Time = 0
trigger1 = (prevstateno != [7720,7725]) && (prevstateno != [150,161])
trigger2 = prevstateno != 5000 && prevstateno != 761 && prevstateno != 763
time = 15
add = 80,80,255



[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 14
value = 7760




[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1



;ブロッキング成功2
[Statedef 7751] 
type = S 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7951+var(7),7951)
velset = 0,0 
poweradd = 150
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0



[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = ,na,sa,ha,sp,np,hp
time = 16

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = null;Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
ownpal = 1

[State 1651, 7]
type = PalFX
triggerall = Time = 0 
trigger1 = (prevstateno != [7720,7725]) && (prevstateno != [150,161])
trigger2 = prevstateno != 5000 && prevstateno != 761 && prevstateno != 763
time = 15
add = 80,80,255



[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 14
value = 7760

[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1


[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1



;しゃがみブロッキング成功2
[Statedef 7753] 
type = C 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7911+var(7),7911)
velset = 0,0 
poweradd = 150
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0

[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 14 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0


[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = SCA
time = 16

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = null;Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
ownpal = 1

[State 1651, 7]
type = PalFX
triggerall = Time = 0 
trigger1 = (prevstateno != [7720,7725]) && (prevstateno != [150,161])
trigger2 = prevstateno != 5000 && prevstateno != 761 && prevstateno != 763
time = 15
add = 80,80,255



[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 14
value = 7760




[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1




;ブロッキング成功2 飛び道具受けた場合
[Statedef 7752] 
type = S 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7901+var(7),7901)
velset = 0,0 
poweradd = 100
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0



[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = SCA
time = 9

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3
;channel = 3

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
ownpal = 0

[State 1651, 7]
type = PalFX
triggerall = Time = 0 
trigger1 = (prevstateno != [7720,7725]) && (prevstateno != [150,161])
trigger2 = prevstateno != 5000 && prevstateno != 761 && prevstateno != 763
time = 15
add = 80,80,255



[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 14 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1


[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 6
value = 7760




[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)



[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1

;ブロッキング成功2 飛び道具受けた場合
[Statedef 7754] 
type = C
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7911+var(7),7911)
velset = 0,0 
poweradd = 100
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3
;channel = 3

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = SCA
time = 9

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
ownpal = 1

[State 1651, 7]
type = PalFX
triggerall = Time = 0 
trigger1 = (prevstateno != [7720,7725]) && (prevstateno != [150,161])
trigger2 = prevstateno != 5000 && prevstateno != 761 && prevstateno != 763
time = 15
add = 80,80,255





[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1

[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 6
value = 7760




[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1

;赤ブロッキング------------------------------------------------------

;ブロッキング成功2
[Statedef 7755] 
type = S 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7901+var(7),7901)
velset = 0,0 
poweradd = 150
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3
;channel = 3

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0



[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 14 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = ,na,sa,ha,sp,np,hp
time = 16

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
pausemovetime = 17
supermove = 1
ownpal = 1

[state 1,1]
type = pause
trigger1 = time = 0
time = 15
movetime = 15

[State 1651, 7]
type = PalFX
trigger1 = Time = 0
time = 15
add = 255,80,80

[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 14
value = 7760




[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1



;ブロッキング成功2
[Statedef 7756] 
type = S 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7951+var(7),7951)
velset = 0,0 
poweradd = 150
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3
;channel = 3

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0



[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = ,na,sa,ha,sp,np,hp
time = 16

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
pausemovetime = 17
supermove = 1
ownpal = 1

[state 1,1]
type = pause
trigger1 = time = 0
time = 15
movetime = 15

[State 1651, 7]
type = PalFX
trigger1 = Time = 0 
time = 15
add = 255,80,80

[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 14
value = 7760

[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1


[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1



;しゃがみブロッキング成功2
[Statedef 7757] 
type = C 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7911+var(7),7911)
velset = 0,0 
poweradd = 150
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0

[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0


[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = SCA
time = 16

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
pausemovetime = 17
supermove = 1
ownpal = 1

[state 1,1]
type = pause
trigger1 = time = 0
time = 15
movetime = 15

[State 1651, 7]
type = PalFX
trigger1 = Time = 0
time = 15
add = 255,80,80

[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 14
value = 7760

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3
;channel = 3


[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1




;ブロッキング成功2 飛び道具受けた場合
[Statedef 7758] 
type = S 
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7901+var(7),7901)
velset = 0,0 
poweradd = 100
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0



[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = SCA
time = 9

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3
;channel = 3

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
pausemovetime = 17
ownpal = 0

[state 1,1]
type = pause
trigger1 = time = 0
time = 15
movetime = 15


[State 1651, 7]
type = PalFX
trigger1 = Time = 0
time = 15
add = 255,80,80



[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1


[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 6
value = 7760




[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)



[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1

;ブロッキング成功2 飛び道具受けた場合
[Statedef 7759] 
type = C
movetype= I 
physics = N 
anim = ifelse(p1name = "12",7911+var(7),7911)
velset = 0,0 
poweradd = 100
sprpriority = 6
ctrl = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = 7900, 0
channel = 0

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3
;channel = 3

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[State 1651, 2]
type = CtrlSet
trigger1 = Time = 0
value = 0

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0

[State 1600, 1]
type = NotHitBy 
trigger1 = time = 0
value = SCA
time = 9

[State 1651, 4] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
pausemovetime = 17
ownpal = 1

[state 1,1]
type = pause
trigger1 = time = 0
time = 15
movetime = 15

[State 1651, 7]
type = PalFX
trigger1 = Time = 0 
time = 15
add = 255,80,80

[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command = "holdback"
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time > 1 && command = "x" && command = "a"  && command != "holdback"
var(1) = 2

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && var(1) != 0
value = ifelse(var(1) = 1,805,800) 
ctrl = 1

[State 1600, 11]
type = ChangeState 
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1 
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
triggerall = time > 6
value = 7760




[State 1600, 11]
type = ChangeState 
Trigger1 = Time = [5,13]
trigger1 = command = "x" && command = "y" 
value = ifelse(command = "holddown",762,760)

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command != "holddown"
value = 0 
ctrl = 1

[State 1601, 7]
type = ChangeState 
Trigger1 = Time = 15 && command = "holddown"
value = 10
ctrl = 1











;ブロッキング ブロッキング後用
[Statedef 7760]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0
facep2 = 1

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = var(47) != 0
triggerall = win = 0
value = var(47)
ctrl = 0

[state 1,1]
type = changeanim
trigger1 = time = 0 && p1name = "12"
value = ifelse(command = "holddown",762+var(7),760+var(7))

[state 1,1]
type = changeanim
trigger1 = time = 0 && p1name != "12"
value = ifelse(command = "holddown",762,760)

[State 11690, 3]
type = HitOverRide
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1
trigger3 = (Var(28) = [1,7])
trigger4 = (Var(28) = [8,15]) && var(29) = 1
slot = 1
attr = SCA, NP, SP, HP
stateno = ifelse(anim = 760,7752,7754)
time = 1

[State 1600, 2]
type = ReversalDef
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1
attr = ,NT
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,ifelse(p2statetype = A,18,17)
sparkno = 165
sparkxy = 15,ifelse(p2statetype = A,30,40)
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7750,7751)
hitsound = F6, 3
channel = 3

[State 1600, 2]
type = ReversalDef
trigger1 = (Var(28) = [1,7])
trigger2 = (Var(28) = [8,15]) && var(29) = 1
attr = ,NT
reversal.attr = C, NA, SA, HA, SP, HP, NP
pausetime = 0,ifelse(p2statetype = A,18,17)
sparkno = 165
sparkxy = 15,ifelse(p2statetype = A,30,40)
sprpriority = 2
p1stateno = 7753
hitsound = F6, 3
channel = 3

[State 1600, 9]
type = ChangeState 
trigger1 = time = 2
value = 0
ctrl = 1

[state 1,1]
type = statetypeset
trigger1 = command = "holddown"
statetype = C

[state 1,1]
type = statetypeset
trigger1 = command != "holddown"
statetype = S

[State 1600, 13]
type = ChangeState 
trigger1 = command = "holdup" && ctrl = 1
value = 40



[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = velset
trigger1 = time = 0
x = 0

[state 1,1]
type = velset
trigger1 = time = 0
y = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0


;ジャンプ動作
[Statedef 7769]
type    = A
physics = A
ctrl = 0


[State 50, 2] 
type = ReversalDef
trigger1 = (Var(26) = [1,7]);
trigger2 = (Var(26) = [8,10]) && var(27) = 1;
triggerall = (prevstateno != [781,785])
reversal.attr = SCA,SA, NA, SA, HA, SP, HP, NP
pausetime     = 0,17
numhits       = 0
;sparkno       = 165
;sparkxy       = 16,-24
;hitsound      = 6, 3
sprpriority   = -1
p1stateno     = 7770



[State 50, 4]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 1,1]
type = poweradd
trigger1 = vel x > 0
value = 2

[State 50, 6]
type = ChangeAnim
trigger1 = Time = 0 && sysvar(3) = 0 && p1name = "12" && var(11) != 0
value = 31
persistent = 0

[State 50, 6]
type = ChangeAnim
trigger1 = Time = 0 && sysvar(3) = 0 && (anim != [41,46])
trigger1 = p1name !="12"
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))
persistent = 0

[State 50, 6]
type = ChangeAnim
triggerall = Time = 0 && sysvar(3) = 0 && (anim != [41+var(7),46+var(7)])
trigger1 = p1name ="12"
value = ifelse((vel x)=0, 41+var(7), ifelse((vel x)>0, 42+var(7), 43+var(7)))
persistent = 0

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && (anim != [44,46])
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0
trigger1 = p1name != "12"
persistent = 0
value = Anim + 3

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && (anim != [44+var(7),46+var(7)])
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0
trigger1 = p1name = "12"
persistent = 0
value = Anim + 3 


[State 50, 7]
type = ChangeAnim
trigger1 = p1name != "12"
trigger1 = Vel y > -2 && (anim != [44,46])
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 1 
persistent = 0
value = Anim + 3+ifelse((vel x)=0, 0, ifelse((vel x)>0, 1,2))

[State 50, 7]
type = ChangeAnim
trigger1 = p1name = "12"
trigger1 = Vel y > -2 && (anim != [44+var(7),46+var(7)])
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 1 
persistent = 0
value = Anim + 3+ifelse((vel x)=0, 0, ifelse((vel x)>0, 1,2))

[State 11690, 3]
type = HitOverRide
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,10]) && var(27) = 1
triggerall = (prevstateno != [781,785])
slot = 0
attr = SCA, NP, SP, HP
stateno = 7770
time = 1

[State 11690, 3]
type = null;varrangeset
trigger1 = (Var(26) >= 8 && var(27) = 0)
trigger2 = Var(26) >= 11 && var(27) = 1
first = 26
last = 29
value = 19

[State 11690, 3]
type = changestate
;trigger1 = (Var(26) >= 8 && var(27) = 0)
trigger1 = Var(26) >= 20; && var(27) >= 1
value = ifelse((prevstateno = [71,72]),72,50)
ctrl = 1


;空中成功 
[Statedef 7770]
type     = A
movetype = I
physics  = N
anim     = ifelse(p1name = "12",7970+var(7),7970)
poweradd = 100
sprpriority = 6

[State 960,PosFreeze]
type = PosFreeze
trigger1 = 1

[state 7900,1]
type = nothitby
trigger1 = time = 0
value = SCA
time = 9

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7900, 0
channel = 0

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[state 7900,1]
type = varadd
trigger1 = Time = 0 && prevstateno = [760,769]
var(41) = 300

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0 && prevstateno != [760,769]
value = f6, 3
;channel = 3

[State 1651, 5]
type = Explod
trigger1 = Time = 0
anim = F165
sprpriority = 8
ignorehitpause = 1
postype = p1
pos = 12,-50
bindtime =  -1
removetime = 17
supermove = 1
ownpal = 0

[State 1691, 3]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 1691, 4]
type = CtrlSet
trigger1 = Time = 17
value = 1

[State 1691, 5] 
type = PlayerPush 
trigger1 = Time >= 0 
value = 0

[State 1691, 6] 
type = PalFX
trigger1 = Time = 0
time = 15
add = 80,80,255

[state -2,varrangeset]
type = VarRangeSet
trigger1 = time = 0
ignorehitpause = 1
first = 26
last = 29
value =0

[state 7900,1]
type = varset
trigger1 = time = 0
var(1) = 0

[state 7900,1]
type = varadd
trigger1 = time > 0
var(1) = 1

[state 7900,1]
type = varset
trigger1 = time = 0
var(0) = 0

[state 7900,1]
type = varset
trigger1 = 1
var(0) = var(47)

[State 1600, 11]
type = ChangeState 
Trigger1 = Time = 15
value = 50
ctrl = 1

[State 1600, 11]
type = ChangeState 
Triggerall = Time > 5
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1
value = 7780
ctrl = 0

[State 1600, 11]
type = ChangeState 
Trigger1 = Time > 5
trigger1 = command = "x" && command = "y"
value = 764





;空中ブロッキング成功後
[Statedef 7780]
type     = A
;movetype = I
physics  = N

[State 1600, 4]
type = Veladd
trigger1 = time = 0
trigger1 = vel y > 0
y = -8

[state 7900,1]
type = varset
trigger1 = time < 3
var(47) = var(0)

[state 1G]
type = gravity
trigger1 = 1

[State 50, 6]
type = ctrlset
trigger1 = time > 15-var(1)
value = 1

[State 50, 6]
type = changestate
trigger1 = time > 15-var(1)
trigger1 = pos y >= 0 && vel y > 0
value = 52
ctrl = 1

[State 50, 6]
type = ChangeAnim
trigger1 = time > 15-var(1) && sysvar(3) = 0 && p1name != "12"
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))
persistent = 0

[State 50, 6]
type = ChangeAnim
trigger1 = time > 15-var(1) && sysvar(3) = 0 && p1name = "12"
value = ifelse((vel x)=0, 41+var(7), ifelse((vel x)>0, 42+var(7), 43+var(7)))
persistent = 0

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && p1name != "12"
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0 
persistent = 0
value = Anim + 3

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && p1name = "12"
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0 
persistent = 0
value = Anim + 3

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 1 
persistent = 0
value = Anim + 3+ifelse((vel x)=0, 0, ifelse((vel x)>0, 1,2))

[state 1,1]
type = posfreeze
trigger1 = time <= 15-var(1)


[State 1692,2] 
type = ReversalDef
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1
reversal.attr = SCA,SA, NA, SA, HA, SP, HP, NP
pausetime     = 0,17
numhits       = 0
sparkno       = -1
sparkxy       = 16,-24
;hitsound      = F6, 3
sprpriority   = -1
p1stateno     = 7770

[State 11690, 3]
type = HitOverRide
trigger1 = (Var(26) = [1,7])
trigger2 = (Var(26) = [8,15]) && var(27) = 1
slot = 1
attr = SCA, NP, SP, HP
stateno = 7770
time = 1


; Dizzy Mode(shaking)
[Statedef 5300]
type    = U
movetype= H
physics = N

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(19) = 1

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(17) = 0

[State 5300, 2]
type = ChangeState
trigger1 = HitShakeOver && statetype = A
value = 5301

[State 5300, 2]
type = ChangeState
trigger1 = HitShakeOver && statetype != A
value = 5000

[State 5300, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;-----------------------------
; Dizzy Mode(fall through air)
[Statedef 5301]
type    = A
movetype= H
physics = N
anim = ifelse(p1name = "12",5050+var(1),5050)

[State 5301, 1]
type = Velset
trigger1 = Time = 0
y = -8

[State 5301, 1];reduce speed if vel x is too large
type = Veladd
trigger1 = vel x < -5
x = .5

[State 5301, 2]
type = Gravity
trigger1 = 1

[State 5301, 3] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
value = 5302

;---------------------
; Dizzy Mode(lie down)
[Statedef 5302]
type    = L
movetype= H
physics = N

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(17) = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(19) = 0

[State 5302, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = p1name != "12"
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5302, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5302, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5302, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = p1name = "12"
trigger1 = SelfAnimExist(5110 + (anim % 10)+var(7))
trigger1 = anim = [5081+var(7),5089+var(7)]
value = 5110 + (anim % 10)+var(7)

[State 5302, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
triggerall = anim != [5110+var(7),5119+var(7)] ;Not already changed anim
trigger1 = anim != [5161+var(7),5169+var(7)]
trigger2 = !SelfAnimExist(5170 + (anim % 10)+var(7))
value = 5170+var(7)

[State 5302, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
triggerall = anim != [5110+var(7),5119+var(7)] ;Not already changed anim
trigger1 = anim = [5161+var(7),5169+var(7)]
trigger1 = SelfAnimExist(5170 + (anim % 10)+var(7))
value = 5170 + (anim % 10)+var(7)


[State 5302, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5302, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5302, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5302, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5302, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5302, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5302, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = p1name != "12"
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5302, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = p1name != "12"
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5302, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = p1name = "12"
triggerall = anim = [5171+var(7),5179+var(7)]
triggerall = SelfAnimExist(5110 + (anim % 10)+var(7))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)+var(7)

[State 5302, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = p1name = "12"
triggerall = Anim != [5111+var(7),5119+var(7)]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110+var(7)

[State 5302, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = (Anim = [5110,5119]) && p1name != "12"
trigger4 = (Anim = [5110+var(7),5119+var(7)]) && p1name = "12"
value = 5150

[State 5302, 11] ;If alive
type = ChangeState
trigger1 = alive
trigger1 = Time = 40
value = 5303

[State 5302, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5302, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5302, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5302, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 5302, 16]
type = Nothitby
trigger1 = 1
value = SCA

;------------------
; Dizzy Mode(getup)
[Statedef 5303]
type    = L
movetype= I
physics = N

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(17) = 0

[State 5303, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5303, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0 && p1name != "12"
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5303, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
trigger1 = anim != [5111+var(7),5119+var(7)]
trigger2 = !SelfAnimExist(5120 + (anim % 10)+var(7))
value = 5120+var(7)

[State 5303, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0 && p1name = "12"
trigger1 = anim = [5111+var(7),5119+var(7)]
trigger1 = SelfAnimExist(5120 + (anim % 10)+var(7))
value = 5120 + (anim % 10)+var(7)

[State 5303, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5303, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5303, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5303, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = SCA, NT,ST,HT
time = 12

[State 5303, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5303, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 5304
ctrl = 0

; Dizzy Mode
[Statedef 5304]
type    = S
physics = S
anim = ifelse(p1name = "12",5300+var(7),5300)
ctrl = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(17) = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(18) = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(19) = 0

[State 5300, 1]
type = Varadd
trigger1 = time = 0
var(44) = ifelse(var(44) < 10,1,0)

[state 5304,1]
type = posset
trigger1 = time = 0
y = 0

[state 5304,1]
type = velset
trigger1 = time = 0
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfState
trigger1 = fvar(11) > 80
value = 5020 ;HITG_SLIDE

; レバー
[State -2,41]
type = null;Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 24
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State -2,47]
type = RemoveExplod
trigger1 = time = 120
ID = 210

[State 5304, 1];back to normal
type = selfState
trigger1 = Time > 120;-var(1)
trigger2 = fvar(11) > 80
value = ifelse(command = "holddown",11,0)
ctrl = 1

[State 5304, 2]
type = Varset
trigger1 = Time = 0
var(1) = 0

[State 3150, init]
type = Varadd
triggerall = time >= 0
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
trigger7 = command = "up"
trigger8 = command = "down"
trigger9 = command = "left"
trigger10 = command = "right"
v = 1
value = 1

[State 5304, 4]
type = Playsnd
trigger1 = Time = 0
value = 5300,0
channel = 0

; Dizzy Mode
[Statedef 5305]
type    = S
physics = S
anim = ifelse(p1name = "12",5300+var(7),5300)
ctrl = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(17) = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(18) = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(19) = 0

[state 5304,1]
type = posset
trigger1 = time = 0
y = 0

[state 5304,1]
type = velset
trigger1 = time = 0
y = 0


[State 5304, 1];back to normal
type = selfState
trigger1 = Time = 500
value = 0
ctrl = 1

[State 5304, 2]
type = Varset
trigger1 = Time = 0
var(1) = 0



[State 5304, 4]
type = Playsnd
trigger1 = Time = 0
value = 5300,0
channel = 0


; りんごやられ
[Statedef 5320]
type    = U
movetype= H
physics = N
anim = 5320
velset = 0,0
sprpriority = 2

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(1) = 0

[State 5304, 4]
type = Playsnd
trigger1 = Time = 0
value = 5320,0
channel = 0

; はてな
[State -2,41]
type = Explod
trigger1 = time = 0 && numexplod(5230) = 0
anim = F ifelse(facing = 1,512,510)
ID = 5230
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 35
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1


; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "angel" || p1name = "k9999"
anim = F521
ID = 5321
pos = ifelse(p1name = "angel",60,30),ifelse(p1name = "angel",-98,-91)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "Hibiki Takane" || p1name = "hiryu"
anim = F521
ID = 5321
pos = ifelse(p1name = "Hibiki Takane",-17,48),ifelse(p1name = "Hibiki Takane",-83,-95)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
;facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "iori" || p1name = "kyo"
anim = F521
ID = 5321
pos = ifelse(p1name = "iori",38,14),ifelse(p1name = "iori",-92,-94)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "juli" || p1name = "juni"
anim = F521
ID = 5321
pos = ifelse(p1name = "juli",47,58),ifelse(p1name = "juli",-60,-76)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "k-1" || p1name = "k-2"
anim = F521
ID = 5321
pos = ifelse(p1name = "k-1",-24,-18),ifelse(p1name = "k-1",-72,-76)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "karin" || p1name = "marco"
anim = F521
ID = 5321
pos = ifelse(p1name = "karin",48,27),ifelse(p1name = "karin",-72,-79)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "k'" || p1name = "maxima"
anim = F521
ID = 5321
pos = ifelse(p1name = "k'",-18,32),ifelse(p1name = "k'",-76,-73)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "k-zwei" || p1name = "kula"
anim = F521
ID = 5321
pos = ifelse(p1name = "k-zwei",-24,21),ifelse(p1name = "k-zwei",-72,-87)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "nash" || p1name = "kurenai"
anim = F521
ID = 5321
pos = ifelse(p1name = "nash",78,20),ifelse(p1name = "nash",-68,-79)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "rock" || p1name = "terry"
anim = F521
ID = 5321
pos = ifelse(p1name = "rock",27,11),ifelse(p1name = "rock",-49,-95)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ryu_e" || p1name = "Rugal Bernstein"
anim = F521
ID = 5321
pos = ifelse(p1name = "ryu_e",40,11),ifelse(p1name = "ryu_e",-50,-92)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ryu" || p1name = "ken"
anim = F521
ID = 5321
pos = ifelse(p1name = "ryu",36,48),ifelse(p1name = "ryu",-81,-99)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "kaede" || p1name = "saisyu"
anim = F521
ID = 5321
pos = ifelse(p1name = "kaede",50,11),ifelse(p1name = "kaede",-78,-61)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "kyo_old" || p1name = "shingo"
anim = F521
ID = 5321
pos = ifelse(p1name = "kyo_old",43,33),ifelse(p1name = "kyo_old",-95,-85)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "setsuna" || p1name = "Yashiro Nanakase" 
anim = F521
ID = 5321
pos = ifelse(p1name = "setsuna",54,33),ifelse(p1name = "setsuna",-97,-56)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "shiki" || p1name = "tabasa" 
anim = F521
ID = 5321
pos = ifelse(p1name = "shiki",43,33),ifelse(p1name = "shiki",-82,-90)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "whip" || p1name = "vanessa" 
anim = F521
ID = 5321
pos = ifelse(p1name = "whip",34,17),ifelse(p1name = "whip",-84,-88)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "bulleta" || p1name = "shizumaru" 
anim = F521
ID = 5321
pos = ifelse(p1name = "bulleta",35,44),ifelse(p1name = "bulleta",-67,-60)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "hugo" || p1name = "zangief"
anim = F521
ID = 5321
pos = ifelse(p1name = "hugo",52,75),ifelse(p1name = "hugo",-76,-49)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ash" || p1name = "leilei"
anim = F521
ID = 5321
pos = ifelse(p1name = "ash",19,18),ifelse(p1name = "ash",-71,-38)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "millia" || p1name = "sol"
anim = F521
ID = 5321
pos = ifelse(p1name = "millia",40,25),ifelse(p1name = "sol",-76,-67)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "jam" || p1name = "slayer"
anim = F521
ID = 5321
pos = ifelse(p1name = "jam",47,33),ifelse(p1name = "jam",-62,-86)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "baiken" || p1name = "mina"
anim = F521
ID = 5321
pos = ifelse(p1name = "baiken",54,37),ifelse(p1name = "jam",-93,-50)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "dizzy" || p1name = "ino"
anim = F521
ID = 5321
pos = ifelse(p1name = "dizzy",54,58),ifelse(p1name = "dizzy",-93,-93)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ryu_3rd" || p1name = "ken_3rd"
anim = F521
ID = 5321
pos = ifelse(p1name = "ryu_3rd",43,60),ifelse(p1name = "ryu_3rd",-77,-87)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "aba" || p1name = "12"
anim = F521
ID = 5321
pos = ifelse(p1name = "aba",3,58),ifelse(p1name = "aba",-66,-50)
postype = p1
sprpriority = -3
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
trigger1 = numexplod(5321) = 0
anim = F521
ID = 5321
pos = 20,-70
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1


[State 5300, 2]
type = ChangeState
trigger1 = time = 35
value = 5322

; りんごやられ
[Statedef 5321]
type    = U
movetype= H
physics = S
velset = 0,0
anim = 5320
sprpriority = 2

[State 5304, 4]
type = Playsnd
trigger1 = Time = 0
value = 5320,0
channel = 0

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(1) = 0

; はてな
[State -2,41]
type = Explod
trigger1 = time = 0 && numexplod(5230) = 0
anim = F ifelse(facing = 1,512,510)
ID = 5230
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 35
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "angel" || p1name = "k9999"
anim = F521
ID = 5321
pos = ifelse(p1name = "angel",60,30),ifelse(p1name = "angel",-98,-91)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1


; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "Hibiki Takane" || p1name = "hiryu"
anim = F521
ID = 5321
pos = ifelse(p1name = "Hibiki Takane",-17,48),ifelse(p1name = "Hibiki Takane",-83,-95)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
;facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "iori" || p1name = "kyo"
anim = F521
ID = 5321
pos = ifelse(p1name = "iori",38,14),ifelse(p1name = "iori",-92,-94)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "juli" || p1name = "juni"
anim = F521
ID = 5321
pos = ifelse(p1name = "juli",47,58),ifelse(p1name = "juli",-60,-76)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "k-1" || p1name = "k-2"
anim = F521
ID = 5321
pos = ifelse(p1name = "k-1",-24,-18),ifelse(p1name = "k-1",-72,-76)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "karin" || p1name = "marco"
anim = F521
ID = 5321
pos = ifelse(p1name = "karin",48,27),ifelse(p1name = "karin",-72,-79)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "k'" || p1name = "maxima"
anim = F521
ID = 5321
pos = ifelse(p1name = "k'",-18,32),ifelse(p1name = "k'",-76,-73)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "k-zwei" || p1name = "kula"
anim = F521
ID = 5321
pos = ifelse(p1name = "k-zwei",-24,21),ifelse(p1name = "k-zwei",-72,-87)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "nash" || p1name = "kurenai"
anim = F521
ID = 5321
pos = ifelse(p1name = "nash",78,20),ifelse(p1name = "nash",-68,-79)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "rock" || p1name = "terry"
anim = F521
ID = 5321
pos = ifelse(p1name = "rock",27,11),ifelse(p1name = "rock",-49,-95)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ryu_e" || p1name = "Rugal Bernstein"
anim = F521
ID = 5321
pos = ifelse(p1name = "ryu_e",40,11),ifelse(p1name = "ryu_e",-50,-92)
postype = p1
sprpriority = 4
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ryu" || p1name = "ken"
anim = F521
ID = 5321
pos = ifelse(p1name = "ryu",36,48),ifelse(p1name = "ryu",-81,-99)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "kaede" || p1name = "saisyu"
anim = F521
ID = 5321
pos = ifelse(p1name = "kaede",50,11),ifelse(p1name = "kaede",-78,-61)
postype = p1
sprpriority = 4
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "kyo_old" || p1name = "shingo"
anim = F521
ID = 5321
pos = ifelse(p1name = "kyo_old",43,33),ifelse(p1name = "kyo_old",-95,-85)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "setsuna" || p1name = "Yashiro Nanakase" 
anim = F521
ID = 5321
pos = ifelse(p1name = "setsuna",54,33),ifelse(p1name = "setsuna",-97,-56)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "shiki" || p1name = "tabasa" 
anim = F521
ID = 5321
pos = ifelse(p1name = "shiki",43,33),ifelse(p1name = "shiki",-82,-90)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "whip" || p1name = "vanessa" 
anim = F521
ID = 5321
pos = ifelse(p1name = "whip",34,17),ifelse(p1name = "whip",-84,-88)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "bulleta" || p1name = "shizumaru" 
anim = F521
ID = 5321
pos = ifelse(p1name = "bulleta",35,44),ifelse(p1name = "bulleta",-67,-60)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "hugo" || p1name = "zangief"
anim = F521
ID = 5321
pos = ifelse(p1name = "hugo",52,75),ifelse(p1name = "hugo",-76,-49)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ash" || p1name = "leilei"
anim = F521
ID = 5321
pos = ifelse(p1name = "ash",19,18),ifelse(p1name = "ash",-71,-38)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "millia" || p1name = "sol"
anim = F521
ID = 5321
pos = ifelse(p1name = "millia",40,25),ifelse(p1name = "jam",-76,-67)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "jam" || p1name = "slayer"
anim = F521
ID = 5321
pos = ifelse(p1name = "jam",47,33),ifelse(p1name = "jam",-62,-86)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "baiken" || p1name = "mina"
anim = F521
ID = 5321
pos = ifelse(p1name = "baiken",54,37),ifelse(p1name = "jam",-93,-50)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "dizzy" || p1name = "ino"
anim = F521
ID = 5321
pos = ifelse(p1name = "dizzy",54,58),ifelse(p1name = "dizzy",-93,-93)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ryu_3rd" || p1name = "ken_3rd"
anim = F521
ID = 5321
pos = ifelse(p1name = "ryu_3rd",43,60),ifelse(p1name = "ryu_3rd",-77,-87)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "aba" || p1name = "12"
anim = F521
ID = 5321
pos = ifelse(p1name = "aba",3,58),ifelse(p1name = "aba",-66,-50)
postype = p1
sprpriority = -3
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
trigger1 = numexplod(5321) = 0
anim = F521
ID = 5321
pos = 20,-70
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

[State 5300, 2]
type = ChangeState
trigger1 = time = 35
value = 5324


; りんごやられ
[Statedef 5322]
type    = U
movetype= H
physics = N
velset = 0,0
anim = 5321
sprpriority = 3

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(1) = 0

[State -2,47]
type = RemoveExplod
trigger1 = time >= 20
ID = 5322

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 5321

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "angel"|| p1name = "k9999" 
anim = F520
ID = 5322
pos = ifelse(p1name = "angel",40,37),ifelse(p1name = "angel",-102,-82)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "Hibiki Takane" || p1name = "hiryu" 
anim = F520
ID = 5322
pos = ifelse(p1name = "Hibiki Takane",-17,39),ifelse(p1name = "Hibiki Takane",-83,-97)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
;facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "iori" || p1name = "kyo" 
anim = F520
ID = 5322
pos = ifelse(p1name = "iori",38,47),ifelse(p1name = "iori",-92,-86)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "juli" || p1name = "juni" 
anim = F520
ID = 5322
pos = ifelse(p1name = "juli",47,50),ifelse(p1name = "juli",-60,-55)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "k-1" || p1name = "k-2" 
anim = F520
ID = 5322
pos = ifelse(p1name = "k-1",20,20),ifelse(p1name = "k-1",-62,-101)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "karin"|| p1name = "marco" 
anim = F520
ID = 5322
pos = ifelse(p1name = "karin",50,29),ifelse(p1name = "marco",-73,-52)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "k'"|| p1name = "maxima" 
anim = F520
ID = 5322
pos = ifelse(p1name = "k'",30,42),ifelse(p1name = "K'",-87,-66)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "k-zwei"|| p1name = "kula" 
anim = F520
ID = 5322
pos = ifelse(p1name = "k-zwei",20,27),ifelse(p1name = "K-zwei",-101,-80)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "nash"|| p1name = "kurenai" 
anim = F520
ID = 5322
pos = ifelse(p1name = "nash",72,42),ifelse(p1name = "nash",-67,-41)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "rock"|| p1name = "terry" 
anim = F520
ID = 5322
pos = ifelse(p1name = "rock",30,46),ifelse(p1name = "rock",-70,-80)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "ryu_e"|| p1name = "Rugal Bernstein" 
anim = F520
ID = 5322
pos = ifelse(p1name = "ryu_e",23,10),ifelse(p1name = "ryu_e",-42,-104)
postype = p1
sprpriority = 4
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "ryu"|| p1name = "ken" 
anim = F520
ID = 5322
pos = ifelse(p1name = "ryu",29,52),ifelse(p1name = "ryu",-79,-100)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "kaede"|| p1name = "saisyu" 
anim = F520
ID = 5322
pos = ifelse(p1name = "kaede",67,2),ifelse(p1name = "kaede",-68,-75)
postype = p1
sprpriority = 4
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "kyo_old"|| p1name = "shingo" 
anim = F520
ID = 5322
pos = ifelse(p1name = "kyo_old",11,43),ifelse(p1name = "kyo_old",-64,-73)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "setsuna"|| p1name = "Yashiro Nanakase" 
anim = F520
ID = 5322
pos = ifelse(p1name = "setsuna",53,32),ifelse(p1name = "setsuna",-97,-94)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "shiki"|| p1name = "tabasa" 
anim = F520
ID = 5322
pos = ifelse(p1name = "shiki",42,33),ifelse(p1name = "shiki",-86,-90)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "whip"|| p1name = "vanessa" 
anim = F520
ID = 5322
pos = ifelse(p1name = "whip",35,14),ifelse(p1name = "whip",-78,-87)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "bulleta"|| p1name = "shizumaru" 
anim = F520
ID = 5322
pos = ifelse(p1name = "bulleta",35,37),ifelse(p1name = "bulleta",-67,-58)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "hugo"|| p1name = "zangief" 
anim = F520
ID = 5322
pos = ifelse(p1name = "hugo",63,36),ifelse(p1name = "hugo",-32,-42)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "ash" || p1name = "leilei"
anim = F520
ID = 5322
pos = ifelse(p1name = "ash",ifelse(p1name = "12",11+var(7),11),18),ifelse(p1name = "ash",-79,-38)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "millia" || p1name = "sol"
anim = F520
ID = 5322
pos = ifelse(p1name = "millia",40,25),ifelse(p1name = "sol",-76,-70)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "jam" || p1name = "slayer"
anim = F520
ID = 5322
pos = ifelse(p1name = "jam",19,26),ifelse(p1name = "jam",-77,-111)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "baiken" || p1name = "mina"
anim = F520
ID = 5322
pos = ifelse(p1name = "baiken",46,26),ifelse(p1name = "baiken",-110,-111)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "dizzy" || p1name = "ino"
anim = F520
ID = 5322
pos = ifelse(p1name = "dizzy",43,52),ifelse(p1name = "dizzy",-104,-90)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "ryu_3rd" || p1name = "ken_3rd"
anim = F520
ID = 5322
pos = ifelse(p1name = "ryu_3rd",65,60),ifelse(p1name = "ryu_3rd",-82,-87)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "aba" || p1name = "12"
anim = F520
ID = 5322
pos = ifelse(p1name = "aba",3,55),ifelse(p1name = "aba",-66,-78)
postype = p1
sprpriority = -3
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
trigger1 = numexplod(5322) = 0 && time = 1
anim = F520
ID = 5322
pos = 20,-70
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; !
[State -2,41]
type = Explod
trigger1 = time = 0
anim = F ifelse(facing = 1,513,511)
ID = 5320
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 20
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; !
[State -2,41]
type = Explod
trigger1 = time = 20
anim = F8
pos = 0,-40
postype = p1
sprpriority = 2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1
facing = 1

[State 5300, 2]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",5000+var(7),5000),2
channel = 0

[State 5300, 2]
type = varset
trigger1 = time = [0,5]
trigger1 = command = "x" || command = "y" || command = "z"
trigger1 = var(1) = 0
var(1) = 1

[State 5300, 2]
type = varset
trigger1 = time = [0,5]
trigger1 = command = "a" || command = "b" || command = "c"
var(1) = 2

[State 5300, 2]
type = lifeadd
trigger1 = time = 20 && var(1) = 2
value = -200

[State 5300, 2]
type = selfstate
trigger1 = time = 20 && var(1) = 1
value = 5230

[State 5300, 2]
type = selfstate
trigger1 = time > 20 && (p2stateno != [2400,2450])
value = 5000


; りんごやられ
[Statedef 5324]
type    = U
movetype= H
physics = N
anim = 5321
sprpriority = 3

[State 5300, 1]
type = Varset
trigger1 = time = 0
var(1) = 0

[State -2,47]
type = RemoveExplod
trigger1 = time >= 20
ID = 5322

[State -2,47]
type = RemoveExplod
trigger1 = time = 0
ID = 5321

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "angel"|| p1name = "k9999" 
anim = F520
ID = 5322
pos = ifelse(p1name = "angel",40,37),ifelse(p1name = "angel",-102,-82)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "Hibiki Takane" || p1name = "hiryu" 
anim = F520
ID = 5322
pos = ifelse(p1name = "Hibiki Takane",-17,39),ifelse(p1name = "Hibiki Takane",-83,-97)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
;facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "iori" || p1name = "kyo" 
anim = F520
ID = 5322
pos = ifelse(p1name = "iori",38,47),ifelse(p1name = "iori",-92,-86)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "juli" || p1name = "juni" 
anim = F520
ID = 5322
pos = ifelse(p1name = "juli",47,50),ifelse(p1name = "juli",-60,-55)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "k-1" || p1name = "k-2" 
anim = F520
ID = 5322
pos = ifelse(p1name = "k-1",20,20),ifelse(p1name = "k-1",-62,-101)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "karin"|| p1name = "marco" 
anim = F520
ID = 5322
pos = ifelse(p1name = "karin",50,29),ifelse(p1name = "marco",-73,-52)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "k'"|| p1name = "maxima" 
anim = F520
ID = 5322
pos = ifelse(p1name = "k'",30,42),ifelse(p1name = "K'",-87,-66)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "k-zwei"|| p1name = "kula" 
anim = F520
ID = 5322
pos = ifelse(p1name = "k-zwei",20,27),ifelse(p1name = "K-zwei",-101,-80)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "nash"|| p1name = "kurenai" 
anim = F520
ID = 5322
pos = ifelse(p1name = "nash",72,42),ifelse(p1name = "nash",-67,-41)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "rock"|| p1name = "terry" 
anim = F520
ID = 5322
pos = ifelse(p1name = "rock",30,46),ifelse(p1name = "rock",-70,-80)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "ryu_e"|| p1name = "Rugal Bernstein" 
anim = F520
ID = 5322
pos = ifelse(p1name = "ryu_e",23,10),ifelse(p1name = "ryu_e",-42,-104)
postype = p1
sprpriority = 4
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "ryu"|| p1name = "ken" 
anim = F520
ID = 5322
pos = ifelse(p1name = "ryu",29,52),ifelse(p1name = "ryu",-79,-100)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "kaede"|| p1name = "saisyu" 
anim = F520
ID = 5322
pos = ifelse(p1name = "kaede",67,2),ifelse(p1name = "kaede",-68,-75)
postype = p1
sprpriority = 4
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "kyo_old"|| p1name = "shingo" 
anim = F520
ID = 5322
pos = ifelse(p1name = "kyo_old",11,43),ifelse(p1name = "kyo_old",-64,-73)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "setsuna"|| p1name = "Yashiro Nanakase" 
anim = F520
ID = 5322
pos = ifelse(p1name = "setsuna",53,32),ifelse(p1name = "setsuna",-97,-94)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "shiki"|| p1name = "tabasa" 
anim = F520
ID = 5322
pos = ifelse(p1name = "shiki",42,33),ifelse(p1name = "shiki",-86,-90)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "whip"|| p1name = "vanessa" 
anim = F520
ID = 5322
pos = ifelse(p1name = "whip",35,14),ifelse(p1name = "whip",-78,-87)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1


; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "bulleta"|| p1name = "shizumaru" 
anim = F520
ID = 5322
pos = ifelse(p1name = "bulleta",35,37),ifelse(p1name = "bulleta",-67,-58)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
triggerall = numexplod(5322) = 0 && time = 0
trigger1 = p1name = "hugo"|| p1name = "zangief" 
anim = F520
ID = 5322
pos = ifelse(p1name = "hugo",63,36),ifelse(p1name = "hugo",-32,-42)
postype = p1
sprpriority = 2
removetime = 60
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "ash" || p1name = "leilei"
anim = F521
ID = 5321
pos = ifelse(p1name = "ash",ifelse(p1name = "12",11+var(7),11),18),ifelse(p1name = "ash",-79,-38)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "millia" || p1name = "sol"
anim = F521
ID = 5321
pos = ifelse(p1name = "millia",40,25),ifelse(p1name = "sol",-76,-70)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5321) = 0
trigger1 = p1name = "jam" || p1name = "slayer"
anim = F521
ID = 5321
pos = ifelse(p1name = "jam",19,26),ifelse(p1name = "jam",-77,-111)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "baiken" || p1name = "mina"
anim = F520
ID = 5322
pos = ifelse(p1name = "baiken",46,26),ifelse(p1name = "baiken",-110,-111)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "dizzy" || p1name = "ino"
anim = F520
ID = 5322
pos = ifelse(p1name = "dizzy",43,52),ifelse(p1name = "dizzy",-104,-90)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "ryu_3rd" || p1name = "ken_3rd"
anim = F520
ID = 5322
pos = ifelse(p1name = "ryu_3rd",65,60),ifelse(p1name = "ryu_3rd",-82,-87)
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,explod]
type = Explod
triggerall = numexplod(5322) = 0
trigger1 = p1name = "aba" || p1name = "12"
anim = F520
ID = 5322
pos = ifelse(p1name = "aba",3,55),ifelse(p1name = "aba",-66,-78)
postype = p1
sprpriority = -3
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; りんご
[State -2,41]
type = Explod
trigger1 = numexplod(5322) = 0 && time = 1
anim = F520
ID = 5322
pos = 20,-70
postype = p1
sprpriority = 2
removetime = 20
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1


; !
[State -2,41]
type = Explod
trigger1 = time = 0
anim = F ifelse(facing = 1,513,511)
ID = 5320
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 20
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0
facing = 1

; !
[State -2,41]
type = Explod
trigger1 = time = 20
anim = F8
pos = 0,-40
postype = p1
sprpriority = 2
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1
facing = 1

[State 5300, 2]
type = varset
trigger1 = time = [0,5]
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = var(1) = 0
var(1) = 1

[State 5300, 2]
type = varset
trigger1 = time = [0,5]
trigger1 = command = "x" || command = "y" || command = "z"
var(1) = 2

[State 5300, 2]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",5000+var(7),5000),3
channel = 0

[State 5300, 2]
type = lifeadd
trigger1 = time = 20 && var(1) = 2
value = -200

[State 5300, 2]
type = selfstate
trigger1 = time = 20 && var(1) = 1
value = 5230

[State 5300, 2]
type = selfstate
trigger1 = time > 20 && (p2stateno != [2400,2450])
value = 5000


; Guard Crush Mode
[Statedef 9100]
type    = U
physics = S
anim = ifelse(p1name = "12",9100+var(7),9100)
ctrl = 0

[State 9100, 1]
type = changestate
trigger1 = statetype = A
trigger1 = time = 0
value = 9110

[State 750, Voice]
channel = 0
type = PlaySnd
trigger1 = animelemtime(1) = 1
value = ifelse(p1name = "12",5000+var(7),5000),0

[State 750, Voice]
channel = 1
type = PlaySnd
trigger1 = animelemtime(1) = 3
value = ifelse(p1name = "12",5000+var(7),5000),0

[State 9100, 1]
type = playsnd
trigger1 = time = 0
value = f9100,0
volume = 128

[State 9100, 1]
type = playsnd
trigger1 = time = 0
value = f9100,1
volume = 255

[State 9100, 1]
type = Pause
trigger1 = Time = 0
time = 3
movetime = 3

[State -2, 2] 
type = PalFX
trigger1 = time = 0
time = 60
add = 252,32,32
sinadd = 252, 32, 32, 3

[State 9100, 3]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 9100, 4]
type = Envshake
trigger1 = time = 0
time = 8

[State 9100, 5]
type = Velset
trigger1 = time >= 3
trigger1 = time <= 10
x = -4

[State 9100, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

; Guard Crush Mode
[Statedef 9110]
type    = A
physics = N
movetype = H
anim = 5030
ctrl = 0
velset = -4,-13


[state 9110,1]
type = HitFallSet
trigger1 = time = 0
value = 1


[State 9100, 1]
type = playsnd
trigger1 = time = 0
value = f9100,0
volume = 128

[State 9100, 1]
type = Pause
trigger1 = Time = 0
time = 3
movetime = 3

[State 9100, 2]
type = Envcolor
trigger1 = Time = 0
value = 248,248,248
time = 3
under = 1

[State 9100, 3]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 9100, 4]
type = Envshake
trigger1 = time = 0
time = 8

[state 9110,1]
type = veladd
trigger1 = time > 0
y = .65

[State 9100, 6]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100





;アドバンシングガ−ド（地上）
[Statedef 790]
type = A
movetype = H
physics = S
ctrl = 0
anim = 150
PowerAdd = 0

[state 4410,1]
type = velset
trigger1 = time = [0,5]
x = 0
y = 0

[state 4410,1]
type = varadd
trigger1 = time = 0
v = 16
value = 5

[State 1000, 2]
type = Width
trigger1 = time = 1
player = 100,0

[State 1000, 2]
type = Width
trigger1 = time = 2
player = 0,0

[state 781,1]
type = nothitby
trigger1 = time >= 0
value = SCA

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = F6,1

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = 240,1
channel = 0


[State -2,42]
type = Explod
trigger1 = time = 2
persistent = 0
anim = F400
pos = 30,-65
postype = p1
facing = 1
sprpriority = 2
removetime = 14
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 1



[State 1041, 9]
type = ChangeState
trigger1 = time = 20
value = 0
ctrl = 1

;アドバンシングガ−ド（地上）
[Statedef 791]
type = A
movetype = A
physics = S
ctrl = 0
anim = 151
PowerAdd = 0

[state 4410,1]
type = velset
trigger1 = time = [0,5]
x = 0
y = 0

[state 4410,1]
type = varadd
trigger1 = time = 0
v = 16
value = 5

[State 1000, 2]
type = Width
trigger1 = time = 1
player = 100,0

[State 1000, 2]
type = Width
trigger1 = time = 2
player = 0,0


[state 781,1]
type = nothitby
trigger1 = time >= 0
value = SCA

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = F6,1

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = 240,1
channel = 0


[State -2,42]
type = Explod
trigger1 = time = 2
persistent = 0
anim = F400
pos = 30,-65
postype = p1
facing = 1
sprpriority = 2
removetime = 14
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 1



[State 1041, 9]
type = ChangeState
trigger1 = time = 20
value = 11
ctrl = 1



;アドバンシングガ−ド（空中）
[Statedef 792]
type = A
movetype = A
physics = A
ctrl = 0
anim = 152
PowerAdd = 0

[state 4410,1]
type = velset
trigger1 = time = [0,5]
x = 0
y = 0

[state 4410,1]
type = varadd
trigger1 = time = 0
v = 16
value = 5

[State 1000, 2]
type = Width
trigger1 = time = 1
player = 100,0

[State 1000, 2]
type = Width
trigger1 = time = 2
player = 0,0


[state 781,1]
type = nothitby
trigger1 = time >= 0
value = SCA

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = F6,1

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = 240,1
channel = 0


[State -2,42]
type = Explod
trigger1 = time = 2
persistent = 0
anim = F400
pos = 0,-65
postype = p1
facing = 1
sprpriority = 2
removetime = 14
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 1



[State 1041, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; ガードキャンセル
[Statedef 720]
type = S
movetype = A
physics = S
anim = 720
velset = 0
ctrl = 0
poweradd = -1000

[state 1,SA]
type = changeanim
triggerall = time = 0
trigger1 = var(11) > 0 && (prevstateno != [ifelse(p1name = "12",5000+var(7),5000),5030]) && p1name = "setsuna"
trigger2 = var(11) = 0 && p1name = "setsuna"
trigger3 = p1name != "setsuna"
value = 720

[State 195, poweradd];
type = varset
trigger1 = var(11) > 0 && p1name = "setsuna" 
var(13) = 720
persistent = 0

[state 710,1]
type = pause
trigger1 = time = 1
time = 5

[State -2,42]
type = Explod
trigger1 = time = 0
persistent = 0
anim = F720
pos = 0,0
postype = p1
facing = 1
sprpriority = -2
removetime = 24
bindtime = 1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 0

[State 280, 3]
type = PlaySnd
trigger1 = time = 0
value = f6,1

[State 1601, 6]
type = PalFX
trigger1 = time = 0
time = 20
add = 240,240,255
sinadd = -240, -240, -255, 50
ignorehitpause = 1
persistent = 0

[State 1300, 1]
type = nothitby
trigger1 = time = 0
value = SCA
time = 15

[State 280, 1]
type = PlaySnd
trigger1 = Time = 0
value = 780,0
channel = 0



[State 280, 3]
type = HitDef
trigger1 = AnimElem = 1
attr = SC, NA
damage = 50
getpower = 0,0
givepower = 0,100
guardflag = M
pausetime = 5,5
sparkxy = -10,-105
hitsound = 5,3
guardsound = 6,0
ground.hittime = 30
ground.velocity = -6,-4.75     
air.velocity = -6,-4.75
guard.velocity = -6
fall = 1
fall.recover = 0
kill = 0

[State 280, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1


;立ちガードインパクト
[Statedef 760]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",760+var(7),760)
facep2 = 1


[State 11690, 3]
type = HitOverRide
trigger1 = time = 0
slot = 1
attr = SCA, NP,SP,HP
stateno = 7752
time = 13

[State 1600, 3]
type = ReversalDef
trigger1 = animelemTime(2) < 0 && prevstateno != 767
attr = ,NT
reversal.attr = SA, NA, SA, HA
pausetime = 0,ifelse(p2statetype != A,0,17)
sparkno = 166
sparkxy = 15,40
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7750,765)
hitsound = F6,ifelse(random < 500,4,5)

[State 1600, 3]
type = ReversalDef
trigger1 = animelemTime(2) < 0 && prevstateno = 767
attr = ,NT
reversal.attr = SA, NA, SA, HA,NT,ST,HT
pausetime = 0,ifelse(p2statetype != A,0,17)
sparkno = 166
sparkxy = 15,40
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7750,765)
hitsound = F6,ifelse(random < 500,4,5)

[State 1600, 4]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 12
add = 0,255,170
sinadd = 0,-255,-170,50

[State 1600, 4]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",7900+var(7),7900),0
channel = 0



[State 1600, 13]
type = ChangeState 
trigger1 = animtime = 0
value = ifelse(command = "holddown" ,11,0)
ctrl = 1

; しゃがみガードインパクト
[Statedef 762] 
type = C
movetype= I
physics = S
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",762+var(7),762)
velset = 0,0
facep2 = 1

[State 1600, 4]
type = posset
trigger1 = time = 0
y = 0

[State 11690, 3]
type = HitOverRide
trigger1 = time = 0
slot = 1
attr = SCA, NP,SP,HP
stateno = 7754
time = 13

[State 1610, 2]
type = ReversalDef
trigger1 = animelemTime(2) < 0 && prevstateno != 767
attr = ,NT
reversal.attr = C, NA, SA, HA
pausetime = 0,ifelse(p2statetype != A,0,17)
sparkno = 166
sparkxy = 16,-24
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7753,765)
hitsound = F6,ifelse(random < 500,4,5)

[State 1610, 2]
type = ReversalDef
trigger1 = animelemTime(2) < 0 && prevstateno = 767
attr = ,NT
reversal.attr = C, NA, SA, HA,NT,ST,HT
pausetime = 0,ifelse(p2statetype != A,0,17)
sparkno = 166
sparkxy = 16,-24
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7753,765)
hitsound = F6,ifelse(random < 500,4,5)

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 12
add = 0,255,170
sinadd = 0,-255,-170,50

[state 1,1]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",7900+var(7),7900),0
channel = 0

[State 1600, 13]
type = ChangeState 
trigger1 = animtime = 0
value = ifelse(command = "holddown" ,11,0)
ctrl = 1

; 空中ガードインパクト
[Statedef 764] 
type = A
movetype= I
physics = N
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",764+var(7),764)
facep2 = 1

[state 1,1]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",7900+var(7),7900),0
channel = 0

[state 1,1]
type = gravity
trigger1 = 1

[State 11690, 3]
type = HitOverRide
trigger1 = 1
slot = 1
attr = SCA, NP,SP,HP
stateno = 7770
time = 1

[State 1610, 2]
type = ReversalDef
trigger1 = time = [0,10]
attr = A,NT
reversal.attr = SCA, NA, SA, HA
pausetime = 0,ifelse(p2statetype != A,0,17)
sparkno = 166
sparkxy = 16,-24
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7770,766)
hitsound = F6,ifelse(random < 500,4,5)

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 8
add = 0,255,170
sinadd = 0,-255,-170,50

[State 50, 6]
type = Changestate
trigger1 = animtime = 0
value = 763


[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && anim != 764 && p1name != "12"
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0 
persistent = 0
value = Anim + 3

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && anim != 764 && p1name = "12"
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0 
persistent = 0
value = Anim + 3

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && anim != 764
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 1 
persistent = 0
value = Anim + 3+ifelse((vel x)=0, 0, ifelse((vel x)>0, 1,2))

[State 1600, 13]
type = ChangeState 
trigger1 = NumHelper(16003) = 1
value = 7770;ifelse(p2statetype = A,7970,766)

[State 1600, 13]
type = ChangeState 
trigger1 = pos y >= 0 && vel y > 0
value = 107

; 空中ブロッキング
[Statedef 763] 
type = A
movetype= I
physics = N
juggle = 0
ctrl = 0
facep2 = 1


[state 1,1]
type = gravity
trigger1 = 1



[State 50, 6]
type = ChangeAnim
trigger1 = time = 0 && p1name != "12"
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 6]
type = ChangeAnim
trigger1 = time = 0 && p1name = "12"
value = ifelse((vel x)=0, 41+var(7), ifelse((vel x)>0, 42+var(7), 43+var(7)))

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && p1name != "12"
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0 
persistent = 0
value = Anim + 3

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 && p1name = "12"
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 0 
persistent = 0
value = Anim + 3 

[State 50, 7]
type = ChangeAnim
trigger1 = Vel y > -2 
trigger1 = SelfAnimExist(anim + 3) && sysvar(3) = 1 
persistent = 0
value = Anim + 3;+ifelse((vel x)=0, 0, ifelse((vel x)>0, 1,2))

[State 1600, 13]
type = ChangeState 
trigger1 = NumHelper(16003) = 1
value = 7770;ifelse(p2statetype = A,7970,766)

[State 1600, 13]
type = ChangeState 
trigger1 = pos y >= 0 && vel y > 0
value = 107


;ガードインパクト 立ち〜しゃがみ
[statedef 765]
type = S
movetype = I
physics = S
anim = ifelse(p1name = "12",7901+var(7),7901)
poweradd = 50
facep2 = 1

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[State 1600, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 2

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 12
add = 0,255,170
sinadd = 0,-255,-170,50

[State 960,PosFreeze]
type = Posadd
trigger1 = time = [0,10]
x = 1

[state 1,1]
type = varadd
trigger1 = time = 0
var(41) = 200

[state 1,1]
type = targetstate
trigger1 = time = 0
value = 767

[State 1600, 13]
type = selfState 
trigger1 = time = 25
value = ifelse(command = "holddown",11,0)
ctrl = 1

;ガードインパクト 空中
[statedef 766]
type = A
movetype = I
physics = N
anim = ifelse(p1name = "12",7970+var(7),7970)
poweradd = 0

[State 1600, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 960,PosFreeze]
type = PosFreeze
trigger1 = 1

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 12
add = 0,255,170
sinadd = 0,-255,-170,50

[state 1,1]
type = varadd
trigger1 = time = 0
var(41) = 200

[state 1,1]
type = targetstate
trigger1 = time = 0
value = 767

[State 1600, 13]
type = selfState 
trigger1 = time = 25
value = 50
ctrl = 1

;弾かれ
[statedef 767]
type = S
movetype = I
velset = -4,0
physics = S
anim = ifelse(p1name = "12",9100+var(7),9100)
poweradd = 0

[state 1,1]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",5000+var(7),5000),2
channel = 0

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[State 1600, 13]
type = selfState 
trigger1 = time > 25
trigger1 = command = "recovery" || command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
value = ifelse(command = "holddown",762,760)

[State 1600, 13]
type = selfState 
trigger1 = time > 25
trigger1 = command = "s" || command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
value = ifelse(command = "holddown",762,760)

[State 1600, 13]
type = selfState 
trigger1 = var(30) = 1 && (time = [26,47])
trigger1 = random < 240 && p2movetype = A
value = ifelse(random < 500, 762,760)


[State 1600, 13]
type = selfState 
trigger1 = time = 48
value = 5000

;立ちブロッキング赤
[Statedef 761]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",760+var(7),760)
facep2 = 1


[State 11690, 3]
type = HitOverRide
trigger1 = time = 0
slot = 1
attr = SCA, NP,SP,HP
stateno = 7758
time = 1

[State 1600, 3]
type = ReversalDef
trigger1 = animelemTime(1) = 0
attr = S,NT
reversal.attr = SA, NA, SA, HA
pausetime = 0,ifelse(p2statetype != A,0,17)
sparkno = 167
sparkxy = 15,40
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7750,769)
hitsound = F6,ifelse(random < 500,4,5)

[State 1600, 4]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 12
add = 255,0,0
sinadd = -255,0,0,50

[State 1600, 4]
type = posset
trigger1 = time = 0
y = 0

[state 1,1]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",7900+var(7),7900),0
channel = 0



[State 1600, 13]
type = ChangeState 
trigger1 = time = 2
value = 59


; しゃがみブロッキング
[Statedef 759] 
type = C
movetype= I
physics = S
juggle = 0
ctrl = 0
anim = ifelse(p1name = "12",762+var(7),762)
velset = 0,0
facep2 = 1

[State 1600, 4]
type = posset
trigger1 = time = 0
y = 0

[State 11690, 3]
type = HitOverRide
trigger1 = time = 0
slot = 1
attr = SCA, NP,SP,HP
stateno = 7759
time = 1

[State 1610, 2]
type = ReversalDef
trigger1 = animelemTime(1) = 0
attr = C,NT
reversal.attr = C, NA, SA, HA
pausetime = 0,ifelse(p2statetype != A,0,17)
sparkno = 167
sparkxy = 16,-24
sprpriority = 2
p1stateno = ifelse(p2statetype = A,7753,769)
hitsound = F6,ifelse(random < 500,4,5)

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 12
add = 255,0,0
sinadd = -255,0,0,50


[state 1,1]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",7900+var(7),7900),0
channel = 0


[State 1600, 13]
type = ChangeState 
trigger1 = time = 2
value = 59


;赤ガードインパクト
[statedef 769]
type = S
movetype = I
physics = S
anim = ifelse(p1name = "12",7901+var(7),7901)
poweradd = 50

[state 1,1]
type = varadd
trigger1 = time = 0
var(41) = 500

[state 7900,1]
type = varadd
trigger1 = time = [0,6]
trigger1 = var(16) > 0
v = 16
value = -1

[State 1600, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 1601, 6]
type = PalFX
trigger1 = Time = 0
time = 12
add = 255,0,0
sinadd = -255,0,0,50

[State 960,PosFreeze]
type = PosFreeze
trigger1 = 1

[state 1,1]
type = targetstate
trigger1 = time = 0
value = 767

[State 1600, 13]
type = selfState 
trigger1 = animtime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

;バ−サク（地上）
[statedef 770]
type = A
movetype = I
velset = 0,0
physics = S
anim = ifelse(AnimExist(770) = 0,781,770)
poweradd = 0
ctrl = 0



[state 1,1]
type = nothitby
trigger1 = time = 0
value = SCA
time = 2

[state 1,1]
type = nothitby
trigger1 = win = 1
value = SCA
time = 999

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 1,1]
type = superpause
trigger1 = time = 0
sound = f770,0
time = ifelse(win = 1,0,50)
movetime = 50
anim = -1

[State -2,42]
type = Explod
trigger1 = time = 0
id = 3800
persistent = 0
anim = F103
pos = 0,-55
postype = p1
facing = 1
sprpriority = 2
removetime = 58
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 1

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[state 4410,1]
type = velset
trigger1 = time = 0
y = 0

[state 4410,1]
type = posset
trigger1 = time = 0
y = 0


[state 4410,1]
type = varset
trigger1 = time = 0
v = 39
value = 900

[state 4410,1]
type = varset
trigger1 = time = 0
v = 38
value = 1

[State 500, 1]
type = AfterImage
trigger1 = time = 1
time = 1500
FrameGap = 5
length = 15
PalBright   =  0,0,0
PalContrast = 100,100,150
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = add
ignorehitpause = 1


[State 750, Voice]
channel = 0
type = PlaySnd
trigger1 = animelemtime(1) = 1
value = 770,0

[State 750, Voice]
channel = 1
type = PlaySnd
trigger1 = animelemtime(1) = 3
value = 770,0

[State -2,42]
type = Explod
trigger1 = numexplod(770) = 0
anim = F795
ID = 770
pos = 0,-20
postype = p1
facing = 1
sprpriority = 2
removetime = 1500
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 0


[State 1041, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

;バ−サク（空中）
[Statedef 775]
type = A
movetype = I
physics = A
ctrl = 0
anim = ifelse(AnimExist(782) = 0,44,782) 
PowerAdd = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[state 4410,1]
type = velset
trigger1 = time = 0
x = -2
y = -5

[state 1,1]
type = superpause
trigger1 = time = 0
sound = f770,0
time = ifelse(win = 1,0,50)
movetime = 1
anim = -1

[state 1,1]
type = nothitby
trigger1 = time = 0
value = SCA
time = 1

[state 4410,1]
type = varset
trigger1 = time = 0
v = 39
value = 900

[state 4410,1]
type = varset
trigger1 = time = 0
v = 38
value = 1

[State 750, Voice]
channel = 0
type = PlaySnd
trigger1 = animelemtime(1) = 0
value = 770,0

[State -2,42]
type = Explod
trigger1 = time = 0
id = 3800
persistent = 0
anim = F103
pos = 0,-55
postype = p1
facing = 1
sprpriority = 2
removetime = 58
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 1

[State -2,42]
type = Explod
trigger1 = time = 0
persistent = 0
ID = 770
anim = F795
pos = 0,-20
postype = p1
facing = 1
sprpriority = 2
removetime = 1500
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 500, 1]
type = AfterImage
trigger1 = time = 0
time = 1500
FrameGap = 5
length = 15
PalBright   =  0,0,0
PalContrast = 100,100,150
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1
ignorehitpause = 1

[State 1041, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0

;スペシャルアタック（地上）
[statedef 781]
type = S
movetype = A
valset = 0,0
physics = S
poweradd = 0
ctrl = 0

[state 1,1]
type = changeanim
trigger1 = time = 0 && p1name != "12"
value = ifelse(AnimExist(770) = 0,781,770)

[state 1,1]
type = changeanim
trigger1 = time = 0 && p1name = "12"
value = ifelse(AnimExist(770+var(7)) = 0,781+var(7),770+var(7))

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[state 4410,1]
type = varset
trigger1 = time = 0
trigger1 = var(39) > 0
trigger1 = var(38) = 1
v = 38
value = 0

[state 781,2]
type = poweradd
trigger1 = time = 0
trigger1 = var(39) = 0
value = -3000

[state 4410,1]
type = velset
trigger1 = time = 0
y = 0

[state 4410,1]
type = posset
trigger1 = time = 0
y = 0

[state 781,1]
type = nothitby
trigger1 = time = [0,25]
value = SCA
time = 2

[state 781,1]
type = nothitby
trigger1 = projhit(780) = 1 && p2stateno != 7901 && stateno != 7951 && p2stateno != 7911
trigger1 = p2stateno != 7970 && p2stateno != 7980
trigger2 = projhit(780) = 1 && p2movetype = H
value = SCA
time = 40
persistent = 0

[state 781,1]
type = poweradd
trigger1 = projhit(780) = 1 && p2stateno != 7901 && stateno != 7951 && p2stateno != 7911
trigger1 = p2stateno != 7970 && p2stateno != 7980
value = ifelse((prevstateno != [4700,5900]) && (prevstateno != [120,165]) ,2000,1000)
persistent = 0

[state 1,forceRCflag]
type = varadd
trigger1 = projhit(780) = 1 && p2stateno != 7901 && stateno != 7951 && p2stateno != 7911
trigger1 = p2stateno != 7970 && p2stateno != 7980
persistent = 0
var(41) = ifelse((prevstateno != [4700,5900]) && (prevstateno != [120,165]) ,350,0)

[State -2, 2] 
type = PalFX
trigger1 = time = 0
time = 25
add = 32,32,-256
sinadd = 32, 32, -256, 3

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = F780,0


[State 750, Voice]
channel = 0
type = PlaySnd
trigger1 = animelemtime(1) = 1
value = ifelse((prevstateno = [4700,5400]) || (prevstateno = [120,165]),780,770),0

[State 750, Voice]
channel = 1
type = PlaySnd
trigger1 = animelemtime(1) = 3
value = ifelse((prevstateno = [4700,5400]) || (prevstateno = [120,165]),780,770),0

[State -2,42]
type = Explod
trigger1 = time = 15 && (prevstateno != [4700,5400]) && (prevstateno != [120,165]) 
id = 781
persistent = 0
anim = F300
pos = 0,-55
postype = p1
facing = 1
sprpriority = 2
removetime = 20
bindtime = -1
ignorehitpause = 0
ownpal = 1
supermove = 0
ontop = 1

[State -2,42]
type = Explod
trigger1 = time = 5 && (prevstateno = [4700,5400]) || time = 5 && (prevstateno = [120,165]) 
id = 781
persistent = 0
anim = F104
pos = 0,-55
postype = p1
facing = 1
sprpriority = 2
removetime = 21
bindtime = -1
ignorehitpause = 0
ownpal = 1
supermove = 0
ontop = 1

[State 1000, 3]
type = Projectile
trigger1 = time = 20
projanim = 789
projhitanim = 789
projremovetime = 1
projID = 780
postype = p1
offset = -25,0
attr = SC, SP
animtype = diagup
damage = 0,0
numhits = 0
getpower = 0,0
hitflag = MA
sparkno = 3
sparkxy = 0,-65
guardflag = M
pausetime = 1,0
hitsound = 5,5
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 0
ground.velocity = -10,-10
air.velocity = -10,-10
fall = 1
fall.recover = 0
kill = 0

[State 1000, 3]
type = Projectile
trigger1 = time = 20
projanim = 789
projhitanim = 789
projremovetime = 1
projID = 780
postype = p1
offset = 25,0
attr = SC, SP
animtype = diagup
damage = 0,0
getpower = 0,0
numhits = 0
hitflag = M
sparkno = 3
sparkxy = 0,-65
guardflag = M
pausetime = 1,0
hitsound = 5,5
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 0
ground.velocity = -10,-10
air.velocity = -10,-10
fall = 1
fall.recover = 0
kill = 0

[State 1000, 3]
type = Projectile
trigger1 = time = 20
projanim = 789
projhitanim = 789
projremovetime = 1
projID = 780
postype = p1
offset = 0,-25
attr = SC, SP
animtype = diagup
damage = 0,0
getpower = 0,0
numhits = 0
hitflag = MA
sparkno = 3
sparkxy = 0,-65
guardflag = M
pausetime = 1,0
hitsound = 5,5
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 0
ground.velocity = -10,-10
air.velocity = -10,-10
fall = 1
fall.recover = 0
kill = 0


[State 1041, 9]
type = ChangeState
trigger1 = time = 25
value = 59



;スペシャルアタック（空中）
[Statedef 785]
type = A
movetype = A
physics = N
ctrl = 0
PowerAdd = 0

[state 1,1]
type = changeanim
trigger1 = time = 0 && p1name != "12"
value = ifelse(AnimExist(782) = 0,41,782)

[state 1,1]
type = changeanim
trigger1 = time = 0 && p1name = "12"
value = ifelse(AnimExist(782+var(7)) = 0,41+var(7),782+var(7))

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
fvar(11) = 0

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[state 4410,1]
type = varset
trigger1 = time = 0
trigger1 = var(39) > 0
trigger1 = var(38) = 1
v = 38
value = 0

[state 781,2]
type = poweradd
trigger1 = time = 0
trigger1 = var(39) = 0
value = -3000

[state 4410,1]
type = velset
trigger1 = time = 0
x = 0
y = -3.5

[state 4410,1]
type = velset
trigger1 = time > 5
x = 0
y = 0

[state 781,1]
type = nothitby
trigger1 = time = 0
value = SCA
time = 35

[State -2, 2] 
type = PalFX
trigger1 = time = 0
time = 35
add = 32,32,-256
sinadd = 32, 32, -256, 3

[state 4030,1]
type = playsnd
trigger1 = time = 0
value = F780,0


[State 750, Voice]
channel = 0
type = PlaySnd
trigger1 = animelemtime(1) = 1
value = ifelse((prevstateno = [4700,5300]),780,770),0
persistent = 0

[State 750, Voice]
channel = 1
type = PlaySnd
trigger1 = animelemtime(1) = 3
value = ifelse((prevstateno = [4700,5300]),780,770),0
persistent = 0

[state 781,1]
type = nothitby
trigger1 = projhit = 1 && p2stateno != 7901 && stateno != 7951 && p2stateno != 7911
trigger1 = p2stateno != 7970 && p2stateno != 7980
trigger2 = projhit(780) = 1 && p2movetype = H
value = SCA
time = 4
persistent = 1

[state 781,1]
type = poweradd
trigger1 = projhit = 1 && p2stateno != 7901 && stateno != 7951 && p2stateno != 7911
trigger1 = p2stateno != 7970 && p2stateno != 7980
value = ifelse((prevstateno != [4700,5900]) && (prevstateno != [120,165]) ,2000,1000)
persistent = 0

[state 1,forceRCflag]
type = varadd
trigger1 = projhit(780) = 1 && p2stateno != 7901 && stateno != 7951 && p2stateno != 7911
trigger1 = p2stateno != 7970 && p2stateno != 7980
persistent = 0
var(41) = ifelse((prevstateno != [4700,5900]) && (prevstateno != [120,165]) ,350,0)

[State -2,42]
type = Explod
trigger1 = time = 20 && (prevstateno != [4700,5400]) && (prevstateno != [120,165]) 
id = 781
persistent = 0
anim = F300
pos = 0,-40
postype = p1
facing = 1
sprpriority = 2
removetime = 20
bindtime = -1
ignorehitpause = 0
ownpal = 1
supermove = 0
ontop = 1

[State -2,42]
type = Explod
trigger1 = time = 10 && (prevstateno = [4700,5400]) || time = 10 && (prevstateno = [120,165]) 
id = 781
persistent = 0
anim = F104
pos = 0,-55
postype = p1
facing = 1
sprpriority = 2
removetime = 20
bindtime = -1
ignorehitpause = 0
ownpal = 1
supermove = 0
ontop = 1

[State 1300, 3]
type = Projectile
trigger1 = time = 25
projanim = 789
projhitanim = 789
projremovetime = 3
projID = 780
postype = p1
offset = 0,-20
attr = SC, SP
animtype = diagup
damage = 0,0
hitflag = MA
numhits = 0
sparkno = 3
sparkxy = -1,-65
guardflag = M
pausetime = 1,0
getpower = 0,0
hitsound = 5,5
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 20
ground.velocity = -10,-10
air.velocity = -10,-10
fall = 1
fall.recover = 0
kill = 0
;persistent = 0

[State 1300, 3]
type = Projectile
trigger1 = time = 25
projanim = 789
projhitanim = 789
projremovetime = 3
projID = 780
postype = p1
offset = 0,20
attr = SC, SP
animtype = diagup
damage = 0,0
hitflag = MA
numhits = 0
sparkno = 3
sparkxy = -1,-65
guardflag = M
pausetime = 1,0
getpower = 0,0
hitsound = 5,5
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 20
ground.velocity = -10,-10
air.velocity = -10,-10
fall = 1
fall.recover = 0
kill = 0

[State 1300, 3]
type = Projectile
trigger1 = time = 25
projanim = 789
projhitanim = 789
projremovetime = 3
projID = 780
postype = p1
offset = -20,0
attr = SC, SP
animtype = diagup
damage = 0,0
hitflag = MA
numhits = 0
sparkno = 3
sparkxy = -1,-65
guardflag = M
pausetime = 1,0
getpower = 0,0
hitsound = 5,5
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 20
ground.velocity = -10,-10
air.velocity = -10,-10
fall = 1
fall.recover = 0
kill = 0

[State 1300, 3]
type = Projectile
trigger1 = time = 25
projanim = 789
projhitanim = 789
projremovetime = 3
projID = 780
postype = p1
offset = 20,0
attr = SC, SP
animtype = diagup
damage = 0,0
hitflag = MA
numhits = 0
sparkno = 3
sparkxy = -1,-65
guardflag = M
pausetime = 1,0
getpower = 0,0
hitsound = 5,5
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 20
ground.velocity = -10,-10
air.velocity = -10,-10
fall = 1
fall.recover = 0
kill = 0


[State 1041, 9]
type = ChangeState
trigger1 = Time = 42
value = 50
ctrl = 0

; Recovery Roll
[Statedef 5220]
type = S
movetype = I
physics = N
anim = ifelse(p1name = "12",5220+var(7),5220)
velset = 0,0
ctrl = 0
facep2 = 1




[State 500, 1]
type = AfterImage
trigger1 = time = 0 && var(39) = 0
time = 18
FrameGap = 5
length = 18
PalBright   =  0,0,0
PalContrast = 100,100,150
PalAdd      =  0,0,128
PalMul      =  1,1,1
Trans = add
ignorehitpause = 1

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 750, Align]
type = PosSet
trigger1 = time = 0
y = 0

[State 750, Voice]
channel = 0
type = PlaySnd
trigger1 = animelemtime(1) = 1
value = ifelse(p1name = "12",5200+var(7),5200),0

[State 750, Voice]
channel = 1
type = PlaySnd
trigger1 = animelemtime(1) = 3
value = ifelse(p1name = "12",5200+var(7),5200),0

[State 750, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 750, Invincibility]
type = NotHitBy
trigger1 = time = 0
value = ,NA,SA,HA,NP,SP,HP
time = 17

[State 750, Invincibility]
type = NotHitBy
trigger1 = time >= 17
value = SCA
time = 2

[State 750, Move]
type = VelSet
trigger1 = animelem = 1
x = 6

[State 750, Move]
type = Veladd
trigger1 = time >= 2
trigger1 = vel x > 0
x = -.2

[State 750, Stop]
type = VelSet
trigger1 = vel x < 0
x = 0

[State 5120, 7]
type = ChangeState
trigger1 = time = 17
value = 5225

; Recovery Roll
[Statedef 5225]
type = S
movetype = I
physics = N
ctrl = 0

[State 750, Invincibility]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 750, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 750, Move]
type = Veladd
trigger1 = vel x > 0
x = -.2

[State 750, Stop]
type = VelSet
trigger1 = vel x < 0
x = 0

[State 45, 3]
type = VarSet
trigger1 = Time < 10
var(47) = 0

[State 5120, 7]
type = turn
trigger1 = AnimTime = 0 && p2dist x < 0

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(19) = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1


; Recovery Roll
[Statedef 5230]
type = S
movetype = I
physics = N
anim = ifelse(p1name = "12",5230+var(7),5230)
velset = 0,0
ctrl = 0
facep2 = 1

[State 500, 1]
type = AfterImage
trigger1 = time = 0 && var(39) = 0
time = 18
FrameGap = 5
length = 18
PalBright   =  0,0,0
PalContrast = 100,100,150
PalAdd      =  128,0,0
PalMul      =  1,1,1
Trans = add
ignorehitpause = 1



[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 750, Align]
type = PosSet
trigger1 = time = 0
y = 0

[State 750, Voice]
channel = 0
type = PlaySnd
trigger1 = animelemtime(1) = 1
value = ifelse(p1name = "12",5200+var(7),5200),0

[State 750, Voice]
channel = 1
type = PlaySnd
trigger1 = animelemtime(1) = 3
value = ifelse(p1name = "12",5200+var(7),5200),0

[State 750, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 750, Invincibility]
type = NotHitBy
trigger1 = time = 0
value = ,NT,ST,HT
time = 17

[State 750, Invincibility]
type = NotHitBy
trigger1 = time >= 17
value = SCA
time = 2

[State 750, Move]
type = VelSet
trigger1 = animelem = 1
x = -5

[State 750, Move]
type = Veladd
trigger1 = time >= 2
trigger1 = vel x < 0
x = .2

[State 750, Stop]
type = VelSet
trigger1 = vel x > 0
x = 0

[State 5120, 7]
type = ChangeState
trigger1 = time = 17
value = 5225



;ロマキャン　地上
[Statedef 3800]
type = S
movetype = A
physics = S
ctrl = 0
anim = ifelse(p1name = "12",0+var(7),0)
PowerAdd = -2000
juggle = 0


[state 1,1]
type = superpause
trigger1 = time = 0
time = ifelse(win = 1,0,1)
anim = -1
sound = F3800,1


[State 9100, 1]
type = stopsnd
trigger1 = time = 0
channel = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[state 1,先行入力flag]
type = varset
trigger1 = 1
var(47) = 0

[State -2,42]
type = Explod
trigger1 = time = 0
id = 3800
persistent = 0
anim = f3800
pos = 0,-60
velocity = 0
postype = p1
facing = 1
sprpriority = 2
removetime = 27
;bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 0

[State 500, 1]
type = AfterImage
trigger1 = Time = 0
time = 22
FrameGap = 4
length = 7
PalBright   =  0,0,0
PalContrast = 100,100,100
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1

[State -2, 2] 
type = PalFX
trigger1 = time = 0
time = 2
add = 252,32,32
sinadd = 252, 32, 32, 3

[State 1041, 9]
type = ChangeState
trigger1 = time = 2
value = ifelse(command = "holddown",11,0)
ctrl = 1

;ロマキャン　苦衷
[Statedef 3900]
type = A
movetype = A
physics = A
ctrl = 0
anim = ifelse(p1name = "12",41+var(7),41)
PowerAdd = -2000
juggle = 0

[state 1,1]
type = superpause
trigger1 = time = 0
time = ifelse(win = 1,0,1)
anim = -1
sound = F3800,1

[State -2, 2] 
type = PalFX
trigger1 = time = 0
time = 2
add = 252,32,32
sinadd = 252, 32, 32, 3

[State 9100, 1]
type = stopsnd
trigger1 = time = 0
channel = 0

[state 1,1]
type = movehitreset
trigger1 = time = 0

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(46) = 0

[state 1,先行入力flag]
type = varset
trigger1 = 1
var(47) = 0

[State 500, 1]
type = AfterImage
trigger1 = Time = 0
time = 22
FrameGap = 4
length = 7
PalBright   =  0,0,0
PalContrast = 100,100,100
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1

[State -2,42]
type = Explod
trigger1 = time = 0
id = 3800
persistent = 0
anim = f3800
pos = 0,-60
velocity = 0
postype = p1
facing = 1
sprpriority = 2
removetime = 27
;bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 0

[state sj,1]
type = null;varset
trigger1 = time = 0
v = 10
value = 1

[State 1041, 9]
type = ChangeState
trigger1 = Time = 1
value = 50
ctrl = 1

;フォースロマキャン　地上
[Statedef 3850]
type = U
movetype = A
physics = S
ctrl = 0
anim = ifelse(p1name = "12",0+var(7),0)
PowerAdd = -1000
juggle = 0

[state 1,1]
type = movehitreset
trigger1 = time = 0

[state 1,1]
type = superpause
trigger1 = time = 0
time = ifelse(win = 1,0,1)
anim = -1
sound = F3800,1

[State 9100, 1]
type = stopsnd
trigger1 = time = 0
channel = 0

[state 1,1]
type = varset
trigger1 = time = 0
var(46) = 0

[state 1,先行入力flag]
type = varset
trigger1 = 1
var(47) = 0

[State -2,42]
type = Explod
trigger1 = time = 0
id = 3800
persistent = 0
anim = f3850
pos = 0,-60
velocity = 0
postype = p1
facing = 1
sprpriority = 2
removetime = 27
;bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 0

[State 500, 1]
type = AfterImage
trigger1 = Time = 0 && var(39) = 0
time = 22
FrameGap = 4
length = 7
PalBright   =  0,0,0
PalContrast = 100,100,100
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1

[State -2, 2] 
type = PalFX
trigger1 = Time = 0 && var(39) = 0
time = 2
add = 32,32,255
sinadd = 32, 32, 255, 3

[State 1041, 9]
type = ChangeState
trigger1 = time = 2
value = ifelse(command = "holddown",11,0)
ctrl = 1

;フォースロマキャン　空中
[Statedef 3950]
type = A
movetype = A
physics = A
ctrl = 0
anim = ifelse(p1name = "12",41+var(7),41)
PowerAdd = -1000
juggle = 0

[state 1,1]
type = varset
trigger1 = time = 0
var(46) = 0

[state 1,先行入力flag]
type = varset
trigger1 = time = 0
var(47) = 0

[state 1,1]
type = movehitreset
trigger1 = time = 0

[State -2, 2] 
type = PalFX
trigger1 = Time = 0 && var(39) = 0
time = 2
add = 32,32,255
sinadd = 32, 32, 255, 3

[state 1,1]
type = superpause
trigger1 = time = 0
time = ifelse(win = 1,0,1)
anim = -1
sound = F3800,1

[State 9100, 1]
type = stopsnd
trigger1 = time = 0
channel = 0

[State 500, 1]
type = AfterImage
trigger1 = Time = 0 && var(39) = 0
time = 22
FrameGap = 4
length = 7
PalBright   =  0,0,0
PalContrast = 100,100,100
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1

[State -2,42]
type = Explod
trigger1 = time = 0
id = 3800
persistent = 0
anim = f3850
pos = 0,-60
velocity = 0
postype = p1
facing = 1
sprpriority = 2
removetime = 27
;bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1
ontop = 0

[state 1,先行入力flag]
type = varset
trigger1 = 1
var(47) = 0

[State 1041, 9]
type = ChangeState
trigger1 = Time = 1
value = 50
ctrl = 1



;空中ブロッキング判定ヘルパー
[Statedef 11690]
movetype = I
sprpriority = 5
anim = 11691


[State 11690, 1]
type = BindToParent
trigger1 = Time >= 0
pos = 0,0

[State 11690, 2]
type = NotHitBy 
trigger1 = parent,stateno = 764
value = , AA, AT
time = 1

[State 11690, 2]
type = NotHitBy 
trigger1 = parent,stateno != 764
value = SCA;, AA, AT
time = 1

[State 11690, 3]
type = HitOverRide
trigger1 = parent,stateno = 764
slot = 0
sttrl = SCA,NP,SP,HP
stateno = 16002
time = -1

[State 11690, 4]
type = Helper
trigger1 = AnimTime = 0
trigger1 = NumHelper(11691) = 0
ID = 11691
postype = p1
pos = 2,-53
stateno = 11691
name = "11691"
helpertype = normal

[State 11690, 5]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root,stateno = 47
trigger3 = root,stateno = [ifelse(p1name = "12",5000+var(7),5000),5999]
trigger4 = root,stateno = [600,699]

[State 11690, 5]
type = DestroySelf
trigger1 = Time >= 0
trigger1 = NumHelper(11692) = 1

;---------------------------------------------------------------------------
;空中ブロッキング判定（フォロースルー）ヘルパー
[Statedef 11691]
movetype = I
sprpriority = 5
anim = 11690

[State 11691, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 11691, 2]
type = DestroySelf
trigger1 = Time = 20
trigger2 = root,stateno = 47
trigger3 = root,stateno = [ifelse(p1name = "12",5000+var(7),5000),5999]
trigger4 = root,stateno = [600,699]

;---------------------------------------------------------------------------
;空中ブロッキング判定（ff）ヘルパー
[Statedef 11692]
movetype = I
sprpriority = 5
anim = 11690

[State 11691, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 11691, 2]
type = DestroySelf
trigger1 = Time = 30

;飛び道具ブロッキングヘルパー
[Statedef 16001]
type = S
movetype= I 
anim = 16001

[State 16001, 1]
type = BindToParent
trigger1 = Time >= 0
pos = 0,0

[State 16001, 2]
type = NotHitBy 
trigger1 = 1
value = , AA, AT
time = 1

[State 16001, 3]
type = HitOverRide
trigger1 = Time = 0
slot = 0
sttrl = SCA,NA,SA,HA
stateno = 16002
time = -1

[State 16001, 3]
type = DestroySelf
trigger1 = Time = 6
trigger2 = root,stateno = 40
trigger3 = root,stateno = [0,22]
trigger4 = root,stateno = [ifelse(p1name = "12",5000+var(7),5000),5999]
trigger5 = root,stateno = [600,699]
trigger6 = parent,stateno = 59
trigger7 = root,stateno = 59

[Statedef 16002]
type = S
movetype= I 
anim = 11690

[State 16002, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 16002, 2]
type = Helper
trigger1 = Time = 0
ID = 16003
postype = p1
pos = 0,-10
stateno = 16003
name = "Bking3"
helpertype = normal

[State 16002, 3]
type = DestroySelf
trigger1 = Time = 1

[Statedef 16003]
type = S
movetype= I 
anim = 11690

[State 16003, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3

[State 16001, 2]
type = DestroySelf
trigger1 = Time = 1

;飛び道具ブロッキングヘルパー
[Statedef 16005]
type = S
movetype= I 
anim = 16001

[State 16001, 1]
type = BindToParent
trigger1 = Time >= 0
pos = 0,0

[State 16001, 2]
type = NotHitBy 
trigger1 = 1
value = , AA, AT
time = 1

[State 16001, 3]
type = HitOverRide
trigger1 = Time = 0
slot = 0
sttrl = SCA,NP,SP,HP
stateno = 16006
time = -1

[State 16001, 3]
type = DestroySelf
trigger1 = Time = 6
trigger2 = root,stateno = 40
trigger3 = root,stateno = [0,22]
trigger4 = root,stateno = [ifelse(p1name = "12",5000+var(7),5000),5999]
trigger5 = root,stateno = [600,699]

[Statedef 16006]
type = S
movetype= I 
anim = 11690

[State 16002, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 16002, 2]
type = Helper
trigger1 = Time = 0
ID = 16007
postype = p1
pos = 0,-10
stateno = 16007
name = "Bking3"
helpertype = normal

[State 16002, 3]
type = DestroySelf
trigger1 = Time = 1

[Statedef 16007]
type = S
movetype= I 
anim = 11690

[State 16003, 1]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 1601, 1]
type = PlaySnd
trigger1 = Time = 0
value = f6, 3

[State 16001, 2]
type = DestroySelf
trigger1 = Time = 1


;薙げぬけ
[statedef 825]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1000, 4]
type = explod
trigger1 = time = 0
anim = f500
bindtime = -1
postype = p1
pos = 0,-50

[state 825,power]
type = poweradd
trigger1 = time = 0
value = 50

[State 820, 1]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(p1name = "12",41+var(7),41)

[state 825,1]
type = nothitby
trigger1 = 1
value = SCA
time = 3

[State 1240, 6]
type = selfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52

[State -2, 2] 
type = PalFX
trigger1 = time >= 0
trigger1 = var(39) = 0
time = 10
add = 64,64,64
sinadd = 64, 64, 64, 3

[State 500, 1]
type = AfterImage
trigger1 = Time = 0
trigger1 = var(39) = 0
time = 42
FrameGap = 4
length = 7
PalBright   =  0,0,0
PalContrast = 100,100,100
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1


[State 1230, 2]
type = PlaySnd
trigger1 = Time = 2
value = ifelse(p1name = "12",5200+var(7),5200),0
channel = 0

[state 825,2]
type = velset
trigger1 = time = 0
x = -4
y = -3

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(18) = 0

[state 825,3]
type = veladd
trigger1 = time >= 10
y = .5

;なげぬけ
[statedef 826]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1000, 4]
type = explod
trigger1 = time = 0
anim = f500
bindtime = -1
postype = p1
pos = 0,-50

[state 825,power]
type = poweradd
trigger1 = time = 0
value = 50

[State 820, 1]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(p1name = "12",41+var(7),41)

[state 825,1]
type = nothitby
trigger1 = 1
value = SCA
time = 3

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(18) = 0

[State 1240, 6]
type = selfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52

[State 1230, 2]
type = PlaySnd
trigger1 = Time = 2
value = ifelse(p1name = "12",5200+var(7),5200),0
channel = 0

[State -2, 2] 
type = PalFX
trigger1 = time >= 0
trigger1 = var(39) = 0
time = 10
add = 64,64,64
sinadd = 64, 64, 64, 3

[State 500, 1]
type = AfterImage
trigger1 = Time = 0
trigger1 = var(39) = 0
time = 42
FrameGap = 4
length = 7
PalBright   =  0,0,0
PalContrast = 100,100,100
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1

[state 825,2]
type = velset
trigger1 = time = 0
x = -4
y = -3

[state 825,3]
type = veladd
trigger1 = time >= 10
y = .5

;なげぬけ
[statedef 827]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1000, 4]
type = explod
trigger1 = time = 0
anim = f500
bindtime = -1
postype = p1
pos = 0,-50

[state 825,power]
type = poweradd
trigger1 = time = 0
value = 50

[State 820, 1]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(p1name = "12",41+var(7),41)

[state 825,1]
type = nothitby
trigger1 = 1
value = SCA
time = 3

[state 1,forceRCflag]
type = varset
trigger1 = time = 0
var(18) = 0

[State 1240, 6]
type = selfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52

[State 1230, 2]
type = PlaySnd
trigger1 = Time = 2
value = ifelse(p1name = "12",5200+var(7),5200),0
channel = 0

[State -2, 2] 
type = PalFX
trigger1 = time >= 0
trigger1 = var(39) = 0
time = 10
add = 64,64,64
sinadd = 64, 64, 64, 3

[State 500, 1]
type = AfterImage
trigger1 = Time = 0
trigger1 = var(39) = 0
time = 42
FrameGap = 4
length = 7
PalBright   =  0,0,0
PalContrast = 100,100,100
PalAdd      =  0,0,0
PalMul      =  1,1,1
Trans = Add1

[state 825,2]
type = velset
trigger1 = time = 0
x = -4
y = -3

[state 825,3]
type = veladd
trigger1 = time >= 10
y = .5


;グラップルディフェンス
[statedef 890]
type = S
movetype = I
physics = N
ctrl = 0
facep2 = 1
anim = ifelse(p1name = "12",152+var(7),152)

[state 1,1]
type = nothitby
trigger1 = 1
value = SCA

[state 1,1]
type = changeanim
trigger1 = time = 15
value = ifelse(p1name = "12",106+var(7),106)

[State 1000, Width]
type = Width
trigger1 = time > 14
value = 90,0

[State 1000, 4]
type = explod
trigger1 = time = 0
anim = f890
bindtime = -1
postype = p1
pos = 30,-50
facing = 1
sprpriority = 2
removetime = 15
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 1

[State 1230, 2]
type = PlaySnd
trigger1 = Time = 0
value = ifelse(p1name = "12",5200+var(7),5200),0
channel = 0

[State 1230, 2]
type = PlaySnd
trigger1 = Time = 0
value = f6,3

[state 1,1]
type = posfreeze
trigger1 = time < 14

[state 825,2]
type = velset
trigger1 = time = 0
x = -5
y = -5

[state 825,3]
type = veladd
trigger1 = time >= 10
y = .5

[State 1240, 6]
type = selfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 53

; 叩きつけ
[Statedef 4800]
type = A
movetype = H
physics = N


[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5011+var(7),5011)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4801

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4801]
type = A
movetype = H
physics = N
velset = -4,14

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999]) && (prevstateno != [4800,4809])
var(17) = ifelse(var(44) >1,100/var(44),100)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4802

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4802]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,0

[state 4800,1]
type = playsnd
trigger1 = time = 0
value = f7,3

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,50/var(44),50)

[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[state 4802,1]
type = null;nothitby
trigger1 = time = 0
value = SCA
time = 1599

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -4
y = -6

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time > 2
value = 5110

; たたきつけ
[Statedef 4805]
type = A
movetype = H
physics = N

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)



[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4806

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4806]
type = A
movetype = H
physics = N
velset = -1,20

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(p2name = "setsuna" && p2stateno = 1003,50,200)
persistent = 0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)



[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4807

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4807]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,50/var(44),50)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -1
y = 0

[State 1281, 1]
type = Velset
trigger1 = Time = 2
x = -2
y = -11.5

[state 4805,1]
type = lifeadd
trigger1 = time = 0
value = -100

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 0
value = 62
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 0
;value = F7, 0 ;Hit ground
value = F7, 5


[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1


[State 1281, 1]
type = gravity
trigger1 = Time > 2

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[state 4805,1]
type = null;nothitby
trigger1 = time > 10 && pos y >= 0 && vel y > 0
value = SCA
time = 1599

[State 1281, 3]
type = SelfState
trigger1 = time > 10 && pos y >= 0 && vel y > 0
value = 5110

; 叩きつけ やられあり
[Statedef 48000]
type = A
movetype = H
physics = N
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5011+var(7),5011)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 48001

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 48001]
type = A
movetype = H
physics = N
velset = -1,14

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 48002

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 48002]
type = A
movetype = H
physics = N
velset = 0,0

[state 4800,1]
type = playsnd
trigger1 = time = 0
value = f7,3

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5100+var(7),5100)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -2
y = -6

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,0


[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

; 叩きつけ やられ無し
[Statedef 48005]
type = A
movetype = H
physics = N
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5011+var(7),5011)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 48006

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 48006]
type = A
movetype = H
physics = N
velset = -1,14

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 48007

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 48007]
type = A
movetype = H
physics = N
velset = 0,0

[state 1,1]
type = nothitby
trigger1 = 1
value = SCA
time = 60

[state 4800,1]
type = playsnd
trigger1 = time = 0
value = f7,3

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5100+var(7),5100)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -2
y = -6

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,0


[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

; 垂直叩きつけ やられあり
[Statedef 48010]
type = A
movetype = H
physics = N
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5011+var(7),5011)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 48011

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 48011]
type = A
movetype = H
physics = N
velset = -1,14

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 48012

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 48012]
type = A
movetype = H
physics = N
velset = 0,0

[state 4800,1]
type = playsnd
trigger1 = time = 0
value = f7,3

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5100+var(7),5100)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = -4

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,0


[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

; Σ⊂（ﾟДﾟ⊂≡ ダウン後やられあり
[Statedef 48020]
type = A
movetype = H
physics = N
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 48021

[Statedef 48021]
type = A
movetype = H
physics = N
velset = -6,-4.5

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .65

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,180/var(44),220)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 48022

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 48022]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5080+var(7),5080)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -4
y = 0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f110,0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 1281, 1]
type = VelAdd
trigger1 = vel x  < 0
x = .1

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State 1281, 3]
type = SelfState
trigger1 = time = 20
value = 5110


; 叩きつけ 斜めに吹っ飛ぶ
[Statedef 4890]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4891

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4891]
type = A
movetype = H
physics = N
velset = -4,14

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,180/var(44),180)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4892

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4892]
type = A
movetype = H
physics = N
velset = 0,0

[state 4800,1]
type = playsnd
trigger1 = time = 0
value = f7,2

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[state 4802,1]
type = null;nothitby
trigger1 = time = 0
value = SCA
time = 1599

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,0

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -6
y = -6



[State 1281, 1]
type = gravity
trigger1 = Time > 0

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,20/var(44),20)

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time > 2
value = 5110

; 叩きつけ 斜めに吹っ飛ぶ 無敵
[Statedef 4895]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5011+var(7),5011)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4896

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4896]
type = A
movetype = H
physics = N
velset = -4,14

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 1]
type = gravity
trigger1 = Time > 0


[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,150/var(44),150)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4897

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4897]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 4800,1]
type = playsnd
trigger1 = time = 0
value = f7,2

[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[state 4802,1]
type = nothitby
trigger1 = time = 0
value = SCA
time = 1599

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -6
y = -6



[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .65

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time > 2
value = 5110


; 壁吹っ飛び
[Statedef 4810]
type = A
movetype = H
physics = N

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 226, 1]
type = Changeanim
trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4811

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4811]
type = A
movetype = H
physics = N
velset = -6,-7

[State 1281, 1]
type = gravity
trigger1 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = varadd
trigger1 = time = 0
var(17) = ifelse(var(44) >1,10/var(44),20)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = playsnd
trigger1 = time = 0
value = ifelse(p1name = "12",5000+var(7),5000),6
channel = 0

[state 1482,1]
type = playerpush
trigger1 = time >= 0
value = 0

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -12
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 4812

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc" && var(19) = 0
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = selfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

; 壁ヒット
[Statedef 4812]
type = A
movetype = H
physics = N
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time <= 20
value = ifelse(p1name = "12",5011+var(7),5011)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time > 20
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1280, 2]
type = nothitby
Trigger1 = Time > 20
value = SCA
time = 2

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = varadd
trigger1 = time = 0
var(17) = ifelse(var(44) >1,90/var(44),100)

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[state 1,1]
type = playsnd
trigger1 = time = 0 && alive
value = ifelse(p1name = "12",5000+var(7),5000),5
channel = 0

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F5,3

[state 4812,lifeadd]
type = lifeadd
trigger1 = time = 0
value = -50
kill = 0


[State 1281, 1]
type = Velset
trigger1 = Time = 0
y = -8

[State 1281, 1]
type = gravity
trigger1 = 1

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[state 4812,lifeadd]
type = turn
trigger1 = p2dist x < 0

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

; 受身不能吹っ飛び
[Statedef 4815]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 1]
type = posfreeze
trigger1 = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,varx]
type = varset
trigger1 = time = 0
fvar(1) = gethitvar(xvel)

[state 1,vary]
type = varset
trigger1 = time = 0
fvar(2) = gethitvar(yvel)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time > 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4816

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4816]
type = A
movetype = H
physics = N

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,40/var(44),50)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 1]
type = gravity
trigger1 = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,velset]
type = velset
trigger1 = time = 0
x = fvar(1)
y = fvar(2)

[state 1,1]
type = varset
trigger1 = time = 0
var(18) = 1

[state 1482,1]
type = playerpush
trigger1 = time >= 0
value = 0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = selfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

; 受身不能吹っ飛び
[Statedef 4817]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,40/var(44),50)

[State 1280, 1]
type = posfreeze
trigger1 = 1

[state 1,varx]
type = varset
trigger1 = time = 0
fvar(1) = gethitvar(xvel)

[state 1,vary]
type = varset
trigger1 = time = 0
fvar(2) = gethitvar(yvel)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4818

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4818]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = gravity
trigger1 = 1

[state 1,velset]
type = velset
trigger1 = time = 0
x = fvar(1)*-1
y = fvar(2)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = varset
trigger1 = time = 0
var(18) = 1

[state 1482,1]
type = playerpush
trigger1 = time >= 0
value = 0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = selfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


; Σ⊂（ﾟДﾟ⊂≡ ダウン後やられあり
[Statedef 4820]
type = A
movetype = H
physics = N
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4821

[Statedef 4821]
type = A
movetype = H
physics = N
velset = -10,-4.5

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .65

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,180/var(44),220)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4822

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4822]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5080+var(7),5080)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -4
y = 0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f110,0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 1281, 1]
type = VelAdd
trigger1 = vel x  < 0
x = .1

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State 1281, 3]
type = SelfState
trigger1 = time = 20
value = 5110


; スライド部分のみ
[Statedef 4823]
type = A
movetype = H
physics = N
velset = 0,0
facep2 = 1

[state 1,1]
type = posset
trigger1 = time = 0
y = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5080+var(7),5080)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -4
y = 0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f110,0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 1281, 1]
type = VelAdd
trigger1 = vel x  < 0
x = .1

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State 1281, 3]
type = SelfState
trigger1 = time = 20
value = 5110


; Σ⊂（ﾟДﾟ⊂≡ ダウン後やられあり
[Statedef 4824]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)



[state 1,1]
type = helper
trigger1 = numhelper(21) = 0
helpertype = normal
name = "noguard"
id = 21
postype = p1
pos = 0,0
stateno = 9200
keyctrl = 0
ownpal = 1
facing = 1

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4826


; Σ⊂（ﾟДﾟ⊂≡ ダウン後やられ無し
[Statedef 4825]
type = A
movetype = H
physics = N
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4826

[Statedef 4826]
type = A
movetype = H
physics = N
velset = -10,-4.5

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .65

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,180/var(44),220)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4827

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4827]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5080+var(7),5080)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -4
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f110,0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 1281, 1]
type = VelAdd
trigger1 = vel x  < 0
x = .1

[State 1281, 3]
type = nothitby
trigger1 = 1
value = SCA
time = 1599

[State 1281, 3]
type = SelfState
trigger1 = time = 20
value = 5110

;その場叩きつけ　食らい判定やや持続
[Statedef 4835]
type    = A
movetype= H
physics = S
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5030+var(7),5030)

[state 226,10]
type = playerpush
trigger1 = time  >= 0
value = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4836

[Statedef 4836]
type = A
movetype = H
physics = N
velset = -1,30

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,150/var(44),180)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .65

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4837

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4837]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5100+var(7),5100)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -1
y = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 1281, 1]
type = VelAdd
trigger1 = vel x  < 0
x = .1

[State 1281, 3]
type = nothitby
trigger1 = time = 15
value = SCA
time = 1599

[State 1281, 3]
type = SelfState
trigger1 = time = 15
value = 5110


; 叩きつけ
[Statedef 4830]
type = A
movetype = H
physics = N
facep2 = -1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4801

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4831]
type = A
movetype = H
physics = N
velset = 4,14
facep2 = -1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,80/var(44),100)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .65

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4832

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4832]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,0

[state 4800,1]
type = playsnd
trigger1 = time = 0
value = f7,3

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,40/var(44),50)

[State 191, 4]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -10
freq = 200
phase = 20
ignorehitpause = 1

[state 4802,1]
type = null;nothitby
trigger1 = time = 0
value = SCA
time = 1599

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -4
y = -6

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .65

[State 1281, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc"
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time > 2
value = 5110

;ワイヤーダメージ
[Statedef 4840]
type    = A
movetype= H
physics = S
ctrl = 0
velset = 0,0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 226, 1]
type = Changeanim
trigger1 = Time >= 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 226,10]
type = playerpush
trigger1 = time  >= 0
value = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[state 1,1]
type = varset
trigger1 = time = 0
fvar(1) = 0.0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4841

[Statedef 4841]
type = A
movetype = H
physics = N
velset = -10,-8

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = varadd
trigger1 = time > 0
fvar(1) = 0.1


[State 1281, 1]
type = gravity
trigger1 = 1

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,100/var(44),50)

[State 1281, 3]
type = selfstate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4822

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 4842
ctrl = 0

[state 226,10]
type = playerpush
trigger1 = time  >= 0
value = 0

;---------------------------------------
[Statedef 4842]
type    = A
movetype= H
physics = N

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 227, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State 227, 4]
type = EnvShake
Trigger1 = Time = 0
time = 15
ampl = -3
freq = 90
phase = 90

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F5,3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = ifelse(p1name = "12",5000+var(7),5000),3
channel = 0

[State 227, 6]
type = ChangeState
trigger1 = Time = 2
value = 4843

;---------------------------------------
[Statedef 4843]
type    = A
movetype= H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc" && var(19) = 0
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 228, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -10;-(fvar(1))

[State 228, Vel X]
type = VelSet
trigger1 = Time = 0
x = 2.0+(fvar(1))

[State 1281, 1]
type = gravity
trigger1 = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 228, Anim 5050]
type = ChangeAnim
triggerall = Time = 0
trigger1 = !SelfAnimExist(5052) && p1name != "12"
trigger2 = !SelfAnimExist(5052+var(7)) && p1name = "12"
value = ifelse(p1name = "12",5050+var(7),5050)

[State 228, Anim 5052]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5052) && p1name != "12"
trigger2 = SelfAnimExist(5052+var(7)) && p1name = "12"
value = ifelse(p1name = "12",5052+var(7),5052)

[State 228, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name != "12"
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 228, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name = "12"
trigger1 = Anim = 5050+var(7)
trigger1 = SelfAnimExist(5060+var(7))
persistent = 0
value = ifelse(p1name = "12",5060+var(7),5060)

[State 228, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name != "12"
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 228, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name = "12"
trigger1 = Anim = 5052+var(7)
trigger1 = SelfAnimExist(5062+var(7))
persistent = 0
value = ifelse(p1name = "12",5062+var(7),5062)

[State 228, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;八酒杯系やられ
[Statedef 4845]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 226, 1]
type = Changeanim
trigger1 = time >= 0 && p1name != "12"
value = ifelse(statetype = A,5050,ifelse(statetype = S,5010,ifelse(statetype = C,5021,5030)))

[State 226, 1]
type = Changeanim
trigger1 = time >= 0 && p1name = "12"
value = ifelse(statetype = A,5050+var(7),ifelse(statetype = S,5012+var(7),ifelse(statetype = C,5022+var(7),5030+var(7))))

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State 5000, FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = lifeadd
trigger1 = 1
value = -6
kill = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[state 1,1]
type = posset
trigger1 = time = 0 && statetype != A
y = 0

[state 1,set]
type = statetypeset
trigger1 = time = 0 && statetype = L
statetype = A
ignorehitpause = 1


[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4846

[Statedef 4846]
type = U
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = velset
trigger1 = time = 0 && statetype = A
x = -1
y = -10

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 0
value = ifelse(p1name = "12",5000+var(7),5000),2
channel = 0


[state assertspecial]
type = playsnd
trigger1 = !alive && statetype != A
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[state 1,1]
type = posset
trigger1 = time = 0 && statetype != A
y = 0

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0 && statetype = A
y = .65

[State 1281, 3]
type = selfstate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0 && statetype = A
value = 5100

[State 1281, 3]
type = changestate
trigger1 = time = 2 && statetype != A
value = 4866

; 壁やられ強誘発やられ
[Statedef 4850]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 217,2]
type = playsnd
trigger1 = time = 0
value = F7,3

[state 217,1]
type = velset
trigger1 = time = 0
x = -10
y = 0

[state 217,1]
type = veladd
trigger1 = time >= 1 && vel x < -1
x = .3

[state 217,1]
type = lifeadd
trigger1 = time >= 1
trigger1 = p2life >= 1
value = -1

[state 820,2]
type = changeanim
trigger1 = time = 0
value = ifelse(p1name = "12",5090+var(7),5090)


[state 820,2]
type = selfstate
trigger1 = time = 30
value = 5110

[state 820,2]
type = changestate
triggerall = time = [1,3]
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 4851

[state 820,2]
type = changestate
triggerall = time > 3
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 4852

; Standing one inchi punchi
[Statedef 4851]
type = S
movetype = H
physics = N
ctrl = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 227, 4]
type = EnvShake
Trigger1 = Time = 0
time = 15
ampl = -3
freq = 90
phase = 90

[state 217,1]
type = lifeadd
trigger1 = time = 0
value = -50

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[state 217,2]
type = playsnd
trigger1 = time = 0
value = F5,3

[state 217,1]
type = posset
trigger1 = time = 0
y = 0

[state 217,1]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 820,2]
type = changeanim
trigger1 = time = 0
value = ifelse(p1name = "12",9100+var(7),9100)

[state 4851,sound]
type = playsnd
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),2
channel = 0

[state 4851,nothitby]
type = nothitby
trigger1 = time = 57
time = 1599
value = SCA

[state 820,2]
type = selfstate
trigger1 = time = 57
value = 5100

; Standing one inchi punchi
[Statedef 4852]
type = A
movetype = H
physics = N
ctrl = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 227, 4]
type = EnvShake
Trigger1 = Time = 0
time = 15
ampl = -3
freq = 90
phase = 90

[state 217,1]
type = lifeadd
trigger1 = time = 0
value = -50

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[state 217,2]
type = playsnd
trigger1 = time = 0
value = F5,3

[state 217,1]
type = posset
trigger1 = time = 0
y = 0

[state 217,1]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 820,2]
type = changeanim
trigger1 = time = 0
value = ifelse(p1name = "12",9100+var(7),9100)

[state 4851,sound]
type = playsnd
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),2
channel = 0

[state 4851,nothitby]
type = nothitby
trigger1 = time = 17
time = 1599
value = SCA

[state 820,2]
type = selfstate
trigger1 = time = 17
value = 5100

; 壁やられ強誘発やられ かなりふっとぶ
[Statedef 4855]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 820,2]
type = changeanim
trigger1 = 1
value = ifelse(p1name = "12",5090+var(7),5090)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4856

[state 217,1]
type = velset
trigger1 = time = 0
x = 0
y = 0

; 壁やられ強誘発やられ かなりふっとぶ
[Statedef 4856]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 217,1]
type = velset
trigger1 = time = 0
x = -11
y = 0

[state 217,1]
type = veladd
trigger1 = time >= 1
x = -.4

[state 820,2]
type = changestate
triggerall = time > 3 
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 4857


; Standing one inchi punchi
[Statedef 4857]
type = S
movetype = H
physics = N
ctrl = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1, FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 227, 4]
type = EnvShake
Trigger1 = Time = 0
time = 15
ampl = -3
freq = 90
phase = 90

[state 217,1]
type = lifeadd
trigger1 = time = 0
value = -50

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[state 217,2]
type = playsnd
trigger1 = time = 0
value = F5,3

[state 217,1]
type = posset
trigger1 = time = 0
y = 0

[state 217,1]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 820,2]
type = changeanim
trigger1 = time = 0
value = ifelse(p1name = "12",9100+var(7),9100)

[state 4851,sound]
type = playsnd
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),2
channel = 0

[state 4851,nothitby]
type = nothitby
trigger1 = time = 57
time = 1599
value = SCA

[state 820,2]
type = selfstate
trigger1 = time = 57
value = 5110


;よろけ reap用
[Statedef 4860]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),1
channel = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",9100+var(7),9100)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4870

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 33
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4861

[Statedef 4861]
type = S
movetype = H
physics = S
velset = -10,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 4861,1]
type = varadd
trigger1 = command = "left" || command = "right" || command = "up" || command = "down"
trigger2 = command = "a" || command = "b" || command = "c" || command = "x" || command = "y" || command = "z" || command = "s"
var(0) = -2
ignorehitpause = 1

[state 4861,1]
type = varadd
trigger1 = 1
var(17) = 4
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 20
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0


[State -2,47]
type = RemoveExplod
trigger1 = time > 20+var(0)
ID = 210

[State 1281, 3]
type = selfstate
trigger1 = time > 20+var(0) && alive = 1
value = 5001

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfstate
trigger1 = alive != 1
trigger1 = time > 20+var(0)
value = 5100 ;dead

;よろけ 小
[Statedef 4862]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),0
channel = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",9100+var(7),9100)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4870

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 25
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4863

[Statedef 4863]
type = S
movetype = H
physics = S
velset = -10,0

[state 4861,1]
type = varadd
trigger1 = command = "left" || command = "right" || command = "up" || command = "down"
trigger2 = command = "a" || command = "b" || command = "c" || command = "x" || command = "y" || command = "z" || command = "s"
var(0) = -2
ignorehitpause = 1

[state 4861,1]
type = varadd
trigger1 = 1
var(17) = ifelse(var(44) >1,3,4)
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 12
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State -2,47]
type = RemoveExplod
trigger1 = time > 12+var(0)
ID = 210

[State 1281, 3]
type = selfstate
trigger1 = time > 12+var(0) && alive = 1
value = 5001

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfstate
trigger1 = alive != 1
trigger1 = time > 12+var(0)
value = 5100 ;dead

;よろけ 中
[Statedef 4864]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),2
channel = 0

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",9100+var(7),9100)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4870

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

; レバー　中
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 39
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4865

[Statedef 4865]
type = S
movetype = H
physics = S
velset = -10,0

[state 4861,1]
type = varadd
trigger1 = command = "left" || command = "right" || command = "up" || command = "down"
trigger2 = command = "a" || command = "b" || command = "c" || command = "x" || command = "y" || command = "z" || command = "s"
var(0) = -2
ignorehitpause = 1

[state 4861,1]
type = varadd
trigger1 = 1
var(17) = ifelse(var(44) >1,3,4)
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 26
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State -2,47]
type = RemoveExplod
trigger1 = time > 26+var(0)
ID = 210

[State 1281, 3]
type = selfstate
trigger1 = time > 26+var(0) && alive = 1
value = 5001

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfstate
trigger1 = alive != 1
trigger1 = time > 26+var(0)
value = 5100 ;dead

;よろけ 大
[Statedef 4866]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),3
channel = 0

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",9100+var(7),9100)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4870

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 43
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4867

[Statedef 4867]
type = S
movetype = H
physics = S
velset = -10,0

[state 4861,1]
type = varadd
trigger1 = command = "left" || command = "right" || command = "up" || command = "down"
trigger2 = command = "a" || command = "b" || command = "c" || command = "x" || command = "y" || command = "z" || command = "s"
var(0) = -2
ignorehitpause = 1

[state 4861,1]
type = varadd
trigger1 = 1
var(17) = ifelse(var(44) >1,3,5)
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 30
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State -2,47]
type = RemoveExplod
trigger1 = time > 30+var(0)
ID = 210

[State 1281, 3]
type = selfstate
trigger1 = time > 30+var(0) && alive = 1
value = 5001

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfstate
trigger1 = !alive 
trigger1 = time > 30+var(0)
value = 5100 ;dead

;よろけ 特大
[Statedef 4868]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),3
channel = 0

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",9100+var(7),9100)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4870

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 43
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0



[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4869

[Statedef 4869]
type = S
movetype = H
physics = S
velset = -10,0

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0 || time = 4
value = 122
pos = -20,0



[state 4861,1]
type = varadd
trigger1 = command = "left" || command = "right" || command = "up" || command = "down"
trigger2 = command = "a" || command = "b" || command = "c" || command = "x" || command = "y" || command = "z" || command = "s"
var(0) = -2
ignorehitpause = 1

[state 4861,1]
type = varadd
trigger1 = 1
var(17) = ifelse(var(44) >1,4,5)
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 30
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State -2,47]
type = RemoveExplod
trigger1 = time > 40+var(0)
ID = 210

[State 1281, 3]
type = selfstate
trigger1 = time > 40+var(0) && alive = 1
value = 5001

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfstate
trigger1 = !alive 
trigger1 = time > 40+var(0)
value = 5100 ;dead


;よろけ 空中hit
[Statedef 4870]
type    = A
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 226, 1]
type = Changeanim
trigger1 = Time >= 0
value = ifelse(p1name = "12",5030+var(7),5030)

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),4
channel = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1 && canrecover = 1 && var(19) = 0 && var(46) = 0 && var(18) = 0
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 33
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4871

[Statedef 4871]
type = A
movetype = H
physics = N
velset = ifelse((prevstateno = [4872,4878]),2,-2),-12

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[state 4861,1]
type = varadd
trigger1 = command = "left" || command = "right" || command = "up" || command = "down"
trigger2 = command = "a" || command = "b" || command = "c" || command = "x" || command = "y" || command = "z" || command = "s"
var(0) = -4
ignorehitpause = 1

[state 4861,1]
type = varadd
trigger1 = var(19) = 0
var(17) = ifelse(var(44) >1,1,2)
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1 && var(19) = 0 && canrecover = 1 && var(46) = 0 && var(18) = 0
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 24
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State -2,47]
type = RemoveExplod
trigger1 = time > 40+var(0)
ID = 210

[state 4870,1]
type = gravity
trigger1 = 1

[State 1281, 3]
type = selfstate
trigger1 = time > 40+var(0)
value = 5050

[State 1281, 3]
type = selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5100

;よろけ 引き戻し
[Statedef 4872]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 121
pos = -20,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),3
channel = 0

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",9100+var(7),9100)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4870

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 43
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4873

[Statedef 4873]
type = S
movetype = H
physics = S
velset = 10,0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 4861,1]
type = varadd
trigger1 = command = "left" || command = "right" || command = "up" || command = "down"
trigger2 = command = "a" || command = "b" || command = "c" || command = "x" || command = "y" || command = "z" || command = "s"
var(0) = -2
ignorehitpause = 1

[state 4861,1]
type = varadd
trigger1 = 1
var(17) = ifelse(var(44) >1,3,4)
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = time > 0 && numexplod(210) = 0 && alive = 1
anim = F210
ID = 210
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 30
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[State -2,47]
type = RemoveExplod
trigger1 = time > 40+var(0)
ID = 210

[State 1281, 3]
type = selfstate
trigger1 = time > 40+var(0) && alive = 1
value = 5001

[State ifelse(p1name = "12",5000+var(7),5000), 5]
type = selfstate
trigger1 = !alive 
trigger1 = time > 40+var(0)
value = 5100 ;dead


;近寄りて斬る也　やられ
[Statedef 4880]
type = S
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 3010, 1]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(p1name = "12",9100+var(7),9100)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1281, 3]
type = nothitby
trigger1 = time = 61
value = SCA
time = 1599

[State 3010, 4]
type = SelfState
trigger1 = time = 61
value = 5110

[state 1046,pos]
type = posset
trigger1 = time = 0
y = 0


;腹崩れ
[Statedef 4900]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),1
channel = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",4900+var(7),4900)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4905

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0


[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4901

[Statedef 4901]
type = S
movetype = H
physics = S

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 4861,1]
type = varadd
trigger1 = 1
var(17) = 4
ignorehitpause = 1

; レバー
[State -2,41]
type = Explod
trigger1 = (time = [0,15]) && numexplod(815) = 0 && alive = 1
anim = F815
ID = 815
pos = 0,-110
postype = p1
sprpriority = 2
removetime = 6
bindtime = -1
ignorehitpause = 1
ownpal = 1
supermove = 0

[state 4901,1]
type = nothitby
trigger1 = animtime = 0
value = SCA
time = 1599

[State 1281, 3]
type = selfstate
trigger1 = animtime = 0
value = 5110

[State 1281, 3]
type = changestate
trigger1 = (time = [15,22]) && command = "holdfwd" && alive = 1
value = 4902

[Statedef 4902]
type = S
movetype = H
physics = S

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 4901,1]
type = nothitby
trigger1 = 1
value = SCA


[State 1281, 3]
type = selfstate
trigger1 = time = 5
value = ifelse(p1name = "12",5220+var(7),5220)

;よろけ 空中hit
[Statedef 4905]
type    = A
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 226, 1]
type = Changeanim
trigger1 = Time >= 0
value = ifelse(p1name = "12",5030+var(7),5030)

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),4
channel = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4906

[Statedef 4906]
type = A
movetype = H
physics = N
velset = -2,-12

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 4861,1]
type = varadd
trigger1 = var(19) = 0
var(17) = ifelse(var(44) >1,1,2)
ignorehitpause = 1

[state 4870,1]
type = gravity
trigger1 = 1

[State 1281, 3]
type = selfstate
trigger1 = time > 40+var(0)
value = 5050

[State 1281, 3]
type = selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5100

;ピヨリ加算やられ
[Statedef 4910]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),1
channel = 0


[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0


[State 226, 1]
type = Changeanim
trigger1 = Time = 0 && statetype != A
value = ifelse(p1name = "12",4900+var(7),4900)

[State 226, 1]
type = Changestate
trigger1 = Time = 0 && statetype = A
value = 4915

[State 1280, 1]
type = posset
trigger1 = Time = 1;0 && statetype != A && pos y != 0
y = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0


[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4911

[Statedef 4911]
type = S
movetype = H
physics = S

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = -12
y = 0

[state 4861,1]
type = varadd
trigger1 = time = 0
var(17) = 1250
ignorehitpause = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1281, 3]
type = selfstate
trigger1 = time = 35
value = ifelse(alive,5000,5100)

;ピヨリ 空中hit
[Statedef 4915]
type    = A
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5030+var(7),5030)

[state 4860,1]
type = varset
trigger1 = time = 0
var(0) = 0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),4
channel = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4916

[Statedef 4916]
type = A
movetype = H
physics = N
velset = -2,-12

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[state 4861,1]
type = varadd
trigger1 = var(19) = 0 && time = 0
var(17) = 1250
ignorehitpause = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 4870,1]
type = gravity
trigger1 = 1

[State 1281, 3]
type = selfstate
trigger1 = time > 40+var(0)
value = 5050

[State 1281, 3]
type = selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5100

;ピヨリ加算　(ダメージ比例）
[statedef 4920]
type = U
movetype = H
physics = N
ctrl = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state assertspecial]
type = playsnd
trigger1 = !alive && statetype != A
trigger1 = time = 1
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),6
channel = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0



[state 800,0 ]
type = varadd
trigger1 = time = 0
v = 17
value = GetHitVar(damage)

[state 800,0 ]
type = varadd
trigger1 = time = 1
v = 17
value = GetHitVar(damage)/2

[State ifelse(p1name = "12",5000+var(7),5000), 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name != "12"
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse((GetHitVar(groundtype) = 1),ifelse(p1name = "12",5000+var(7),5000),5010) + GetHitVar(animtype)

[State ifelse(p1name = "12",5000+var(7),5000), 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name = "12"
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse((GetHitVar(groundtype) = 1),5000+var(7),5010+var(7)) + GetHitVar(animtype)

[State ifelse(p1name = "12",5000+var(7),5000), 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640])
trigger1 = GetHitVar(animtype) = [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse(p1name = "12",5030+var(7),5030)



[State ifelse(p1name = "12",5000+var(7),5000), 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name != "12"
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) 

[State ifelse(p1name = "12",5000+var(7),5000), 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name = "12"
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 +var(7) + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) +var(7)


[State ifelse(p1name = "12",5000+var(7),5000), 32] ;Freeze anim
type = ChangeAnim
trigger1 = p1name != "setsuna" 
trigger2 = var(11) = 0 && p1name = "setsuna"
value = anim

[State 1280, 3]
type = changeState
trigger1 = HitShakeOver = 1
value = 5000

;ピヨリ加算　
[statedef 4921]
type = U
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 800,0 ]
type = gravity
trigger1 = time > 0
trigger1 = statetype = A

[State 5030, 2]
type = HitVelSet
trigger1 = time = 0
trigger1 = statetype = A
x = 1
y = 1

[state 800,0 ]
type = HitVelSet
trigger1 = time = 0
trigger1 = statetype != A
x = 1


[state 800,0 ]
type = veladd
trigger1 = vel x < 0
trigger1 = statetype != A
x = 1

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = S
value = ifelse(p1name = "12",5012+var(7),5012)

[state 820,2]
type = changeanim
trigger1 = time = 15
trigger1 = statetype = S
value = ifelse(p1name = "12",5017+var(7),5017)

[state 820,2]
type = changeanim
trigger1 = time = 15
trigger1 = statetype = C
value = ifelse(p1name = "12",5027+var(7),5027)

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = C
value = ifelse(p1name = "12",5022+var(7),5022)

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = A
value = ifelse(p1name = "12",5070+var(7),5070)

[state 820,3]
type = selfstate
trigger1 = time > gethitvar(hittime)
trigger1 = statetype = S
value = 5000

[state 820,3]
type = selfstate
trigger1 = time > gethitvar(hittime)
trigger1 = statetype = C
value = 5010

[state 820,3]
type = selfstate
trigger1 = statetype = A && vel y > 0 && pos y >= 0
value = 5100

;ピヨリ加算　電刃用
[statedef 4925]
type = U
movetype = H
physics = N
ctrl = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),6
channel = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0



[state 800,0 ]
type = varadd
trigger1 = time = 0
v = 17
value = 270

[state 820,2]
type = changeanim
trigger1 = 1
trigger1 = statetype = S
value = ifelse(p1name = "12",5012+var(7),5012)

[state 820,2]
type = changeanim
trigger1 = 1
trigger1 = statetype = C
value = ifelse(p1name = "12",5022+var(7),5022)

[state 820,2]
type = changeanim
trigger1 = 1
trigger1 = statetype = A
value = ifelse(p1name = "12",5030+var(7),5030)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4926

;ピヨリ加算　
[statedef 4926]
type = U
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 800,0 ]
type = gravity
trigger1 = time > 0
trigger1 = statetype = A

[State 5030, 2]
type = HitVelSet
trigger1 = time = 0
trigger1 = statetype = A
x = 1
y = 1

[state 800,0 ]
type = HitVelSet
trigger1 = time = 0
trigger1 = statetype != A
x = 1


[state 800,0 ]
type = veladd
trigger1 = vel x < 0
trigger1 = statetype != A
x = 1

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = S
value = ifelse(p1name = "12",5012+var(7),5012)

[state 820,2]
type = changeanim
trigger1 = time = 15
trigger1 = statetype = S
value = ifelse(p1name = "12",5017+var(7),5017)

[state 820,2]
type = changeanim
trigger1 = time = 15
trigger1 = statetype = C
value = ifelse(p1name = "12",5027+var(7),5027)

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = C
value = ifelse(p1name = "12",5022+var(7),5022)

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = A
value = ifelse(p1name = "12",5070+var(7),5070)

[state 820,3]
type = selfstate
trigger1 = time > gethitvar(hittime)
trigger1 = statetype = S
value = 5000

[state 820,3]
type = selfstate
trigger1 = time > gethitvar(hittime)
trigger1 = statetype = C
value = 5010

[state 820,3]
type = selfstate
trigger1 = statetype = A && vel y > 0 && pos y >= 0
value = 5100

;ピヨリ加算　
[statedef 4928]
type = U
movetype = H
physics = N
ctrl = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state assertspecial]
type = playsnd
trigger1 = !alive
ignorehitpause = 1
value = ifelse(p1name = "12",11+var(7),11),1
persistent = 0
channel = 0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 5210,1]
type = playsnd
trigger1 = alive
trigger1 = time = 1
value = ifelse(p1name = "12",5000+var(7),5000),6
channel = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0



[state 800,0 ]
type = varadd
trigger1 = time = 0
v = 17
value = ifelse(var(44) >1,GetHitVar(damage)/var(44),GetHitVar(damage))

[state 800,0 ]
type = varadd
trigger1 = time = 1
v = 17
value = ifelse(var(44) >1,(GetHitVar(damage)/2)/var(44),GetHitVar(damage)/2)

[State ifelse(p1name = "12",5000+var(7),5000), 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name != "12"
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse((GetHitVar(groundtype) = 1),ifelse(p1name = "12",5000+var(7),5000),5010) + GetHitVar(animtype)

[State ifelse(p1name = "12",5000+var(7),5000), 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name = "12"
trigger1 = GetHitVar(animtype) != [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse((GetHitVar(groundtype) = 1),5000+var(7),5010+var(7)) + GetHitVar(animtype)

[State ifelse(p1name = "12",5000+var(7),5000), 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640])
trigger1 = GetHitVar(animtype) = [3,5]
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
value = ifelse(p1name = "12",5030+var(7),5030)



[State ifelse(p1name = "12",5000+var(7),5000), 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name != "12"
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) 

[State ifelse(p1name = "12",5000+var(7),5000), 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && (prevstateno != [7600,7640]) && p1name = "12"
trigger1 = p1name != "setsuna" || var(11) = 0 && p1name = "setsuna"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 +var(7) + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) +var(7)


[State ifelse(p1name = "12",5000+var(7),5000), 32] ;Freeze anim
type = ChangeAnim
trigger1 = p1name != "setsuna" 
trigger2 = var(11) = 0 && p1name = "setsuna"
value = anim

[State 1280, 3]
type = changeState
trigger1 = HitShakeOver = 1
value = 4929

;ピヨリ加算　
[statedef 4929]
type = U
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state assertspecial]
type = assertspecial
trigger1 = statetype != A
ignorehitpause = 1
flag = nokosnd

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 800,0 ]
type = gravity
trigger1 = time > 0
trigger1 = statetype = A

[State 5030, 2]
type = HitVelSet
trigger1 = time = 0
trigger1 = statetype = A
x = 1
y = 1

[state 800,0 ]
type = HitVelSet
trigger1 = time = 0
trigger1 = statetype != A
x = 1


[state 800,0 ]
type = veladd
trigger1 = vel x < 0
trigger1 = statetype != A
x = 1

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = S
value = ifelse(p1name = "12",5012+var(7),5012)

[state 820,2]
type = changeanim
trigger1 = time = 15
trigger1 = statetype = S
value = ifelse(p1name = "12",5017+var(7),5017)

[state 820,2]
type = changeanim
trigger1 = time = 15
trigger1 = statetype = C
value = ifelse(p1name = "12",5027+var(7),5027)

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = C
value = ifelse(p1name = "12",5022+var(7),5022)

[state 820,2]
type = changeanim
trigger1 = time = 0
trigger1 = statetype = A
value = ifelse(p1name = "12",5070+var(7),5070)

[state 820,3]
type = selfstate
trigger1 = time > gethitvar(hittime)
trigger1 = statetype = S
value = 5000

[state 820,3]
type = selfstate
trigger1 = time > gethitvar(hittime)
trigger1 = statetype = C
value = 5010

[state 820,3]
type = selfstate
trigger1 = statetype = A && vel y > 0 && pos y >= 0
value = 5100

;しりもち 大
[Statedef 4930]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5012+var(7),5012)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4931

[Statedef 4931]
type = A
movetype = H
physics = N
velset = -5,-6.5

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 1]
type = gravity
trigger1 = 1

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999]) 
var(17) = ifelse(var(44) >1,180/var(44),220)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = ifelse(alive = 0 || var(19) != 0,5100,4932)

; Hit by hard 212 shiki kototuki you (flying)
[Statedef 4932]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5080+var(7),5080)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -3
y = 0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f5,3

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 1281, 1]
type = VelAdd
trigger1 = vel x  < 0
x = .1

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State 1281, 3]
type = selfstate
trigger1 = command = "x" || command = "y" || command = "z"
triggerall = time > 1 && var(19) = 0
trigger2 = var(30) != 0 && (random = [250,400])
trigger3 = command = "s"
value = 5220

[State 1281, 3]
type = selfstate
trigger1 = command = "a" || command = "b" || command = "c"
triggerall = time > 1 && var(19) = 0
trigger2 = var(30) != 0 && (random = [450,600])
trigger3 = command = "s" && command = "holdback" 
value = 5230

[state 1,1]
type = nothitby
trigger1 = 1
value = SCA


[State 1281, 3]
type = changestate
trigger1 = time = 7
value = 4933

[statedef 4933]
type = C
movetype = H
physics = S
ctrl = 0
poweradd = 0

[state 1,1]
type = nothitby
trigger1 = var(19) != 0
value = SCA

[State 1000, 0]
type = HitFallSet
trigger1 = 1
value = 0


[State 1280, 2]
type = ChangeAnim
Trigger1 = Time < 10
value = ifelse(p1name = "12",5120+var(7),5120)
elem = 1

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 10 && time < 20
value = ifelse(p1name = "12",5120+var(7),5120)
elem = 2

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 1281, 3]
type = SelfState
trigger1 = animtime = 0 && var(19) != 0
value = 5304

[State 1281, 3]
type = SelfState
trigger1 = animtime = 0 && var(19) = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

;しりもち 小
[Statedef 4935]
type = A
movetype = H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = ifelse(p1name = "12",5070+var(7),5070)

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4936

[Statedef 4936]
type = A
movetype = H
physics = N
velset = -1,-3.5

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 1]
type = gravity
trigger1 = 1

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,180/var(44),220)

[State 1281, 3]
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = ifelse(alive = 0 || var(19) != 0,5100,4937)


[Statedef 4937]
type = A
movetype = H
physics = N
velset = 0,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5080+var(7),5080)

[State 1281, 1]
type = Velset
trigger1 = Time = 0
x = -3
y = 0

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f5,3

[state 1256,1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 1281, 1]
type = VelAdd
trigger1 = vel x  < 0
x = .1

[State 5001, 1]
type = GameMakeAnim
trigger1 = Time = 0
value = 122
pos = -20,0

[State 1281, 3]
type = selfstate
trigger1 = command = "x" || command = "y" || command = "z"
triggerall = time > 1 && var(19) = 0
trigger2 = var(30) != 0 && (random = [250,400])
trigger3 = command = "s"
value = 5220

[State 1281, 3]
type = selfstate
trigger1 = command = "a" || command = "b" || command = "c"
triggerall = time > 1 && var(19) = 0
trigger2 = var(30) != 0 && (random = [450,600])
trigger3 = command = "s" && command = "holdback" 
value = 5230

[state 1,1]
type = nothitby
trigger1 = 1
value = SCA


[State 1281, 3]
type = changestate
trigger1 = time = 7
value = 4938

[statedef 4938]
type = C
movetype = H
physics = S
ctrl = 0
poweradd = 0

[State 1000, 0]
type = HitFallSet
trigger1 = 1
value = 0

[state 1,1]
type = nothitby
trigger1 = var(19) != 0
value = SCA

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time < 10
value = ifelse(p1name = "12",5120+var(7),5120)
elem = 1

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 10 && time < 20
value = ifelse(p1name = "12",5120+var(7),5120)
elem = 2

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 20 && time < 27
value = ifelse(p1name = "12",5120+var(7),5120)
elem = 3

[State 5100, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 1281, 3]
type = SelfState
trigger1 = animtime = 0 && var(19) != 0
value = 5304

[State 1281, 3]
type = SelfState
trigger1 = animtime = 0 && var(19) = 0
value = ifelse(command = "holddown",11,0)
ctrl = 1

;ワイヤーダメージ
[Statedef 4940]
type    = A
movetype= H
physics = S
ctrl = 0
velset = 0,0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 226, 1]
type = Changeanim
trigger1 = Time >= 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 226,10]
type = playerpush
trigger1 = time  >= 0
value = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[state 1,1]
type = varset
trigger1 = time = 0
fvar(1) = 0.0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4941

[Statedef 4941]
type = A
movetype = H
physics = N
velset = -20,0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,100/var(44),50)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = BackEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 20
value = 4942
ctrl = 0

[state 226,10]
type = playerpush
trigger1 = time  >= 0
value = 0

;---------------------------------------
[Statedef 4942]
type    = A
movetype= H
physics = N

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 227, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State 227, 4]
type = EnvShake
Trigger1 = Time = 0
time = 15
ampl = -3
freq = 90
phase = 90

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F5,3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = ifelse(p1name = "12",5000+var(7),5000),3
channel = 0

[State 227, 6]
type = ChangeState
trigger1 = Time = 2
value = 4943

;---------------------------------------
[Statedef 4943]
type    = A
movetype= H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc" && var(19) = 0
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 228, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -12;-(fvar(1))

[State 228, Vel X]
type = VelSet
trigger1 = Time = 0
x = 12

[State 1281, 1]
type = gravity
trigger1 = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 228, Anim 5050]
type = ChangeAnim
triggerall = Time = 0
trigger1 = !SelfAnimExist(5052) && p1name != "12"
trigger2 = !SelfAnimExist(5052+var(7)) && p1name = "12"
value = ifelse(p1name = "12",5050+var(7),5050)

[State 228, Anim 5052]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5052) && p1name != "12"
trigger2 = SelfAnimExist(5052+var(7)) && p1name = "12"
value = ifelse(p1name = "12",5052+var(7),5052)

[State 228, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name != "12"
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 228, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name = "12"
trigger1 = Anim = 5050+var(7)
trigger1 = SelfAnimExist(5060+var(7))
persistent = 0
value = ifelse(p1name = "12",5060+var(7),5060)

[State 228, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name != "12"
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 228, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name = "12"
trigger1 = Anim = 5052+var(7)
trigger1 = SelfAnimExist(5062+var(7))
persistent = 0
value = ifelse(p1name = "12",5062+var(7),5062)

[State 228, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;ワイヤーダメージ  壁跳ね返り小
[Statedef 4945]
type    = A
movetype= H
physics = S
ctrl = 0
velset = 0,0
facep2 = 1

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 5001, 6]
type = poweradd
trigger1 = time = 0 && var(19) = 1
value = 50

[State 226, 1]
type = Changeanim
trigger1 = Time >= 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 226,10]
type = playerpush
trigger1 = time  >= 0
value = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[state 1,1]
type = varset
trigger1 = time = 0
fvar(1) = 0.0

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4946

[Statedef 4946]
type = A
movetype = H
physics = N
velset = -20,0

[State 226, 1]
type = Changeanim
trigger1 = Time = 0
value = ifelse(p1name = "12",5050+var(7),5050)

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[state 1,1]
type = varadd
trigger1 = time = 0 && (p2stateno != [2000,4999])
var(17) = ifelse(var(44) >1,100/var(44),50)

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1026, No scroll]
type = null;ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1026, No scroll]
type = ScreenBound
trigger1 = BackEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 20
value = 4947
ctrl = 0

[state 226,10]
type = playerpush
trigger1 = time  >= 0
value = 0

;---------------------------------------
[Statedef 4947]
type    = A
movetype= H
physics = N

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 227, 2]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(p1name = "12",5030+var(7),5030)

[State 227, 4]
type = EnvShake
Trigger1 = Time = 0
time = 15
ampl = -3
freq = 90
phase = 90

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F5,3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = ifelse(p1name = "12",5000+var(7),5000),3
channel = 0

[State 227, 6]
type = ChangeState
trigger1 = Time = 2
value = 4948

;---------------------------------------
[Statedef 4948]
type    = A
movetype= H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1281, 3]
type = selfState
trigger1 = power >= 3000 && command = "zc" && var(19) = 0
trigger2 = var(39) > 0 && var(38) = 1 && command = "zc"
value = 785

[State -2, 4.21];ダウン補正とスタン時補正
type = defenceMulSet
trigger1 = var(18) != 0
trigger2 = var(19) != 0
value = ifelse(var(18) != 0,.2,0.4)

[State 228, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -8;-(fvar(1))

[State 228, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1

[State 1281, 1]
type = gravity
trigger1 = 1

[State ifelse(p1name = "12",5000+var(7),5000), FFB Medium]
type = assertspecial
trigger1 = !alive = 1
flag = nomusic

[State 228, Anim 5050]
type = ChangeAnim
triggerall = Time = 0
trigger1 = !SelfAnimExist(5052) && p1name != "12"
trigger2 = !SelfAnimExist(5052+var(7)) && p1name = "12"
value = ifelse(p1name = "12",5050+var(7),5050)

[State 228, Anim 5052]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5052) && p1name != "12"
trigger2 = SelfAnimExist(5052+var(7)) && p1name = "12"
value = ifelse(p1name = "12",5052+var(7),5052)

[State 228, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name != "12"
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 228, Anim 5060]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name = "12"
trigger1 = Anim = 5050+var(7)
trigger1 = SelfAnimExist(5060+var(7))
persistent = 0
value = ifelse(p1name = "12",5060+var(7),5060)

[State 228, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name != "12"
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 228, Anim 5062]
type = ChangeAnim
trigger1 = Vel Y > -2 && p1name = "12"
trigger1 = Anim = 5052+var(7)
trigger1 = SelfAnimExist(5062+var(7))
persistent = 0
value = ifelse(p1name = "12",5062+var(7),5062)

[state 1,1]
type = varadd
trigger1 = (Vel y > 0) && (Pos y >= 0)
var(18) = ifelse(var(18) < 2,1,0) 

[State 228, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100


;無駄なことです
[statedef 7600]
type = A
movetype = H
physics = N
ctrl = 0
poweradd = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[State 1100, 7]
type = VarSet
trigger1 = time = 0
var(1) = 0

[state 1,1]
type = changeanim2
trigger1 = time = 0
value = 2507

[State 1100, 7]
type = VelSet
trigger1 = time = 0
y = 0
x = 0

[State 1305, 8]
type = ChangeState
trigger1 = animtime = 0
value = 7650

;無駄なことです
[statedef 7610]
type = S
movetype = H
physics = S
ctrl = 0
poweradd = 0

[State 8998, 1]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP 
stateno = 7650
slot = 1

[state 1,1]
type = changeanim2
trigger1 = time = 0
value = 2511

[State 1100, 7]
type = VelSet
trigger1 = time = 0
y = 0
x = 0

[State 1100, 7]
type = posset
trigger1 = time = 0
y = 0

[State 1100, 7]
type = Varadd
trigger1 = 1
var(1) = 1

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdfwd" && time > 1
value = 7620

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdback" && time > 1
value = 7621

[State 1305, 8]
type = ChangeState
trigger1 = command = "holddown" && time > 1
value = 7630

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdup"
value = 7640

[State 1305, 8]
type = selfState
trigger1 = var(1) > 400
value = 5000

;無駄なことです
[statedef 7620]
type = S
movetype = H
physics = N
ctrl = 0
poweradd = 0

[State 8998, 1]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP 
stateno = 7650
slot = 1

[state 1,1]
type = changeanim2
trigger1 = anim != 2520 && command = "holdfwd"
value = 2522


[State 1100, 7]
type = VelSet
trigger1 = command = "holdfwd"
x = 3

[State 1100, 7]
type = posset
trigger1 = time = 0
y = 0

[State 1100, 7]
type = Varadd
trigger1 = 1
var(1) = 1

[State 1305, 8]
type = ChangeState
trigger1 = command != "holdfwd" && command != "holdback" && time > 1
value = 7610

[State 1305, 8]
type = ChangeState
trigger1 = command = "holddown" && time > 1
value = 7630

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdup"
value = 7640

[State 1305, 8]
type = selfState
trigger1 = var(1) > 400
value = 5000

;無駄なことです
[statedef 7621]
type = S
movetype = H
physics = N
ctrl = 0
poweradd = 0

[State 8998, 1]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP 
stateno = 7650
slot = 1

[state 1,1]
type = changeanim2
trigger1 = anim != 2521 && command = "holdback"
value = 2523

[State 1100, 7]
type = VelSet
trigger1 = command = "holdback"
x = -3

[State 1100, 7]
type = posset
trigger1 = time = 0
y = 0

[State 1100, 7]
type = Varadd
trigger1 = 1
var(1) = 1

[State 1305, 8]
type = ChangeState
trigger1 = command != "holdfwd" && command != "holdback" && time > 1
value = 7610

[State 1305, 8]
type = ChangeState
trigger1 = command = "holddown" && time > 1
value = 7630

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdup"
value = 7640

[State 1305, 8]
type = selfState
trigger1 = var(1) > 400
value = 5000



;無駄なことです
[statedef 7630]
type = C
movetype = H
physics = C
ctrl = 0
poweradd = 0

[state 1,1]
type = changeanim2
trigger1 = time = 0
value = 2548

[State 1100, 7]
type = posset
trigger1 = time = 0
y = 0


[State 8998, 1]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP 
stateno = 7650
slot = 1

[State 1100, 7]
type = Varadd
trigger1 = 1
var(1) = 1

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdfwd" && time > 1
value = 7620

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdback" && time > 1
value = 7621

[State 1305, 8]
type = ChangeState
trigger1 = command != "holddown" && time > 1
value = 7610

[State 1305, 8]
type = ChangeState
trigger1 = command = "holdup"
value = 7640

[State 1305, 8]
type = selfState
trigger1 = var(1) > 400
value = 5000

;無駄なことです
[statedef 7640]
type = A
movetype = H
physics = N
ctrl = 0
poweradd = 0

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = changeanim2
trigger1 = time = 0 && command != "holdback"
value = 2545

[state 1,1]
type = changeanim2
trigger1 = time = 0 && command = "holdback"
value = 2542

[State 1100, 7]
type = VelSet
trigger1 = animelem = 2
x = ifelse(command = "holdback",-3,ifelse(command = "holdfwd",3,0))
y = -10 

[State 1100, 7]
type = Veladd
trigger1 = animelemtime(2) > 0
y = .65


[State 1100, 7]
type = posset
trigger1 = time = 0
y = 0

[State 1100, 7]
type = Varadd
trigger1 = 1
var(1) = 1

[State 8998, 1]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP 
stateno = 7650
slot = 1

[State 1305, 8]
type = selfState
trigger1 = var(1) > 400
value = 5030


[State 1305, 8]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0 && animelemtime(2) > 0
value = 7610

;無駄なことです
[statedef 7650]
type = A
movetype = H
physics = N
ctrl = 0
poweradd = 50

[State 1026, No scroll]
type = ScreenBound
trigger1 = p2statetype = S || p2statetype = C || (p2stateno = [5100,5230])
triggerall = statetype = A && pos y > -120
triggerall = p2dist y > -120
value = 1
movecamera = 1,0

[state 1,1]
type = changeanim2
trigger1 = time = 0
value = 9999


[State 8998, 1]
type = nothitby
trigger1 = 1
value = SCA


[State 1100, 7]
type = VelSet
trigger1 = time = 0
y = -7
x = -3

[State 1100, 7]
type = Veladd
trigger1 = 1
y = .65

[State 1100, 7]
type = Varadd
trigger1 = 1
var(1) = 3

[State 1305, 8]
type = selfState
trigger1 = var(1) > 400
value = 5030

[State 1305, 8]
type = changestate
trigger1 = pos y >= 0 && vel y > 0 && time > 2 && prevstateno = 7600
value = 7610

[State 1305, 8]
type = selfstate
trigger1 = pos y >= 0 && vel y > 0 && time > 2 && prevstateno != 7600
value = 5000


